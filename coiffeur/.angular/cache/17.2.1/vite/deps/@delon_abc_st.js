import {
  NzCellFixedDirective,
  NzTableCellDirective,
  NzTableComponent,
  NzTableFixedRowComponent,
  NzTableModule,
  NzTableVirtualScrollDirective,
  NzTbodyComponent,
  NzTdAddOnComponent,
  NzThAddOnComponent,
  NzThMeasureDirective,
  NzTheadComponent,
  NzTrDirective,
  NzTrExpandDirective
} from "./chunk-NXVZA5EE.js";
import "./chunk-QCHSWYD5.js";
import {
  NzPopconfirmDirective,
  NzPopconfirmModule
} from "./chunk-ONHYQ4QN.js";
import {
  NzDividerComponent,
  NzDividerModule
} from "./chunk-7WT4K46F.js";
import {
  NzDatePickerComponent,
  NzDatePickerModule,
  NzRangePickerComponent
} from "./chunk-RFPPEW2N.js";
import "./chunk-XXGFXZTF.js";
import {
  NzInputNumberComponent,
  NzInputNumberModule
} from "./chunk-BAMIZHC5.js";
import {
  NzInputDirective,
  NzInputModule
} from "./chunk-OLWLQNMO.js";
import {
  ZoneOutside
} from "./chunk-JNP2PAJ2.js";
import {
  CellComponent,
  CellModule,
  NzTagComponent,
  NzTagModule
} from "./chunk-TLXPSJWE.js";
import {
  NzRadioComponent,
  NzRadioModule
} from "./chunk-HXOUKI53.js";
import {
  NzCheckboxComponent,
  NzCheckboxModule
} from "./chunk-DHBECBBO.js";
import {
  CurrencyService
} from "./chunk-H2P56GNF.js";
import {
  NzBadgeComponent,
  NzBadgeModule
} from "./chunk-SUXV5X43.js";
import "./chunk-ZGRETNTS.js";
import "./chunk-L2FU2BSY.js";
import {
  NzContextMenuService,
  NzDropDownADirective,
  NzDropDownDirective,
  NzDropDownModule,
  NzDropdownMenuComponent
} from "./chunk-SUUEDCXU.js";
import {
  NzMenuDirective,
  NzMenuDividerDirective,
  NzMenuItemComponent,
  NzMenuModule,
  NzSubMenuComponent
} from "./chunk-JKEQI6P6.js";
import "./chunk-CZ6RLQOU.js";
import {
  NzToolTipModule,
  NzTooltipDirective
} from "./chunk-G5E3ZBBD.js";
import "./chunk-3ZTF6XOF.js";
import {
  NzDestroyService
} from "./chunk-CI5DGOKL.js";
import "./chunk-NTY5IID6.js";
import {
  DefaultValueAccessor,
  FormsModule,
  NgControlStatus,
  NgModel
} from "./chunk-FLHT77OR.js";
import {
  ALAIN_I18N_TOKEN,
  DatePipe,
  DelonLocaleService,
  DrawerHelper,
  ModalHelper,
  YNPipe,
  _HttpClient
} from "./chunk-KGHF7NNJ.js";
import "./chunk-FSEFCYMU.js";
import "./chunk-YI23FGK5.js";
import "./chunk-2X2DHHBW.js";
import "./chunk-XRNNFB2N.js";
import "./chunk-IPKUYFYL.js";
import {
  ACLService,
  DelonACLModule
} from "./chunk-Y4W7AVST.js";
import "./chunk-7A7F2ESV.js";
import "./chunk-Z4GMGEHN.js";
import "./chunk-3Z4XHAHP.js";
import "./chunk-XF22SSGY.js";
import "./chunk-AH32UZUP.js";
import "./chunk-UYYIOVNB.js";
import "./chunk-27BDGVS6.js";
import "./chunk-A532CSVY.js";
import "./chunk-Z2ZVAQCX.js";
import {
  NzIconDirective,
  NzIconModule
} from "./chunk-3MXKVZO7.js";
import "./chunk-5QBFNWJX.js";
import "./chunk-6WPOZNJ5.js";
import {
  InputBoolean,
  ensureInBounds,
  isTouchEvent
} from "./chunk-YORGFY4X.js";
import "./chunk-DSM4JBCF.js";
import {
  takeUntilDestroyed
} from "./chunk-YWFK6PYB.js";
import "./chunk-75EB2NOQ.js";
import {
  AlainConfigService,
  LazyService,
  deepCopy,
  deepGet,
  deepMergeKey,
  warn
} from "./chunk-Q3BVRUJT.js";
import {
  Platform,
  normalizePassiveListenerOptions
} from "./chunk-B7EG4KFO.js";
import "./chunk-NX2IJXEA.js";
import "./chunk-KN3RWPAL.js";
import {
  Router
} from "./chunk-TQFAWZD6.js";
import {
  DomSanitizer
} from "./chunk-BPMU3QPJ.js";
import {
  HttpClient,
  HttpParams
} from "./chunk-TECWR7MN.js";
import {
  CommonModule,
  DOCUMENT,
  DecimalPipe,
  NgClass,
  NgForOf,
  NgTemplateOutlet
} from "./chunk-WL36VPKJ.js";
import {
  ChangeDetectionStrategy,
  ChangeDetectorRef,
  Component,
  DestroyRef,
  Directive,
  ENVIRONMENT_INITIALIZER,
  ElementRef,
  EventEmitter,
  Host,
  HostListener,
  Inject,
  Injectable,
  Input,
  InputFlags,
  NgModule,
  NgZone,
  Optional,
  Output,
  Renderer2,
  TemplateRef,
  ViewChild,
  ViewContainerRef,
  ViewEncapsulation$1,
  booleanAttribute,
  inject,
  makeEnvironmentProviders,
  numberAttribute,
  setClassMetadata,
  ɵɵInputTransformsFeature,
  ɵɵNgOnChangesFeature,
  ɵɵProvidersFeature,
  ɵɵStandaloneFeature,
  ɵɵadvance,
  ɵɵattribute,
  ɵɵclassProp,
  ɵɵcomponentInstance,
  ɵɵconditional,
  ɵɵdefineComponent,
  ɵɵdefineDirective,
  ɵɵdefineInjectable,
  ɵɵdefineInjector,
  ɵɵdefineNgModule,
  ɵɵdirectiveInject,
  ɵɵelement,
  ɵɵelementEnd,
  ɵɵelementStart,
  ɵɵgetCurrentView,
  ɵɵinject,
  ɵɵlistener,
  ɵɵloadQuery,
  ɵɵnextContext,
  ɵɵprojection,
  ɵɵprojectionDef,
  ɵɵproperty,
  ɵɵpureFunction0,
  ɵɵpureFunction1,
  ɵɵpureFunction2,
  ɵɵpureFunction3,
  ɵɵqueryRefresh,
  ɵɵreference,
  ɵɵrepeater,
  ɵɵrepeaterCreate,
  ɵɵrepeaterTrackByIdentity,
  ɵɵrepeaterTrackByIndex,
  ɵɵresetView,
  ɵɵrestoreView,
  ɵɵsanitizeHtml,
  ɵɵtemplate,
  ɵɵtemplateRefExtractor,
  ɵɵtext,
  ɵɵtextInterpolate,
  ɵɵtextInterpolate1,
  ɵɵtwoWayBindingSet,
  ɵɵtwoWayListener,
  ɵɵtwoWayProperty,
  ɵɵviewQuery
} from "./chunk-T4EVUEAM.js";
import {
  Subject,
  __decorate,
  catchError,
  filter,
  finalize,
  fromEvent,
  isObservable,
  lastValueFrom,
  map,
  merge,
  of,
  takeUntil,
  throwError
} from "./chunk-JKR55PDT.js";
import {
  __async,
  __spreadProps,
  __spreadValues
} from "./chunk-ASLTLD6L.js";

// node_modules/isutf8/dist/index.esm.js
function isUtf8(buf) {
  if (!buf) {
    return false;
  }
  var i = 0;
  var len = buf.length;
  while (i < len) {
    if (buf[i] <= 127) {
      i++;
      continue;
    }
    if (buf[i] >= 194 && buf[i] <= 223) {
      if (buf[i + 1] >> 6 === 2) {
        i += 2;
        continue;
      } else {
        return false;
      }
    }
    if ((buf[i] === 224 && buf[i + 1] >= 160 && buf[i + 1] <= 191 || buf[i] === 237 && buf[i + 1] >= 128 && buf[i + 1] <= 159) && buf[i + 2] >> 6 === 2) {
      i += 3;
      continue;
    }
    if ((buf[i] >= 225 && buf[i] <= 236 || buf[i] >= 238 && buf[i] <= 239) && buf[i + 1] >> 6 === 2 && buf[i + 2] >> 6 === 2) {
      i += 3;
      continue;
    }
    if ((buf[i] === 240 && buf[i + 1] >= 144 && buf[i + 1] <= 191 || buf[i] >= 241 && buf[i] <= 243 && buf[i + 1] >> 6 === 2 || buf[i] === 244 && buf[i + 1] >= 128 && buf[i + 1] <= 143) && buf[i + 2] >> 6 === 2 && buf[i + 3] >> 6 === 2) {
      i += 4;
      continue;
    }
    return false;
  }
  return true;
}

// node_modules/@delon/abc/fesm2022/xlsx.mjs
var _XlsxService = class _XlsxService {
  constructor(configSrv) {
    this.http = inject(HttpClient);
    this.lazy = inject(LazyService);
    this.ngZone = inject(NgZone);
    this.cog = configSrv.merge("xlsx", {
      url: "https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js",
      modules: [`https://cdn.jsdelivr.net/npm/xlsx/dist/cpexcel.js`]
    });
  }
  init() {
    return typeof XLSX !== "undefined" ? Promise.resolve([]) : this.lazy.load([this.cog.url].concat(this.cog.modules));
  }
  read(data) {
    const {
      read,
      utils: {
        sheet_to_json
      }
    } = XLSX;
    const ret = {};
    const buf = new Uint8Array(data);
    let type = "array";
    if (!isUtf8(buf)) {
      try {
        data = cptable.utils.decode(936, buf);
        type = "string";
      } catch {
      }
    }
    const wb = read(data, {
      type
    });
    wb.SheetNames.forEach((name) => {
      const sheet = wb.Sheets[name];
      ret[name] = sheet_to_json(sheet, {
        header: 1
      });
    });
    return ret;
  }
  /**
   * 导入Excel并输出JSON，支持 `<input type="file">`、URL 形式
   */
  import(fileOrUrl) {
    return new Promise((resolve, reject) => {
      const r = (data) => this.ngZone.run(() => resolve(this.read(data)));
      this.init().then(() => {
        if (typeof fileOrUrl === "string") {
          this.http.request("GET", fileOrUrl, {
            responseType: "arraybuffer"
          }).subscribe({
            next: (res) => r(new Uint8Array(res)),
            error: (err) => reject(err)
          });
          return;
        }
        const reader = new FileReader();
        reader.onload = (e) => r(e.target.result);
        reader.onerror = (e) => reject(e);
        reader.readAsArrayBuffer(fileOrUrl);
      }).catch(() => reject(`Unable to load xlsx.js`));
    });
  }
  export(options) {
    return __async(this, null, function* () {
      return new Promise((resolve, reject) => {
        this.init().then(() => {
          options = __spreadValues({
            format: "xlsx"
          }, options);
          const {
            writeFile,
            utils: {
              book_new,
              aoa_to_sheet,
              book_append_sheet
            }
          } = XLSX;
          const wb = book_new();
          if (Array.isArray(options.sheets)) {
            options.sheets.forEach((value, index) => {
              const ws = aoa_to_sheet(value.data);
              book_append_sheet(wb, ws, value.name || `Sheet${index + 1}`);
            });
          } else {
            wb.SheetNames = Object.keys(options.sheets);
            wb.Sheets = options.sheets;
          }
          if (options.callback)
            options.callback(wb);
          const filename = options.filename || `export.${options.format}`;
          writeFile(wb, filename, __spreadValues({
            bookType: options.format,
            bookSST: false,
            type: "array"
          }, options.opts));
          resolve({
            filename,
            wb
          });
        }).catch((err) => reject(err));
      });
    });
  }
  /**
   * 数据转符号名
   * - `1` => `A`
   * - `27` => `AA`
   * - `703` => `AAA`
   */
  numberToSchema(val) {
    const startCode = "A".charCodeAt(0);
    let res = "";
    do {
      --val;
      res = String.fromCharCode(startCode + val % 26) + res;
      val = val / 26 >> 0;
    } while (val > 0);
    return res;
  }
};
_XlsxService.ɵfac = function XlsxService_Factory(t) {
  return new (t || _XlsxService)(ɵɵinject(AlainConfigService));
};
_XlsxService.ɵprov = ɵɵdefineInjectable({
  token: _XlsxService,
  factory: _XlsxService.ɵfac,
  providedIn: "root"
});
var XlsxService = _XlsxService;
__decorate([ZoneOutside()], XlsxService.prototype, "read", null);
__decorate([ZoneOutside()], XlsxService.prototype, "export", null);
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(XlsxService, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], () => [{
    type: AlainConfigService
  }], {
    read: [],
    export: []
  });
})();
var _XlsxDirective = class _XlsxDirective {
  constructor() {
    this.srv = inject(XlsxService);
  }
  _click() {
    this.srv.export(this.data);
  }
};
_XlsxDirective.ɵfac = function XlsxDirective_Factory(t) {
  return new (t || _XlsxDirective)();
};
_XlsxDirective.ɵdir = ɵɵdefineDirective({
  type: _XlsxDirective,
  selectors: [["", "xlsx", ""]],
  hostBindings: function XlsxDirective_HostBindings(rf, ctx) {
    if (rf & 1) {
      ɵɵlistener("click", function XlsxDirective_click_HostBindingHandler() {
        return ctx._click();
      });
    }
  },
  inputs: {
    data: [InputFlags.None, "xlsx", "data"]
  },
  exportAs: ["xlsx"],
  standalone: true
});
var XlsxDirective = _XlsxDirective;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(XlsxDirective, [{
    type: Directive,
    args: [{
      selector: "[xlsx]",
      exportAs: "xlsx",
      host: {
        "(click)": "_click()"
      },
      standalone: true
    }]
  }], null, {
    data: [{
      type: Input,
      args: ["xlsx"]
    }]
  });
})();
var COMPONENTS = [XlsxDirective];
var _XlsxModule = class _XlsxModule {
};
_XlsxModule.ɵfac = function XlsxModule_Factory(t) {
  return new (t || _XlsxModule)();
};
_XlsxModule.ɵmod = ɵɵdefineNgModule({
  type: _XlsxModule,
  imports: [XlsxDirective],
  exports: [XlsxDirective]
});
_XlsxModule.ɵinj = ɵɵdefineInjector({});
var XlsxModule = _XlsxModule;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(XlsxModule, [{
    type: NgModule,
    args: [{
      imports: [COMPONENTS],
      exports: COMPONENTS
    }]
  }], null, null);
})();

// node_modules/@delon/abc/fesm2022/let.mjs
var LetContext = class {
  constructor(dir) {
    this.dir = dir;
  }
  get $implicit() {
    return this.dir.let;
  }
  get let() {
    return this.dir.let;
  }
};
var _LetDirective = class _LetDirective {
  constructor(vc, ref) {
    vc.createEmbeddedView(ref, new LetContext(this));
  }
  static ngTemplateContextGuard(_dir, _ctx) {
    return true;
  }
};
_LetDirective.ɵfac = function LetDirective_Factory(t) {
  return new (t || _LetDirective)(ɵɵdirectiveInject(ViewContainerRef), ɵɵdirectiveInject(TemplateRef));
};
_LetDirective.ɵdir = ɵɵdefineDirective({
  type: _LetDirective,
  selectors: [["", "let", ""]],
  inputs: {
    let: "let"
  },
  standalone: true
});
var LetDirective = _LetDirective;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(LetDirective, [{
    type: Directive,
    args: [{
      selector: "[let]",
      standalone: true
    }]
  }], () => [{
    type: ViewContainerRef,
    decorators: [{
      type: Inject,
      args: [ViewContainerRef]
    }]
  }, {
    type: TemplateRef,
    decorators: [{
      type: Inject,
      args: [TemplateRef]
    }]
  }], {
    let: [{
      type: Input,
      args: [{
        required: true
      }]
    }]
  });
})();
var DIRECTIVES = [LetDirective];
var _LetModule = class _LetModule {
};
_LetModule.ɵfac = function LetModule_Factory(t) {
  return new (t || _LetModule)();
};
_LetModule.ɵmod = ɵɵdefineNgModule({
  type: _LetModule,
  imports: [LetDirective],
  exports: [LetDirective]
});
_LetModule.ɵinj = ɵɵdefineInjector({});
var LetModule = _LetModule;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(LetModule, [{
    type: NgModule,
    args: [{
      imports: DIRECTIVES,
      exports: DIRECTIVES
    }]
  }], null, null);
})();

// node_modules/ng-zorro-antd/fesm2022/ng-zorro-antd-resizable.mjs
var _c0 = ["*"];
function NzResizeHandlesComponent_nz_resize_handle_0_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelement(0, "nz-resize-handle", 1);
  }
  if (rf & 2) {
    const option_r1 = ctx.$implicit;
    ɵɵproperty("nzDirection", option_r1.direction)("nzCursorType", option_r1.cursorType);
  }
}
function getEventWithPoint(event) {
  return isTouchEvent(event) ? event.touches[0] || event.changedTouches[0] : event;
}
var _NzResizableService = class _NzResizableService {
  constructor(ngZone, document) {
    this.ngZone = ngZone;
    this.listeners = /* @__PURE__ */ new Map();
    this.handleMouseDownOutsideAngular$ = new Subject();
    this.documentMouseUpOutsideAngular$ = new Subject();
    this.documentMouseMoveOutsideAngular$ = new Subject();
    this.mouseEnteredOutsideAngular$ = new Subject();
    this.document = document;
  }
  startResizing(event) {
    const _isTouchEvent = isTouchEvent(event);
    this.clearListeners();
    const moveEvent = _isTouchEvent ? "touchmove" : "mousemove";
    const upEvent = _isTouchEvent ? "touchend" : "mouseup";
    const moveEventHandler = (e) => {
      this.documentMouseMoveOutsideAngular$.next(e);
    };
    const upEventHandler = (e) => {
      this.documentMouseUpOutsideAngular$.next(e);
      this.clearListeners();
    };
    this.listeners.set(moveEvent, moveEventHandler);
    this.listeners.set(upEvent, upEventHandler);
    this.ngZone.runOutsideAngular(() => {
      this.listeners.forEach((handler, name) => {
        this.document.addEventListener(name, handler);
      });
    });
  }
  clearListeners() {
    this.listeners.forEach((handler, name) => {
      this.document.removeEventListener(name, handler);
    });
    this.listeners.clear();
  }
  ngOnDestroy() {
    this.handleMouseDownOutsideAngular$.complete();
    this.documentMouseUpOutsideAngular$.complete();
    this.documentMouseMoveOutsideAngular$.complete();
    this.mouseEnteredOutsideAngular$.complete();
    this.clearListeners();
  }
};
_NzResizableService.ɵfac = function NzResizableService_Factory(t) {
  return new (t || _NzResizableService)(ɵɵinject(NgZone), ɵɵinject(DOCUMENT));
};
_NzResizableService.ɵprov = ɵɵdefineInjectable({
  token: _NzResizableService,
  factory: _NzResizableService.ɵfac
});
var NzResizableService = _NzResizableService;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(NzResizableService, [{
    type: Injectable
  }], () => [{
    type: NgZone
  }, {
    type: void 0,
    decorators: [{
      type: Inject,
      args: [DOCUMENT]
    }]
  }], null);
})();
var _NzResizableDirective = class _NzResizableDirective {
  constructor(elementRef, renderer, nzResizableService, platform, ngZone, destroy$) {
    this.elementRef = elementRef;
    this.renderer = renderer;
    this.nzResizableService = nzResizableService;
    this.platform = platform;
    this.ngZone = ngZone;
    this.destroy$ = destroy$;
    this.nzBounds = "parent";
    this.nzMinHeight = 40;
    this.nzMinWidth = 40;
    this.nzGridColumnCount = -1;
    this.nzMaxColumn = -1;
    this.nzMinColumn = -1;
    this.nzLockAspectRatio = false;
    this.nzPreview = false;
    this.nzDisabled = false;
    this.nzResize = new EventEmitter();
    this.nzResizeEnd = new EventEmitter();
    this.nzResizeStart = new EventEmitter();
    this.resizing = false;
    this.currentHandleEvent = null;
    this.ghostElement = null;
    this.sizeCache = null;
    this.nzResizableService.handleMouseDownOutsideAngular$.pipe(takeUntil(this.destroy$)).subscribe((event) => {
      if (this.nzDisabled) {
        return;
      }
      this.resizing = true;
      this.nzResizableService.startResizing(event.mouseEvent);
      this.currentHandleEvent = event;
      if (this.nzResizeStart.observers.length) {
        this.ngZone.run(() => this.nzResizeStart.emit({
          mouseEvent: event.mouseEvent,
          direction: event.direction
        }));
      }
      this.elRect = this.el.getBoundingClientRect();
    });
    this.nzResizableService.documentMouseUpOutsideAngular$.pipe(takeUntil(this.destroy$), filter(Boolean)).subscribe((event) => {
      if (this.resizing) {
        this.resizing = false;
        this.nzResizableService.documentMouseUpOutsideAngular$.next(null);
        this.endResize(event);
      }
    });
    this.nzResizableService.documentMouseMoveOutsideAngular$.pipe(takeUntil(this.destroy$)).subscribe((event) => {
      if (this.resizing) {
        this.resize(event);
      }
    });
  }
  setPosition() {
    const position = getComputedStyle(this.el).position;
    if (position === "static" || !position) {
      this.renderer.setStyle(this.el, "position", "relative");
    }
  }
  calcSize(width, height, ratio) {
    let newWidth;
    let newHeight;
    let maxWidth;
    let maxHeight;
    let col = 0;
    let spanWidth = 0;
    let minWidth = this.nzMinWidth;
    let boundWidth = Infinity;
    let boundHeight = Infinity;
    if (this.nzBounds === "parent") {
      const parent = this.renderer.parentNode(this.el);
      if (parent instanceof HTMLElement) {
        const parentRect = parent.getBoundingClientRect();
        boundWidth = parentRect.width;
        boundHeight = parentRect.height;
      }
    } else if (this.nzBounds === "window") {
      if (typeof window !== "undefined") {
        boundWidth = window.innerWidth;
        boundHeight = window.innerHeight;
      }
    } else if (this.nzBounds && this.nzBounds.nativeElement && this.nzBounds.nativeElement instanceof HTMLElement) {
      const boundsRect = this.nzBounds.nativeElement.getBoundingClientRect();
      boundWidth = boundsRect.width;
      boundHeight = boundsRect.height;
    }
    maxWidth = ensureInBounds(this.nzMaxWidth, boundWidth);
    maxHeight = ensureInBounds(this.nzMaxHeight, boundHeight);
    if (this.nzGridColumnCount !== -1) {
      spanWidth = maxWidth / this.nzGridColumnCount;
      minWidth = this.nzMinColumn !== -1 ? spanWidth * this.nzMinColumn : minWidth;
      maxWidth = this.nzMaxColumn !== -1 ? spanWidth * this.nzMaxColumn : maxWidth;
    }
    if (ratio !== -1) {
      if (/(left|right)/i.test(this.currentHandleEvent.direction)) {
        newWidth = Math.min(Math.max(width, minWidth), maxWidth);
        newHeight = Math.min(Math.max(newWidth / ratio, this.nzMinHeight), maxHeight);
        if (newHeight >= maxHeight || newHeight <= this.nzMinHeight) {
          newWidth = Math.min(Math.max(newHeight * ratio, minWidth), maxWidth);
        }
      } else {
        newHeight = Math.min(Math.max(height, this.nzMinHeight), maxHeight);
        newWidth = Math.min(Math.max(newHeight * ratio, minWidth), maxWidth);
        if (newWidth >= maxWidth || newWidth <= minWidth) {
          newHeight = Math.min(Math.max(newWidth / ratio, this.nzMinHeight), maxHeight);
        }
      }
    } else {
      newWidth = Math.min(Math.max(width, minWidth), maxWidth);
      newHeight = Math.min(Math.max(height, this.nzMinHeight), maxHeight);
    }
    if (this.nzGridColumnCount !== -1) {
      col = Math.round(newWidth / spanWidth);
      newWidth = col * spanWidth;
    }
    return {
      col,
      width: newWidth,
      height: newHeight
    };
  }
  resize(event) {
    const elRect = this.elRect;
    const resizeEvent = getEventWithPoint(event);
    const handleEvent = getEventWithPoint(this.currentHandleEvent.mouseEvent);
    let width = elRect.width;
    let height = elRect.height;
    const ratio = this.nzLockAspectRatio ? width / height : -1;
    switch (this.currentHandleEvent.direction) {
      case "bottomRight":
        width = resizeEvent.clientX - elRect.left;
        height = resizeEvent.clientY - elRect.top;
        break;
      case "bottomLeft":
        width = elRect.width + handleEvent.clientX - resizeEvent.clientX;
        height = resizeEvent.clientY - elRect.top;
        break;
      case "topRight":
        width = resizeEvent.clientX - elRect.left;
        height = elRect.height + handleEvent.clientY - resizeEvent.clientY;
        break;
      case "topLeft":
        width = elRect.width + handleEvent.clientX - resizeEvent.clientX;
        height = elRect.height + handleEvent.clientY - resizeEvent.clientY;
        break;
      case "top":
        height = elRect.height + handleEvent.clientY - resizeEvent.clientY;
        break;
      case "right":
        width = resizeEvent.clientX - elRect.left;
        break;
      case "bottom":
        height = resizeEvent.clientY - elRect.top;
        break;
      case "left":
        width = elRect.width + handleEvent.clientX - resizeEvent.clientX;
    }
    const size = this.calcSize(width, height, ratio);
    this.sizeCache = __spreadValues({}, size);
    if (this.nzResize.observers.length) {
      this.ngZone.run(() => {
        this.nzResize.emit(__spreadProps(__spreadValues({}, size), {
          mouseEvent: event,
          direction: this.currentHandleEvent.direction
        }));
      });
    }
    if (this.nzPreview) {
      this.previewResize(size);
    }
  }
  endResize(event) {
    this.removeGhostElement();
    const size = this.sizeCache ? __spreadValues({}, this.sizeCache) : {
      width: this.elRect.width,
      height: this.elRect.height
    };
    if (this.nzResizeEnd.observers.length) {
      this.ngZone.run(() => {
        this.nzResizeEnd.emit(__spreadProps(__spreadValues({}, size), {
          mouseEvent: event,
          direction: this.currentHandleEvent.direction
        }));
      });
    }
    this.sizeCache = null;
    this.currentHandleEvent = null;
  }
  previewResize({
    width,
    height
  }) {
    this.createGhostElement();
    this.renderer.setStyle(this.ghostElement, "width", `${width}px`);
    this.renderer.setStyle(this.ghostElement, "height", `${height}px`);
  }
  createGhostElement() {
    if (!this.ghostElement) {
      this.ghostElement = this.renderer.createElement("div");
      this.renderer.setAttribute(this.ghostElement, "class", "nz-resizable-preview");
    }
    this.renderer.appendChild(this.el, this.ghostElement);
  }
  removeGhostElement() {
    if (this.ghostElement) {
      this.renderer.removeChild(this.el, this.ghostElement);
    }
  }
  ngAfterViewInit() {
    if (!this.platform.isBrowser) {
      return;
    }
    this.el = this.elementRef.nativeElement;
    this.setPosition();
    this.ngZone.runOutsideAngular(() => {
      fromEvent(this.el, "mouseenter").pipe(takeUntil(this.destroy$)).subscribe(() => {
        this.nzResizableService.mouseEnteredOutsideAngular$.next(true);
      });
      fromEvent(this.el, "mouseleave").pipe(takeUntil(this.destroy$)).subscribe(() => {
        this.nzResizableService.mouseEnteredOutsideAngular$.next(false);
      });
    });
  }
  ngOnDestroy() {
    this.ghostElement = null;
    this.sizeCache = null;
  }
};
_NzResizableDirective.ɵfac = function NzResizableDirective_Factory(t) {
  return new (t || _NzResizableDirective)(ɵɵdirectiveInject(ElementRef), ɵɵdirectiveInject(Renderer2), ɵɵdirectiveInject(NzResizableService), ɵɵdirectiveInject(Platform), ɵɵdirectiveInject(NgZone), ɵɵdirectiveInject(NzDestroyService));
};
_NzResizableDirective.ɵdir = ɵɵdefineDirective({
  type: _NzResizableDirective,
  selectors: [["", "nz-resizable", ""]],
  hostAttrs: [1, "nz-resizable"],
  hostVars: 4,
  hostBindings: function NzResizableDirective_HostBindings(rf, ctx) {
    if (rf & 2) {
      ɵɵclassProp("nz-resizable-resizing", ctx.resizing)("nz-resizable-disabled", ctx.nzDisabled);
    }
  },
  inputs: {
    nzBounds: "nzBounds",
    nzMaxHeight: "nzMaxHeight",
    nzMaxWidth: "nzMaxWidth",
    nzMinHeight: "nzMinHeight",
    nzMinWidth: "nzMinWidth",
    nzGridColumnCount: "nzGridColumnCount",
    nzMaxColumn: "nzMaxColumn",
    nzMinColumn: "nzMinColumn",
    nzLockAspectRatio: "nzLockAspectRatio",
    nzPreview: "nzPreview",
    nzDisabled: "nzDisabled"
  },
  outputs: {
    nzResize: "nzResize",
    nzResizeEnd: "nzResizeEnd",
    nzResizeStart: "nzResizeStart"
  },
  exportAs: ["nzResizable"],
  standalone: true,
  features: [ɵɵProvidersFeature([NzResizableService, NzDestroyService])]
});
var NzResizableDirective = _NzResizableDirective;
__decorate([InputBoolean()], NzResizableDirective.prototype, "nzLockAspectRatio", void 0);
__decorate([InputBoolean()], NzResizableDirective.prototype, "nzPreview", void 0);
__decorate([InputBoolean()], NzResizableDirective.prototype, "nzDisabled", void 0);
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(NzResizableDirective, [{
    type: Directive,
    args: [{
      selector: "[nz-resizable]",
      exportAs: "nzResizable",
      providers: [NzResizableService, NzDestroyService],
      host: {
        class: "nz-resizable",
        "[class.nz-resizable-resizing]": "resizing",
        "[class.nz-resizable-disabled]": "nzDisabled"
      },
      standalone: true
    }]
  }], () => [{
    type: ElementRef
  }, {
    type: Renderer2
  }, {
    type: NzResizableService
  }, {
    type: Platform
  }, {
    type: NgZone
  }, {
    type: NzDestroyService
  }], {
    nzBounds: [{
      type: Input
    }],
    nzMaxHeight: [{
      type: Input
    }],
    nzMaxWidth: [{
      type: Input
    }],
    nzMinHeight: [{
      type: Input
    }],
    nzMinWidth: [{
      type: Input
    }],
    nzGridColumnCount: [{
      type: Input
    }],
    nzMaxColumn: [{
      type: Input
    }],
    nzMinColumn: [{
      type: Input
    }],
    nzLockAspectRatio: [{
      type: Input
    }],
    nzPreview: [{
      type: Input
    }],
    nzDisabled: [{
      type: Input
    }],
    nzResize: [{
      type: Output
    }],
    nzResizeEnd: [{
      type: Output
    }],
    nzResizeStart: [{
      type: Output
    }]
  });
})();
var NzResizeHandleMouseDownEvent = class {
  constructor(direction, mouseEvent) {
    this.direction = direction;
    this.mouseEvent = mouseEvent;
  }
};
var passiveEventListenerOptions = normalizePassiveListenerOptions({
  passive: true
});
var _NzResizeHandleComponent = class _NzResizeHandleComponent {
  constructor(ngZone, nzResizableService, renderer, host, destroy$) {
    this.ngZone = ngZone;
    this.nzResizableService = nzResizableService;
    this.renderer = renderer;
    this.host = host;
    this.destroy$ = destroy$;
    this.nzDirection = "bottomRight";
    this.nzCursorType = "window";
    this.nzMouseDown = new EventEmitter();
  }
  ngOnInit() {
    this.nzResizableService.mouseEnteredOutsideAngular$.pipe(takeUntil(this.destroy$)).subscribe((entered) => {
      if (entered) {
        this.renderer.addClass(this.host.nativeElement, "nz-resizable-handle-box-hover");
      } else {
        this.renderer.removeClass(this.host.nativeElement, "nz-resizable-handle-box-hover");
      }
    });
    this.ngZone.runOutsideAngular(() => {
      merge(fromEvent(this.host.nativeElement, "mousedown", passiveEventListenerOptions), fromEvent(this.host.nativeElement, "touchstart", passiveEventListenerOptions)).pipe(takeUntil(this.destroy$)).subscribe((event) => {
        this.nzResizableService.handleMouseDownOutsideAngular$.next(new NzResizeHandleMouseDownEvent(this.nzDirection, event));
      });
    });
  }
  onPointerDown(event) {
    event.target.setPointerCapture(event.pointerId);
  }
  onPointerUp(event) {
    event.target.releasePointerCapture(event.pointerId);
  }
};
_NzResizeHandleComponent.ɵfac = function NzResizeHandleComponent_Factory(t) {
  return new (t || _NzResizeHandleComponent)(ɵɵdirectiveInject(NgZone), ɵɵdirectiveInject(NzResizableService), ɵɵdirectiveInject(Renderer2), ɵɵdirectiveInject(ElementRef), ɵɵdirectiveInject(NzDestroyService));
};
_NzResizeHandleComponent.ɵcmp = ɵɵdefineComponent({
  type: _NzResizeHandleComponent,
  selectors: [["nz-resize-handle"], ["", "nz-resize-handle", ""]],
  hostAttrs: [1, "nz-resizable-handle"],
  hostVars: 20,
  hostBindings: function NzResizeHandleComponent_HostBindings(rf, ctx) {
    if (rf & 1) {
      ɵɵlistener("pointerdown", function NzResizeHandleComponent_pointerdown_HostBindingHandler($event) {
        return ctx.onPointerDown($event);
      })("pointerup", function NzResizeHandleComponent_pointerup_HostBindingHandler($event) {
        return ctx.onPointerUp($event);
      });
    }
    if (rf & 2) {
      ɵɵclassProp("nz-resizable-handle-top", ctx.nzDirection === "top")("nz-resizable-handle-right", ctx.nzDirection === "right")("nz-resizable-handle-bottom", ctx.nzDirection === "bottom")("nz-resizable-handle-left", ctx.nzDirection === "left")("nz-resizable-handle-topRight", ctx.nzDirection === "topRight")("nz-resizable-handle-bottomRight", ctx.nzDirection === "bottomRight")("nz-resizable-handle-bottomLeft", ctx.nzDirection === "bottomLeft")("nz-resizable-handle-topLeft", ctx.nzDirection === "topLeft")("nz-resizable-handle-cursor-type-grid", ctx.nzCursorType === "grid")("nz-resizable-handle-cursor-type-window", ctx.nzCursorType === "window");
    }
  },
  inputs: {
    nzDirection: "nzDirection",
    nzCursorType: "nzCursorType"
  },
  outputs: {
    nzMouseDown: "nzMouseDown"
  },
  exportAs: ["nzResizeHandle"],
  standalone: true,
  features: [ɵɵProvidersFeature([NzDestroyService]), ɵɵStandaloneFeature],
  ngContentSelectors: _c0,
  decls: 1,
  vars: 0,
  template: function NzResizeHandleComponent_Template(rf, ctx) {
    if (rf & 1) {
      ɵɵprojectionDef();
      ɵɵprojection(0);
    }
  },
  encapsulation: 2,
  changeDetection: 0
});
var NzResizeHandleComponent = _NzResizeHandleComponent;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(NzResizeHandleComponent, [{
    type: Component,
    args: [{
      selector: "nz-resize-handle, [nz-resize-handle]",
      exportAs: "nzResizeHandle",
      template: ` <ng-content></ng-content> `,
      changeDetection: ChangeDetectionStrategy.OnPush,
      host: {
        class: "nz-resizable-handle",
        "[class.nz-resizable-handle-top]": `nzDirection === 'top'`,
        "[class.nz-resizable-handle-right]": `nzDirection === 'right'`,
        "[class.nz-resizable-handle-bottom]": `nzDirection === 'bottom'`,
        "[class.nz-resizable-handle-left]": `nzDirection === 'left'`,
        "[class.nz-resizable-handle-topRight]": `nzDirection === 'topRight'`,
        "[class.nz-resizable-handle-bottomRight]": `nzDirection === 'bottomRight'`,
        "[class.nz-resizable-handle-bottomLeft]": `nzDirection === 'bottomLeft'`,
        "[class.nz-resizable-handle-topLeft]": `nzDirection === 'topLeft'`,
        "[class.nz-resizable-handle-cursor-type-grid]": `nzCursorType === 'grid'`,
        "[class.nz-resizable-handle-cursor-type-window]": `nzCursorType === 'window'`
      },
      providers: [NzDestroyService],
      standalone: true
    }]
  }], () => [{
    type: NgZone
  }, {
    type: NzResizableService
  }, {
    type: Renderer2
  }, {
    type: ElementRef
  }, {
    type: NzDestroyService
  }], {
    nzDirection: [{
      type: Input
    }],
    nzCursorType: [{
      type: Input
    }],
    nzMouseDown: [{
      type: Output
    }],
    onPointerDown: [{
      type: HostListener,
      args: ["pointerdown", ["$event"]]
    }],
    onPointerUp: [{
      type: HostListener,
      args: ["pointerup", ["$event"]]
    }]
  });
})();
var DEFAULT_RESIZE_DIRECTION = ["bottomRight", "topRight", "bottomLeft", "topLeft", "bottom", "right", "top", "left"];
function normalizeResizeHandleOptions(value) {
  return value.map((val) => {
    if (typeof val === "string") {
      return {
        direction: val,
        cursorType: "window"
      };
    }
    return val;
  });
}
var _NzResizeHandlesComponent = class _NzResizeHandlesComponent {
  constructor() {
    this.nzDirections = DEFAULT_RESIZE_DIRECTION;
    this.resizeHandleOptions = normalizeResizeHandleOptions(this.nzDirections);
  }
  ngOnChanges(changes) {
    if (changes.nzDirections) {
      this.resizeHandleOptions = normalizeResizeHandleOptions(changes.nzDirections.currentValue);
    }
  }
};
_NzResizeHandlesComponent.ɵfac = function NzResizeHandlesComponent_Factory(t) {
  return new (t || _NzResizeHandlesComponent)();
};
_NzResizeHandlesComponent.ɵcmp = ɵɵdefineComponent({
  type: _NzResizeHandlesComponent,
  selectors: [["nz-resize-handles"]],
  inputs: {
    nzDirections: "nzDirections"
  },
  exportAs: ["nzResizeHandles"],
  standalone: true,
  features: [ɵɵNgOnChangesFeature, ɵɵStandaloneFeature],
  decls: 1,
  vars: 1,
  consts: [[3, "nzDirection", "nzCursorType", 4, "ngFor", "ngForOf"], [3, "nzDirection", "nzCursorType"]],
  template: function NzResizeHandlesComponent_Template(rf, ctx) {
    if (rf & 1) {
      ɵɵtemplate(0, NzResizeHandlesComponent_nz_resize_handle_0_Template, 1, 2, "nz-resize-handle", 0);
    }
    if (rf & 2) {
      ɵɵproperty("ngForOf", ctx.resizeHandleOptions);
    }
  },
  dependencies: [NzResizeHandleComponent, NgForOf],
  encapsulation: 2,
  changeDetection: 0
});
var NzResizeHandlesComponent = _NzResizeHandlesComponent;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(NzResizeHandlesComponent, [{
    type: Component,
    args: [{
      selector: "nz-resize-handles",
      exportAs: "nzResizeHandles",
      template: `
    <nz-resize-handle
      *ngFor="let option of resizeHandleOptions"
      [nzDirection]="option.direction"
      [nzCursorType]="option.cursorType"
    ></nz-resize-handle>
  `,
      changeDetection: ChangeDetectionStrategy.OnPush,
      imports: [NzResizeHandleComponent, NgForOf],
      standalone: true
    }]
  }], null, {
    nzDirections: [{
      type: Input
    }]
  });
})();
var _NzResizableModule = class _NzResizableModule {
};
_NzResizableModule.ɵfac = function NzResizableModule_Factory(t) {
  return new (t || _NzResizableModule)();
};
_NzResizableModule.ɵmod = ɵɵdefineNgModule({
  type: _NzResizableModule,
  imports: [NzResizableDirective, NzResizeHandleComponent, NzResizeHandlesComponent],
  exports: [NzResizableDirective, NzResizeHandleComponent, NzResizeHandlesComponent]
});
_NzResizableModule.ɵinj = ɵɵdefineInjector({});
var NzResizableModule = _NzResizableModule;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(NzResizableModule, [{
    type: NgModule,
    args: [{
      imports: [NzResizableDirective, NzResizeHandleComponent, NzResizeHandlesComponent],
      exports: [NzResizableDirective, NzResizeHandleComponent, NzResizeHandlesComponent]
    }]
  }], null, null);
})();

// node_modules/@delon/abc/fesm2022/st.mjs
function STFilterComponent_Case_5_Template(rf, ctx) {
  if (rf & 1) {
    const _r8 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "div", 5)(1, "input", 6);
    ɵɵtwoWayListener("ngModelChange", function STFilterComponent_Case_5_Template_input_ngModelChange_1_listener($event) {
      ɵɵrestoreView(_r8);
      const ctx_r7 = ɵɵnextContext();
      ɵɵtwoWayBindingSet(ctx_r7.f.menus[0].value, $event) || (ctx_r7.f.menus[0].value = $event);
      return ɵɵresetView($event);
    });
    ɵɵlistener("ngModelChange", function STFilterComponent_Case_5_Template_input_ngModelChange_1_listener($event) {
      ɵɵrestoreView(_r8);
      const ctx_r9 = ɵɵnextContext();
      return ɵɵresetView(ctx_r9.n.emit($event));
    })("keyup.enter", function STFilterComponent_Case_5_Template_input_keyup_enter_1_listener() {
      ɵɵrestoreView(_r8);
      const ctx_r10 = ɵɵnextContext();
      return ɵɵresetView(ctx_r10.confirm());
    });
    ɵɵelementEnd()();
  }
  if (rf & 2) {
    const ctx_r1 = ɵɵnextContext();
    ɵɵadvance();
    ɵɵtwoWayProperty("ngModel", ctx_r1.f.menus[0].value);
    ɵɵattribute("placeholder", ctx_r1.f.placeholder);
  }
}
function STFilterComponent_Case_6_Template(rf, ctx) {
  if (rf & 1) {
    const _r12 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "div", 7)(1, "nz-input-number", 8);
    ɵɵtwoWayListener("ngModelChange", function STFilterComponent_Case_6_Template_nz_input_number_ngModelChange_1_listener($event) {
      ɵɵrestoreView(_r12);
      const ctx_r11 = ɵɵnextContext();
      ɵɵtwoWayBindingSet(ctx_r11.f.menus[0].value, $event) || (ctx_r11.f.menus[0].value = $event);
      return ɵɵresetView($event);
    });
    ɵɵlistener("ngModelChange", function STFilterComponent_Case_6_Template_nz_input_number_ngModelChange_1_listener($event) {
      ɵɵrestoreView(_r12);
      const ctx_r13 = ɵɵnextContext();
      return ɵɵresetView(ctx_r13.n.emit($event));
    });
    ɵɵelementEnd()();
  }
  if (rf & 2) {
    const ctx_r2 = ɵɵnextContext();
    ɵɵadvance();
    ɵɵtwoWayProperty("ngModel", ctx_r2.f.menus[0].value);
    ɵɵproperty("nzMin", ctx_r2.f.number.min)("nzMax", ctx_r2.f.number.max)("nzStep", ctx_r2.f.number.step)("nzPrecision", ctx_r2.f.number.precision)("nzPlaceHolder", ctx_r2.f.placeholder);
  }
}
function STFilterComponent_Case_7_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r17 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "nz-range-picker", 11);
    ɵɵtwoWayListener("ngModelChange", function STFilterComponent_Case_7_Conditional_1_Template_nz_range_picker_ngModelChange_0_listener($event) {
      ɵɵrestoreView(_r17);
      const ctx_r16 = ɵɵnextContext(2);
      ɵɵtwoWayBindingSet(ctx_r16.f.menus[0].value, $event) || (ctx_r16.f.menus[0].value = $event);
      return ɵɵresetView($event);
    });
    ɵɵlistener("ngModelChange", function STFilterComponent_Case_7_Conditional_1_Template_nz_range_picker_ngModelChange_0_listener($event) {
      ɵɵrestoreView(_r17);
      const ctx_r18 = ɵɵnextContext(2);
      return ɵɵresetView(ctx_r18.n.emit($event));
    });
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const ctx_r14 = ɵɵnextContext(2);
    ɵɵproperty("nzMode", ctx_r14.f.date.mode);
    ɵɵtwoWayProperty("ngModel", ctx_r14.f.menus[0].value);
    ɵɵproperty("nzShowNow", ctx_r14.f.date.showNow)("nzShowToday", ctx_r14.f.date.showToday)("nzDisabledDate", ctx_r14.f.date.disabledDate)("nzDisabledTime", ctx_r14.f.date.disabledTime);
  }
}
function STFilterComponent_Case_7_Conditional_2_Template(rf, ctx) {
  if (rf & 1) {
    const _r20 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "nz-date-picker", 11);
    ɵɵtwoWayListener("ngModelChange", function STFilterComponent_Case_7_Conditional_2_Template_nz_date_picker_ngModelChange_0_listener($event) {
      ɵɵrestoreView(_r20);
      const ctx_r19 = ɵɵnextContext(2);
      ɵɵtwoWayBindingSet(ctx_r19.f.menus[0].value, $event) || (ctx_r19.f.menus[0].value = $event);
      return ɵɵresetView($event);
    });
    ɵɵlistener("ngModelChange", function STFilterComponent_Case_7_Conditional_2_Template_nz_date_picker_ngModelChange_0_listener($event) {
      ɵɵrestoreView(_r20);
      const ctx_r21 = ɵɵnextContext(2);
      return ɵɵresetView(ctx_r21.n.emit($event));
    });
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const ctx_r15 = ɵɵnextContext(2);
    ɵɵproperty("nzMode", ctx_r15.f.date.mode);
    ɵɵtwoWayProperty("ngModel", ctx_r15.f.menus[0].value);
    ɵɵproperty("nzShowNow", ctx_r15.f.date.showNow)("nzShowToday", ctx_r15.f.date.showToday)("nzDisabledDate", ctx_r15.f.date.disabledDate)("nzDisabledTime", ctx_r15.f.date.disabledTime);
  }
}
function STFilterComponent_Case_7_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "div", 9);
    ɵɵtemplate(1, STFilterComponent_Case_7_Conditional_1_Template, 1, 6, "nz-range-picker", 10)(2, STFilterComponent_Case_7_Conditional_2_Template, 1, 6);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const ctx_r3 = ɵɵnextContext();
    ɵɵadvance();
    ɵɵconditional(1, ctx_r3.f.date.range ? 1 : 2);
  }
}
function STFilterComponent_Case_8_ng_template_1_Template(rf, ctx) {
}
var _c02 = (a0, a1, a2) => ({
  $implicit: a0,
  col: a1,
  handle: a2
});
function STFilterComponent_Case_8_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "div", 12);
    ɵɵtemplate(1, STFilterComponent_Case_8_ng_template_1_Template, 0, 0, "ng-template", 13);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const ctx_r4 = ɵɵnextContext();
    ɵɵadvance();
    ɵɵproperty("ngTemplateOutlet", ctx_r4.f.custom)("ngTemplateOutletContext", ɵɵpureFunction3(2, _c02, ctx_r4.f, ctx_r4.col, ctx_r4));
  }
}
function STFilterComponent_Case_9_For_2_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r33 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "label", 17);
    ɵɵtwoWayListener("ngModelChange", function STFilterComponent_Case_9_For_2_Conditional_1_Template_label_ngModelChange_0_listener($event) {
      ɵɵrestoreView(_r33);
      const filter_r24 = ɵɵnextContext().$implicit;
      ɵɵtwoWayBindingSet(filter_r24.checked, $event) || (filter_r24.checked = $event);
      return ɵɵresetView($event);
    });
    ɵɵlistener("ngModelChange", function STFilterComponent_Case_9_For_2_Conditional_1_Template_label_ngModelChange_0_listener() {
      ɵɵrestoreView(_r33);
      const ctx_r34 = ɵɵnextContext(3);
      return ɵɵresetView(ctx_r34.checkboxChange());
    });
    ɵɵtext(1);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const filter_r24 = ɵɵnextContext().$implicit;
    ɵɵtwoWayProperty("ngModel", filter_r24.checked);
    ɵɵadvance();
    ɵɵtextInterpolate1(" ", filter_r24.text, " ");
  }
}
function STFilterComponent_Case_9_For_2_Conditional_2_Template(rf, ctx) {
  if (rf & 1) {
    const _r38 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "label", 18);
    ɵɵlistener("ngModelChange", function STFilterComponent_Case_9_For_2_Conditional_2_Template_label_ngModelChange_0_listener() {
      ɵɵrestoreView(_r38);
      const filter_r24 = ɵɵnextContext().$implicit;
      const ctx_r36 = ɵɵnextContext(2);
      return ɵɵresetView(ctx_r36.radioChange(filter_r24));
    });
    ɵɵtext(1);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const filter_r24 = ɵɵnextContext().$implicit;
    ɵɵproperty("ngModel", filter_r24.checked);
    ɵɵadvance();
    ɵɵtextInterpolate1(" ", filter_r24.text, " ");
  }
}
function STFilterComponent_Case_9_For_2_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "li", 15);
    ɵɵtemplate(1, STFilterComponent_Case_9_For_2_Conditional_1_Template, 2, 2, "label", 16)(2, STFilterComponent_Case_9_For_2_Conditional_2_Template, 2, 2);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const ctx_r23 = ɵɵnextContext(2);
    ɵɵadvance();
    ɵɵconditional(1, ctx_r23.f.multiple ? 1 : 2);
  }
}
function STFilterComponent_Case_9_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "ul", 14);
    ɵɵrepeaterCreate(1, STFilterComponent_Case_9_For_2_Template, 3, 1, "li", 15, ɵɵrepeaterTrackByIndex);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const ctx_r5 = ɵɵnextContext();
    ɵɵadvance();
    ɵɵrepeater(ctx_r5.f.menus);
  }
}
function STFilterComponent_Conditional_10_Template(rf, ctx) {
  if (rf & 1) {
    const _r41 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "div", 19)(1, "a", 20);
    ɵɵlistener("click", function STFilterComponent_Conditional_10_Template_a_click_1_listener() {
      ɵɵrestoreView(_r41);
      const ctx_r40 = ɵɵnextContext();
      return ɵɵresetView(ctx_r40.confirm());
    });
    ɵɵelementStart(2, "span");
    ɵɵtext(3);
    ɵɵelementEnd()();
    ɵɵelementStart(4, "a", 21);
    ɵɵlistener("click", function STFilterComponent_Conditional_10_Template_a_click_4_listener() {
      ɵɵrestoreView(_r41);
      const ctx_r42 = ɵɵnextContext();
      return ɵɵresetView(ctx_r42.reset());
    });
    ɵɵelementStart(5, "span");
    ɵɵtext(6);
    ɵɵelementEnd()()();
  }
  if (rf & 2) {
    const ctx_r6 = ɵɵnextContext();
    ɵɵadvance(3);
    ɵɵtextInterpolate(ctx_r6.f.confirmText || ctx_r6.locale.filterConfirm);
    ɵɵadvance(3);
    ɵɵtextInterpolate(ctx_r6.f.clearText || ctx_r6.locale.filterReset);
  }
}
var _c1 = ["table"];
var _c2 = ["contextmenuTpl"];
function STComponent_ng_template_0_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelement(0, "small", 14);
  }
  if (rf & 2) {
    const i_r16 = ɵɵnextContext().$implicit;
    ɵɵproperty("innerHTML", i_r16.optional, ɵɵsanitizeHtml);
  }
}
function STComponent_ng_template_0_Conditional_2_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelement(0, "i", 15);
  }
  if (rf & 2) {
    const i_r16 = ɵɵnextContext().$implicit;
    ɵɵproperty("nzTooltipTitle", i_r16.optionalHelp);
  }
}
function STComponent_ng_template_0_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelement(0, "span", 11);
    ɵɵtemplate(1, STComponent_ng_template_0_Conditional_1_Template, 1, 1, "small", 12)(2, STComponent_ng_template_0_Conditional_2_Template, 1, 1, "i", 13);
  }
  if (rf & 2) {
    const i_r16 = ctx.$implicit;
    ɵɵproperty("innerHTML", i_r16._text, ɵɵsanitizeHtml);
    ɵɵadvance();
    ɵɵconditional(1, i_r16.optional ? 1 : -1);
    ɵɵadvance();
    ɵɵconditional(2, i_r16.optionalHelp ? 2 : -1);
  }
}
function STComponent_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    const _r23 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "label", 16);
    ɵɵtwoWayListener("ngModelChange", function STComponent_ng_template_2_Template_label_ngModelChange_0_listener($event) {
      ɵɵrestoreView(_r23);
      const ctx_r22 = ɵɵnextContext();
      ɵɵtwoWayBindingSet(ctx_r22._allChecked, $event) || (ctx_r22._allChecked = $event);
      return ɵɵresetView($event);
    });
    ɵɵlistener("ngModelChange", function STComponent_ng_template_2_Template_label_ngModelChange_0_listener() {
      ɵɵrestoreView(_r23);
      const ctx_r24 = ɵɵnextContext();
      return ɵɵresetView(ctx_r24.checkAll());
    });
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const custom_r21 = ctx.$implicit;
    const ctx_r2 = ɵɵnextContext();
    ɵɵclassProp("ant-table-selection-select-all-custom", custom_r21);
    ɵɵproperty("nzDisabled", ctx_r2._allCheckedDisabled);
    ɵɵtwoWayProperty("ngModel", ctx_r2._allChecked);
    ɵɵproperty("nzIndeterminate", ctx_r2._indeterminate);
  }
}
function STComponent_Conditional_6_For_2_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelement(0, "th", 17);
  }
  if (rf & 2) {
    const ctx_r31 = ɵɵnextContext(3);
    ɵɵproperty("rowSpan", ctx_r31._headers.length);
  }
}
function STComponent_Conditional_6_For_2_For_3_th_0_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "nz-resize-handle", 20);
    ɵɵelement(1, "i");
    ɵɵelementEnd();
  }
}
function STComponent_Conditional_6_For_2_For_3_th_0_Conditional_2_ng_template_0_Template(rf, ctx) {
}
var _c3 = (a0, a1) => ({
  $implicit: a0,
  index: a1
});
function STComponent_Conditional_6_For_2_For_3_th_0_Conditional_2_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, STComponent_Conditional_6_For_2_For_3_th_0_Conditional_2_ng_template_0_Template, 0, 0, "ng-template", 5);
  }
  if (rf & 2) {
    const _c_r39 = ɵɵnextContext().let;
    const ctx_r46 = ɵɵnextContext();
    const h_r33 = ctx_r46.$implicit;
    const index_r34 = ctx_r46.$index;
    ɵɵproperty("ngTemplateOutlet", _c_r39.__renderTitle)("ngTemplateOutletContext", ɵɵpureFunction2(2, _c3, h_r33.column, index_r34));
  }
}
function STComponent_Conditional_6_For_2_For_3_th_0_Conditional_3_Case_0_Conditional_0_ng_template_0_Template(rf, ctx) {
}
var _c4 = () => ({
  $implicit: false
});
function STComponent_Conditional_6_For_2_For_3_th_0_Conditional_3_Case_0_Conditional_0_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, STComponent_Conditional_6_For_2_For_3_th_0_Conditional_3_Case_0_Conditional_0_ng_template_0_Template, 0, 0, "ng-template", 5);
  }
  if (rf & 2) {
    ɵɵnextContext(7);
    const _r3 = ɵɵreference(3);
    ɵɵproperty("ngTemplateOutlet", _r3)("ngTemplateOutletContext", ɵɵpureFunction0(2, _c4));
  }
}
function STComponent_Conditional_6_For_2_For_3_th_0_Conditional_3_Case_0_Conditional_1_ng_template_1_Template(rf, ctx) {
}
function STComponent_Conditional_6_For_2_For_3_th_0_Conditional_3_Case_0_Conditional_1_Conditional_2_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "div", 26)(1, "div", 27);
    ɵɵelement(2, "i", 28);
    ɵɵelementEnd()();
  }
  if (rf & 2) {
    ɵɵnextContext();
    const _r54 = ɵɵreference(4);
    ɵɵadvance();
    ɵɵproperty("nzDropdownMenu", _r54);
  }
}
function STComponent_Conditional_6_For_2_For_3_th_0_Conditional_3_Case_0_Conditional_1_For_7_Template(rf, ctx) {
  if (rf & 1) {
    const _r62 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "li", 29);
    ɵɵlistener("click", function STComponent_Conditional_6_For_2_For_3_th_0_Conditional_3_Case_0_Conditional_1_For_7_Template_li_click_0_listener() {
      const restoredCtx = ɵɵrestoreView(_r62);
      const rw_r56 = restoredCtx.$implicit;
      const ctx_r61 = ɵɵnextContext(8);
      return ɵɵresetView(ctx_r61._rowSelection(rw_r56));
    });
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const rw_r56 = ctx.$implicit;
    ɵɵproperty("innerHTML", rw_r56.text, ɵɵsanitizeHtml);
  }
}
var _c5 = () => ({
  $implicit: true
});
function STComponent_Conditional_6_For_2_For_3_th_0_Conditional_3_Case_0_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "div", 22);
    ɵɵtemplate(1, STComponent_Conditional_6_For_2_For_3_th_0_Conditional_3_Case_0_Conditional_1_ng_template_1_Template, 0, 0, "ng-template", 5)(2, STComponent_Conditional_6_For_2_For_3_th_0_Conditional_3_Case_0_Conditional_1_Conditional_2_Template, 3, 1, "div", 23);
    ɵɵelementStart(3, "nz-dropdown-menu", null, 24)(5, "ul", 25);
    ɵɵrepeaterCreate(6, STComponent_Conditional_6_For_2_For_3_th_0_Conditional_3_Case_0_Conditional_1_For_7_Template, 1, 1, "li", 30, ɵɵrepeaterTrackByIndex);
    ɵɵelementEnd()()();
  }
  if (rf & 2) {
    const _c_r39 = ɵɵnextContext(3).let;
    ɵɵnextContext(4);
    const _r3 = ɵɵreference(3);
    ɵɵadvance();
    ɵɵproperty("ngTemplateOutlet", _r3)("ngTemplateOutletContext", ɵɵpureFunction0(3, _c5));
    ɵɵadvance();
    ɵɵconditional(2, _c_r39.selections.length ? 2 : -1);
    ɵɵadvance(4);
    ɵɵrepeater(_c_r39.selections);
  }
}
function STComponent_Conditional_6_For_2_For_3_th_0_Conditional_3_Case_0_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, STComponent_Conditional_6_For_2_For_3_th_0_Conditional_3_Case_0_Conditional_0_Template, 1, 3, null, 5)(1, STComponent_Conditional_6_For_2_For_3_th_0_Conditional_3_Case_0_Conditional_1_Template, 8, 4);
  }
  if (rf & 2) {
    const _c_r39 = ɵɵnextContext(2).let;
    ɵɵconditional(0, _c_r39.selections.length === 0 ? 0 : 1);
  }
}
function STComponent_Conditional_6_For_2_For_3_th_0_Conditional_3_Case_1_ng_template_0_Template(rf, ctx) {
}
var _c6 = (a0) => ({
  $implicit: a0
});
function STComponent_Conditional_6_For_2_For_3_th_0_Conditional_3_Case_1_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, STComponent_Conditional_6_For_2_For_3_th_0_Conditional_3_Case_1_ng_template_0_Template, 0, 0, "ng-template", 5);
  }
  if (rf & 2) {
    const _c_r39 = ɵɵnextContext(2).let;
    ɵɵnextContext(4);
    const _r1 = ɵɵreference(1);
    ɵɵproperty("ngTemplateOutlet", _r1)("ngTemplateOutletContext", ɵɵpureFunction1(2, _c6, _c_r39.title));
  }
}
function STComponent_Conditional_6_For_2_For_3_th_0_Conditional_3_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, STComponent_Conditional_6_For_2_For_3_th_0_Conditional_3_Case_0_Template, 2, 1)(1, STComponent_Conditional_6_For_2_For_3_th_0_Conditional_3_Case_1_Template, 1, 4);
  }
  if (rf & 2) {
    const _c_r39 = ɵɵnextContext().let;
    let STComponent_Conditional_6_For_2_For_3_th_0_Conditional_3_contFlowTmp;
    ɵɵconditional(0, (STComponent_Conditional_6_For_2_For_3_th_0_Conditional_3_contFlowTmp = _c_r39.type) === "checkbox" ? 0 : 1);
  }
}
function STComponent_Conditional_6_For_2_For_3_th_0_Conditional_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r69 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "st-filter", 31);
    ɵɵlistener("n", function STComponent_Conditional_6_For_2_For_3_th_0_Conditional_4_Template_st_filter_n_0_listener($event) {
      ɵɵrestoreView(_r69);
      const ctx_r68 = ɵɵnextContext(5);
      return ɵɵresetView(ctx_r68.handleFilterNotify($event));
    })("handle", function STComponent_Conditional_6_For_2_For_3_th_0_Conditional_4_Template_st_filter_handle_0_listener($event) {
      ɵɵrestoreView(_r69);
      const _c_r39 = ɵɵnextContext().let;
      const ctx_r70 = ɵɵnextContext(4);
      return ɵɵresetView(ctx_r70._handleFilter(_c_r39, $event));
    });
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const _c_r39 = ɵɵnextContext().let;
    const h_r33 = ɵɵnextContext().$implicit;
    const ctx_r43 = ɵɵnextContext(3);
    ɵɵproperty("col", h_r33.column)("f", _c_r39.filter)("locale", ctx_r43.locale);
  }
}
function STComponent_Conditional_6_For_2_For_3_th_0_Template(rf, ctx) {
  if (rf & 1) {
    const _r75 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "th", 19);
    ɵɵlistener("nzSortOrderChange", function STComponent_Conditional_6_For_2_For_3_th_0_Template_th_nzSortOrderChange_0_listener($event) {
      const restoredCtx = ɵɵrestoreView(_r75);
      const _c_r39 = restoredCtx.let;
      const index_r34 = ɵɵnextContext().$index;
      const ctx_r74 = ɵɵnextContext(3);
      return ɵɵresetView(ctx_r74.sort(_c_r39, index_r34, $event));
    })("nzResizeEnd", function STComponent_Conditional_6_For_2_For_3_th_0_Template_th_nzResizeEnd_0_listener($event) {
      const restoredCtx = ɵɵrestoreView(_r75);
      const _c_r39 = restoredCtx.let;
      const ctx_r77 = ɵɵnextContext(4);
      return ɵɵresetView(ctx_r77.colResize($event, _c_r39));
    });
    ɵɵtemplate(1, STComponent_Conditional_6_For_2_For_3_th_0_Conditional_1_Template, 2, 0, "nz-resize-handle", 20)(2, STComponent_Conditional_6_For_2_For_3_th_0_Conditional_2_Template, 1, 5, null, 5)(3, STComponent_Conditional_6_For_2_For_3_th_0_Conditional_3_Template, 2, 1)(4, STComponent_Conditional_6_For_2_For_3_th_0_Conditional_4_Template, 1, 3, "st-filter", 21);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const _c_r39 = ctx.let;
    const ctx_r78 = ɵɵnextContext();
    const h_r33 = ctx_r78.$implicit;
    const ɵ$index_3_r35 = ctx_r78.$index;
    const ɵ$count_3_r37 = ctx_r78.$count;
    const index_r34 = ctx_r78.$index;
    ɵɵclassProp("st__has-filter", _c_r39.filter);
    ɵɵproperty("colSpan", h_r33.colSpan)("rowSpan", h_r33.rowSpan)("nzWidth", _c_r39.width)("nzLeft", _c_r39._left)("nzRight", _c_r39._right)("ngClass", _c_r39._className)("nzShowSort", _c_r39._sort.enabled)("nzSortOrder", _c_r39._sort.default)("nzCustomFilter", !!_c_r39.filter)("nzDisabled", ɵ$index_3_r35 === ɵ$count_3_r37 - 1 || _c_r39.resizable.disabled)("nzMaxWidth", _c_r39.resizable.maxWidth)("nzMinWidth", _c_r39.resizable.minWidth)("nzBounds", _c_r39.resizable.bounds)("nzPreview", _c_r39.resizable.preview);
    ɵɵattribute("data-col", _c_r39.indexKey)("data-col-index", index_r34);
    ɵɵadvance();
    ɵɵconditional(1, !(ɵ$index_3_r35 === ɵ$count_3_r37 - 1) && !_c_r39.resizable.disabled ? 1 : -1);
    ɵɵadvance();
    ɵɵconditional(2, _c_r39.__renderTitle ? 2 : 3);
    ɵɵadvance(2);
    ɵɵconditional(4, _c_r39.filter ? 4 : -1);
  }
}
function STComponent_Conditional_6_For_2_For_3_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, STComponent_Conditional_6_For_2_For_3_th_0_Template, 5, 21, "th", 18);
  }
  if (rf & 2) {
    const h_r33 = ctx.$implicit;
    ɵɵproperty("let", h_r33.column);
  }
}
function STComponent_Conditional_6_For_2_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "tr");
    ɵɵtemplate(1, STComponent_Conditional_6_For_2_Conditional_1_Template, 1, 1, "th", 17);
    ɵɵrepeaterCreate(2, STComponent_Conditional_6_For_2_For_3_Template, 1, 1, "th", 32, ɵɵrepeaterTrackByIndex);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const row_r26 = ctx.$implicit;
    const $index_r27 = ctx.$index;
    const ctx_r25 = ɵɵnextContext(2);
    ɵɵadvance();
    ɵɵconditional(1, $index_r27 === 0 && ctx_r25.expand ? 1 : -1);
    ɵɵadvance();
    ɵɵrepeater(row_r26);
  }
}
function STComponent_Conditional_6_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "thead");
    ɵɵrepeaterCreate(1, STComponent_Conditional_6_For_2_Template, 4, 1, "tr", null, ɵɵrepeaterTrackByIdentity);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const ctx_r5 = ɵɵnextContext();
    ɵɵadvance();
    ɵɵrepeater(ctx_r5._headers);
  }
}
function STComponent_Conditional_8_ng_template_0_Template(rf, ctx) {
}
function STComponent_Conditional_8_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, STComponent_Conditional_8_ng_template_0_Template, 0, 0, "ng-template", 5);
  }
  if (rf & 2) {
    const ctx_r6 = ɵɵnextContext();
    ɵɵproperty("ngTemplateOutlet", ctx_r6.bodyHeader)("ngTemplateOutletContext", ɵɵpureFunction1(2, _c6, ctx_r6._statistical));
  }
}
function STComponent_ng_template_9_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r87 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "td", 36);
    ɵɵlistener("nzExpandChange", function STComponent_ng_template_9_Conditional_1_Template_td_nzExpandChange_0_listener($event) {
      ɵɵrestoreView(_r87);
      const i_r80 = ɵɵnextContext().$implicit;
      const ctx_r85 = ɵɵnextContext();
      return ɵɵresetView(ctx_r85._expandChange(i_r80, $event));
    })("click", function STComponent_ng_template_9_Conditional_1_Template_td_click_0_listener($event) {
      ɵɵrestoreView(_r87);
      const ctx_r88 = ɵɵnextContext(2);
      return ɵɵresetView(ctx_r88._stopPropagation($event));
    });
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const i_r80 = ɵɵnextContext().$implicit;
    const ctx_r82 = ɵɵnextContext();
    ɵɵproperty("nzShowExpand", ctx_r82.expand && i_r80.showExpand !== false)("nzExpand", i_r80.expand);
  }
}
function STComponent_ng_template_9_For_3_Conditional_0_Conditional_1_ng_template_1_Template(rf, ctx) {
}
function STComponent_ng_template_9_For_3_Conditional_0_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "span", 40);
    ɵɵtemplate(1, STComponent_ng_template_9_For_3_Conditional_0_Conditional_1_ng_template_1_Template, 0, 0, "ng-template", 5);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const c_r90 = ɵɵnextContext(2).$implicit;
    ɵɵnextContext(2);
    const _r1 = ɵɵreference(1);
    ɵɵadvance();
    ɵɵproperty("ngTemplateOutlet", _r1)("ngTemplateOutletContext", ɵɵpureFunction1(2, _c6, c_r90.title));
  }
}
function STComponent_ng_template_9_For_3_Conditional_0_Template(rf, ctx) {
  if (rf & 1) {
    const _r100 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "td", 37);
    ɵɵtemplate(1, STComponent_ng_template_9_For_3_Conditional_0_Conditional_1_Template, 2, 4, "span", 38);
    ɵɵelementStart(2, "st-td", 39);
    ɵɵlistener("n", function STComponent_ng_template_9_For_3_Conditional_0_Template_st_td_n_2_listener($event) {
      ɵɵrestoreView(_r100);
      const ctx_r99 = ɵɵnextContext(3);
      return ɵɵresetView(ctx_r99._handleTd($event));
    });
    ɵɵelementEnd()();
  }
  if (rf & 2) {
    const ctx_r101 = ɵɵnextContext();
    const c_r90 = ctx_r101.$implicit;
    const cIdx_r91 = ctx_r101.$index;
    const ctx_r102 = ɵɵnextContext();
    const i_r80 = ctx_r102.$implicit;
    const index_r81 = ctx_r102.index;
    const ctx_r95 = ɵɵnextContext();
    ɵɵproperty("nzLeft", !!c_r90._left)("nzRight", !!c_r90._right)("ngClass", c_r90._className);
    ɵɵattribute("data-col-index", cIdx_r91)("colspan", (i_r80._values[cIdx_r91].props == null ? null : i_r80._values[cIdx_r91].props.colSpan) === 1 ? null : i_r80._values[cIdx_r91].props == null ? null : i_r80._values[cIdx_r91].props.colSpan)("rowspan", (i_r80._values[cIdx_r91].props == null ? null : i_r80._values[cIdx_r91].props.rowSpan) === 1 ? null : i_r80._values[cIdx_r91].props == null ? null : i_r80._values[cIdx_r91].props.rowSpan);
    ɵɵadvance();
    ɵɵconditional(1, ctx_r95.responsive ? 1 : -1);
    ɵɵadvance();
    ɵɵproperty("data", ctx_r95._data)("i", i_r80)("index", index_r81)("c", c_r90)("cIdx", cIdx_r91);
  }
}
function STComponent_ng_template_9_For_3_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, STComponent_ng_template_9_For_3_Conditional_0_Template, 3, 12, "td", 37);
  }
  if (rf & 2) {
    const cIdx_r91 = ctx.$index;
    const i_r80 = ɵɵnextContext().$implicit;
    ɵɵconditional(0, (i_r80._values[cIdx_r91].props == null ? null : i_r80._values[cIdx_r91].props.colSpan) > 0 && (i_r80._values[cIdx_r91].props == null ? null : i_r80._values[cIdx_r91].props.rowSpan) > 0 ? 0 : -1);
  }
}
function STComponent_ng_template_9_ng_template_5_Template(rf, ctx) {
}
function STComponent_ng_template_9_Template(rf, ctx) {
  if (rf & 1) {
    const _r105 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "tr", 33);
    ɵɵlistener("click", function STComponent_ng_template_9_Template_tr_click_0_listener($event) {
      const restoredCtx = ɵɵrestoreView(_r105);
      const i_r80 = restoredCtx.$implicit;
      const index_r81 = restoredCtx.index;
      const ctx_r104 = ɵɵnextContext();
      return ɵɵresetView(ctx_r104._rowClick($event, i_r80, index_r81, false));
    })("dblclick", function STComponent_ng_template_9_Template_tr_dblclick_0_listener($event) {
      const restoredCtx = ɵɵrestoreView(_r105);
      const i_r80 = restoredCtx.$implicit;
      const index_r81 = restoredCtx.index;
      const ctx_r106 = ɵɵnextContext();
      return ɵɵresetView(ctx_r106._rowClick($event, i_r80, index_r81, true));
    });
    ɵɵtemplate(1, STComponent_ng_template_9_Conditional_1_Template, 1, 2, "td", 34);
    ɵɵrepeaterCreate(2, STComponent_ng_template_9_For_3_Template, 1, 1, null, null, ɵɵrepeaterTrackByIndex);
    ɵɵelementEnd();
    ɵɵelementStart(4, "tr", 35);
    ɵɵtemplate(5, STComponent_ng_template_9_ng_template_5_Template, 0, 0, "ng-template", 5);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const i_r80 = ctx.$implicit;
    const index_r81 = ctx.index;
    const ctx_r7 = ɵɵnextContext();
    ɵɵproperty("ngClass", i_r80._rowClassName);
    ɵɵattribute("data-index", index_r81);
    ɵɵadvance();
    ɵɵconditional(1, ctx_r7.expand ? 1 : -1);
    ɵɵadvance();
    ɵɵrepeater(ctx_r7._columns);
    ɵɵadvance(2);
    ɵɵproperty("nzExpand", i_r80.expand);
    ɵɵadvance();
    ɵɵproperty("ngTemplateOutlet", ctx_r7.expand)("ngTemplateOutletContext", ɵɵpureFunction2(6, _c3, i_r80, index_r81));
  }
}
function STComponent_Conditional_11_ng_template_0_ng_template_0_Template(rf, ctx) {
}
function STComponent_Conditional_11_ng_template_0_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, STComponent_Conditional_11_ng_template_0_ng_template_0_Template, 0, 0, "ng-template", 5);
  }
  if (rf & 2) {
    const i_r108 = ctx.$implicit;
    const index_r109 = ctx.index;
    ɵɵnextContext(2);
    const _r8 = ɵɵreference(10);
    ɵɵproperty("ngTemplateOutlet", _r8)("ngTemplateOutletContext", ɵɵpureFunction2(2, _c3, i_r108, index_r109));
  }
}
function STComponent_Conditional_11_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, STComponent_Conditional_11_ng_template_0_Template, 1, 5, "ng-template", 7);
  }
}
function STComponent_Conditional_12_For_1_ng_template_0_Template(rf, ctx) {
}
function STComponent_Conditional_12_For_1_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, STComponent_Conditional_12_For_1_ng_template_0_Template, 0, 0, "ng-template", 5);
  }
  if (rf & 2) {
    const i_r112 = ctx.$implicit;
    const $index_r113 = ctx.$index;
    ɵɵnextContext(2);
    const _r8 = ɵɵreference(10);
    ɵɵproperty("ngTemplateOutlet", _r8)("ngTemplateOutletContext", ɵɵpureFunction2(2, _c3, i_r112, $index_r113));
  }
}
function STComponent_Conditional_12_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵrepeaterCreate(0, STComponent_Conditional_12_For_1_Template, 1, 5, null, 5, ɵɵcomponentInstance().trackBy);
  }
  if (rf & 2) {
    const ctx_r10 = ɵɵnextContext();
    ɵɵrepeater(ctx_r10._data);
  }
}
function STComponent_Conditional_13_ng_template_0_Template(rf, ctx) {
}
function STComponent_Conditional_13_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, STComponent_Conditional_13_ng_template_0_Template, 0, 0, "ng-template", 5);
  }
  if (rf & 2) {
    const ctx_r11 = ɵɵnextContext();
    ɵɵproperty("ngTemplateOutlet", ctx_r11.body)("ngTemplateOutletContext", ɵɵpureFunction1(2, _c6, ctx_r11._statistical));
  }
}
function STComponent_ng_template_14_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtext(0);
  }
  if (rf & 2) {
    const range_r119 = ctx.range;
    const total_r120 = ctx.$implicit;
    const ctx_r12 = ɵɵnextContext();
    ɵɵtextInterpolate(ctx_r12.renderTotal(total_r120, range_r119));
  }
}
function STComponent_For_20_Conditional_0_Template(rf, ctx) {
  if (rf & 1) {
    const _r130 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "li", 29);
    ɵɵlistener("click", function STComponent_For_20_Conditional_0_Template_li_click_0_listener() {
      ɵɵrestoreView(_r130);
      const i_r121 = ɵɵnextContext().$implicit;
      return ɵɵresetView(i_r121.fn(i_r121));
    });
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const i_r121 = ɵɵnextContext().$implicit;
    ɵɵproperty("innerHTML", i_r121.text, ɵɵsanitizeHtml);
  }
}
function STComponent_For_20_Conditional_1_For_3_Template(rf, ctx) {
  if (rf & 1) {
    const _r139 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "li", 29);
    ɵɵlistener("click", function STComponent_For_20_Conditional_1_For_3_Template_li_click_0_listener() {
      const restoredCtx = ɵɵrestoreView(_r139);
      const ci_r133 = restoredCtx.$implicit;
      return ɵɵresetView(ci_r133.fn(ci_r133));
    });
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const ci_r133 = ctx.$implicit;
    ɵɵproperty("innerHTML", ci_r133.text, ɵɵsanitizeHtml);
  }
}
function STComponent_For_20_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "li", 41)(1, "ul");
    ɵɵrepeaterCreate(2, STComponent_For_20_Conditional_1_For_3_Template, 1, 1, "li", 30, ɵɵrepeaterTrackByIndex);
    ɵɵelementEnd()();
  }
  if (rf & 2) {
    const i_r121 = ɵɵnextContext().$implicit;
    ɵɵproperty("nzTitle", i_r121.text);
    ɵɵadvance(2);
    ɵɵrepeater(i_r121.children);
  }
}
function STComponent_For_20_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, STComponent_For_20_Conditional_0_Template, 1, 1, "li", 30)(1, STComponent_For_20_Conditional_1_Template, 4, 1);
  }
  if (rf & 2) {
    const i_r121 = ctx.$implicit;
    ɵɵconditional(0, i_r121.children.length === 0 ? 0 : 1);
  }
}
function STTdComponent_ng_template_0_Conditional_0_ng_template_1_Template(rf, ctx) {
}
function STTdComponent_ng_template_0_Conditional_0_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "span", 5);
    ɵɵtemplate(1, STTdComponent_ng_template_0_Conditional_0_ng_template_1_Template, 0, 0, "ng-template", 3);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const ctx_r13 = ɵɵnextContext();
    const child_r9 = ctx_r13.child;
    const i_r8 = ctx_r13.$implicit;
    ɵɵnextContext();
    const _r3 = ɵɵreference(3);
    ɵɵclassProp("d-block", child_r9)("width-100", child_r9);
    ɵɵproperty("nzTooltipTitle", i_r8.tooltip);
    ɵɵadvance();
    ɵɵproperty("ngTemplateOutlet", _r3)("ngTemplateOutletContext", ɵɵpureFunction1(7, _c6, i_r8));
  }
}
function STTdComponent_ng_template_0_Conditional_1_ng_template_0_Template(rf, ctx) {
}
function STTdComponent_ng_template_0_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, STTdComponent_ng_template_0_Conditional_1_ng_template_0_Template, 0, 0, "ng-template", 3);
  }
  if (rf & 2) {
    const i_r8 = ɵɵnextContext().$implicit;
    ɵɵnextContext();
    const _r3 = ɵɵreference(3);
    ɵɵproperty("ngTemplateOutlet", _r3)("ngTemplateOutletContext", ɵɵpureFunction1(2, _c6, i_r8));
  }
}
function STTdComponent_ng_template_0_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, STTdComponent_ng_template_0_Conditional_0_Template, 2, 9, "span", 4)(1, STTdComponent_ng_template_0_Conditional_1_Template, 1, 4);
  }
  if (rf & 2) {
    const i_r8 = ctx.$implicit;
    ɵɵconditional(0, i_r8.tooltip ? 0 : 1);
  }
}
function STTdComponent_ng_template_2_Conditional_0_ng_template_1_Template(rf, ctx) {
}
function STTdComponent_ng_template_2_Conditional_0_Template(rf, ctx) {
  if (rf & 1) {
    const _r22 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "a", 7);
    ɵɵlistener("nzOnConfirm", function STTdComponent_ng_template_2_Conditional_0_Template_a_nzOnConfirm_0_listener() {
      ɵɵrestoreView(_r22);
      const i_r16 = ɵɵnextContext().$implicit;
      const ctx_r20 = ɵɵnextContext();
      return ɵɵresetView(ctx_r20._btn(i_r16));
    })("click", function STTdComponent_ng_template_2_Conditional_0_Template_a_click_0_listener($event) {
      ɵɵrestoreView(_r22);
      const ctx_r23 = ɵɵnextContext(2);
      return ɵɵresetView(ctx_r23._stopPropagation($event));
    });
    ɵɵtemplate(1, STTdComponent_ng_template_2_Conditional_0_ng_template_1_Template, 0, 0, "ng-template", 3);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const i_r16 = ɵɵnextContext().$implicit;
    ɵɵnextContext();
    const _r5 = ɵɵreference(5);
    ɵɵproperty("nzPopconfirmTitle", i_r16.pop.title)("nzIcon", i_r16.pop.icon)("nzCondition", i_r16.pop.condition(i_r16))("nzCancelText", i_r16.pop.cancelText)("nzOkText", i_r16.pop.okText)("nzOkType", i_r16.pop.okType)("ngClass", i_r16._className);
    ɵɵadvance();
    ɵɵproperty("ngTemplateOutlet", _r5)("ngTemplateOutletContext", ɵɵpureFunction1(9, _c6, i_r16));
  }
}
function STTdComponent_ng_template_2_Conditional_1_ng_template_1_Template(rf, ctx) {
}
function STTdComponent_ng_template_2_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r28 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "a", 8);
    ɵɵlistener("click", function STTdComponent_ng_template_2_Conditional_1_Template_a_click_0_listener($event) {
      ɵɵrestoreView(_r28);
      const i_r16 = ɵɵnextContext().$implicit;
      const ctx_r26 = ɵɵnextContext();
      return ɵɵresetView(ctx_r26._btn(i_r16, $event));
    });
    ɵɵtemplate(1, STTdComponent_ng_template_2_Conditional_1_ng_template_1_Template, 0, 0, "ng-template", 3);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const i_r16 = ɵɵnextContext().$implicit;
    ɵɵnextContext();
    const _r5 = ɵɵreference(5);
    ɵɵproperty("ngClass", i_r16._className);
    ɵɵadvance();
    ɵɵproperty("ngTemplateOutlet", _r5)("ngTemplateOutletContext", ɵɵpureFunction1(3, _c6, i_r16));
  }
}
function STTdComponent_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, STTdComponent_ng_template_2_Conditional_0_Template, 2, 11, "a", 6)(1, STTdComponent_ng_template_2_Conditional_1_Template, 2, 5);
  }
  if (rf & 2) {
    const i_r16 = ctx.$implicit;
    ɵɵconditional(0, i_r16.pop ? 0 : 1);
  }
}
function STTdComponent_ng_template_4_Conditional_0_Conditional_0_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelement(0, "i", 10);
  }
  if (rf & 2) {
    const i_r30 = ɵɵnextContext(2).$implicit;
    ɵɵproperty("nzIconfont", i_r30._icon.iconfont);
  }
}
function STTdComponent_ng_template_4_Conditional_0_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelement(0, "i", 11);
  }
  if (rf & 2) {
    const i_r30 = ɵɵnextContext(2).$implicit;
    ɵɵproperty("nzType", i_r30._icon.type)("nzTheme", i_r30._icon.theme)("nzSpin", i_r30._icon.spin)("nzTwotoneColor", i_r30._icon.twoToneColor);
  }
}
function STTdComponent_ng_template_4_Conditional_0_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, STTdComponent_ng_template_4_Conditional_0_Conditional_0_Template, 1, 1, "i", 10)(1, STTdComponent_ng_template_4_Conditional_0_Conditional_1_Template, 1, 4);
  }
  if (rf & 2) {
    const i_r30 = ɵɵnextContext().$implicit;
    ɵɵconditional(0, i_r30._icon.iconfont ? 0 : 1);
  }
}
var _c7 = (a0) => ({
  "pl-xs": a0
});
function STTdComponent_ng_template_4_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, STTdComponent_ng_template_4_Conditional_0_Template, 2, 1);
    ɵɵelement(1, "span", 9);
  }
  if (rf & 2) {
    const i_r30 = ctx.$implicit;
    ɵɵconditional(0, i_r30._icon ? 0 : -1);
    ɵɵadvance();
    ɵɵproperty("innerHTML", i_r30._text, ɵɵsanitizeHtml)("ngClass", ɵɵpureFunction1(3, _c7, i_r30._icon));
  }
}
function STTdComponent_Conditional_6_ng_template_0_Template(rf, ctx) {
}
var _c8 = (a0, a1, a2) => ({
  $implicit: a0,
  index: a1,
  column: a2
});
function STTdComponent_Conditional_6_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, STTdComponent_Conditional_6_ng_template_0_Template, 0, 0, "ng-template", 3);
  }
  if (rf & 2) {
    const ctx_r6 = ɵɵnextContext();
    ɵɵproperty("ngTemplateOutlet", ctx_r6.c.__render)("ngTemplateOutletContext", ɵɵpureFunction3(2, _c8, ctx_r6.i, ctx_r6.index, ctx_r6.c));
  }
}
function STTdComponent_Conditional_7_Case_0_Template(rf, ctx) {
  if (rf & 1) {
    const _r48 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "label", 12);
    ɵɵlistener("ngModelChange", function STTdComponent_Conditional_7_Case_0_Template_label_ngModelChange_0_listener($event) {
      ɵɵrestoreView(_r48);
      const ctx_r47 = ɵɵnextContext(2);
      return ɵɵresetView(ctx_r47._checkbox($event));
    });
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const ctx_r38 = ɵɵnextContext(2);
    ɵɵproperty("nzDisabled", ctx_r38.i.disabled)("ngModel", ctx_r38.i.checked);
  }
}
function STTdComponent_Conditional_7_Case_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r50 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "label", 13);
    ɵɵlistener("ngModelChange", function STTdComponent_Conditional_7_Case_1_Template_label_ngModelChange_0_listener() {
      ɵɵrestoreView(_r50);
      const ctx_r49 = ɵɵnextContext(2);
      return ɵɵresetView(ctx_r49._radio());
    });
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const ctx_r39 = ɵɵnextContext(2);
    ɵɵproperty("nzDisabled", ctx_r39.i.disabled)("ngModel", ctx_r39.i.checked);
  }
}
function STTdComponent_Conditional_7_Case_2_Template(rf, ctx) {
  if (rf & 1) {
    const _r52 = ɵɵgetCurrentView();
    ɵɵelementStart(0, "a", 14);
    ɵɵlistener("click", function STTdComponent_Conditional_7_Case_2_Template_a_click_0_listener($event) {
      ɵɵrestoreView(_r52);
      const ctx_r51 = ɵɵnextContext(2);
      return ɵɵresetView(ctx_r51._link($event));
    });
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const ctx_r40 = ɵɵnextContext(2);
    ɵɵproperty("innerHTML", ctx_r40.i._values[ctx_r40.cIdx]._text, ɵɵsanitizeHtml);
    ɵɵattribute("title", ctx_r40.i._values[ctx_r40.cIdx].text);
  }
}
function STTdComponent_Conditional_7_Case_3_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "nz-tag", 15);
    ɵɵelement(1, "span", 16);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const ctx_r41 = ɵɵnextContext(2);
    ɵɵproperty("nzColor", ctx_r41.i._values[ctx_r41.cIdx].color)("nz-tooltip", ctx_r41.i._values[ctx_r41.cIdx].tooltip);
    ɵɵadvance();
    ɵɵproperty("innerHTML", ctx_r41.i._values[ctx_r41.cIdx]._text, ɵɵsanitizeHtml);
  }
}
function STTdComponent_Conditional_7_Case_4_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelement(0, "nz-badge", 17);
  }
  if (rf & 2) {
    const ctx_r42 = ɵɵnextContext(2);
    ɵɵproperty("nzStatus", ctx_r42.i._values[ctx_r42.cIdx].color)("nzText", ctx_r42.i._values[ctx_r42.cIdx].text)("nz-tooltip", ctx_r42.i._values[ctx_r42.cIdx].tooltip);
  }
}
function STTdComponent_Conditional_7_Case_5_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelement(0, "cell", 18);
  }
  if (rf & 2) {
    const ctx_r43 = ɵɵnextContext(2);
    let tmp_1_0;
    ɵɵproperty("value", ctx_r43.i._values[ctx_r43.cIdx].text)("options", (tmp_1_0 = ctx_r43.i._values[ctx_r43.cIdx].cell) !== null && tmp_1_0 !== void 0 ? tmp_1_0 : ctx_r43.c.cell);
  }
}
function STTdComponent_Conditional_7_Case_6_ng_template_0_Template(rf, ctx) {
}
function STTdComponent_Conditional_7_Case_6_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, STTdComponent_Conditional_7_Case_6_ng_template_0_Template, 0, 0, "ng-template", 19);
  }
  if (rf & 2) {
    const ctx_r44 = ɵɵnextContext(2);
    ɵɵproperty("record", ctx_r44.i)("column", ctx_r44.c);
  }
}
function STTdComponent_Conditional_7_Case_7_Conditional_0_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelement(0, "span", 20);
  }
  if (rf & 2) {
    const ctx_r54 = ɵɵnextContext(3);
    ɵɵproperty("innerText", ctx_r54.i._values[ctx_r54.cIdx]._text);
    ɵɵattribute("title", ctx_r54.c._isTruncate ? ctx_r54.i._values[ctx_r54.cIdx].text : null);
  }
}
function STTdComponent_Conditional_7_Case_7_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelement(0, "span", 16);
  }
  if (rf & 2) {
    const ctx_r55 = ɵɵnextContext(3);
    ɵɵproperty("innerHTML", ctx_r55.i._values[ctx_r55.cIdx]._text, ɵɵsanitizeHtml);
    ɵɵattribute("title", ctx_r55.c._isTruncate ? ctx_r55.i._values[ctx_r55.cIdx].text : null);
  }
}
function STTdComponent_Conditional_7_Case_7_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, STTdComponent_Conditional_7_Case_7_Conditional_0_Template, 1, 2, "span", 20)(1, STTdComponent_Conditional_7_Case_7_Conditional_1_Template, 1, 2);
  }
  if (rf & 2) {
    const ctx_r45 = ɵɵnextContext(2);
    ɵɵconditional(0, ctx_r45.c.safeType === "text" ? 0 : 1);
  }
}
function STTdComponent_Conditional_7_For_9_Conditional_0_For_7_Conditional_0_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelement(0, "li", 26);
  }
}
function STTdComponent_Conditional_7_For_9_Conditional_0_For_7_Conditional_1_ng_template_1_Template(rf, ctx) {
}
var _c9 = (a0) => ({
  $implicit: a0,
  child: true
});
function STTdComponent_Conditional_7_For_9_Conditional_0_For_7_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "li", 27);
    ɵɵtemplate(1, STTdComponent_Conditional_7_For_9_Conditional_0_For_7_Conditional_1_ng_template_1_Template, 0, 0, "ng-template", 3);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const subBtn_r66 = ɵɵnextContext().$implicit;
    ɵɵnextContext(4);
    const _r1 = ɵɵreference(1);
    ɵɵclassProp("st__btn-disabled", subBtn_r66._disabled);
    ɵɵadvance();
    ɵɵproperty("ngTemplateOutlet", _r1)("ngTemplateOutletContext", ɵɵpureFunction1(4, _c9, subBtn_r66));
  }
}
function STTdComponent_Conditional_7_For_9_Conditional_0_For_7_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, STTdComponent_Conditional_7_For_9_Conditional_0_For_7_Conditional_0_Template, 1, 0, "li", 26)(1, STTdComponent_Conditional_7_For_9_Conditional_0_For_7_Conditional_1_Template, 2, 6);
  }
  if (rf & 2) {
    const subBtn_r66 = ctx.$implicit;
    ɵɵconditional(0, subBtn_r66.type === "divider" ? 0 : 1);
  }
}
function STTdComponent_Conditional_7_For_9_Conditional_0_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "a", 22);
    ɵɵelement(1, "span", 16)(2, "i", 23);
    ɵɵelementEnd();
    ɵɵelementStart(3, "nz-dropdown-menu", null, 24)(5, "ul", 25);
    ɵɵrepeaterCreate(6, STTdComponent_Conditional_7_For_9_Conditional_0_For_7_Template, 2, 1, null, null, ɵɵrepeaterTrackByIndex);
    ɵɵelementEnd()();
  }
  if (rf & 2) {
    const _r64 = ɵɵreference(4);
    const btn_r56 = ɵɵnextContext().$implicit;
    ɵɵproperty("nzDropdownMenu", _r64);
    ɵɵadvance();
    ɵɵproperty("innerHTML", btn_r56._text, ɵɵsanitizeHtml);
    ɵɵadvance(5);
    ɵɵrepeater(btn_r56.children);
  }
}
function STTdComponent_Conditional_7_For_9_Conditional_1_ng_template_1_Template(rf, ctx) {
}
var _c10 = (a0) => ({
  $implicit: a0,
  child: false
});
function STTdComponent_Conditional_7_For_9_Conditional_1_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelementStart(0, "span");
    ɵɵtemplate(1, STTdComponent_Conditional_7_For_9_Conditional_1_ng_template_1_Template, 0, 0, "ng-template", 3);
    ɵɵelementEnd();
  }
  if (rf & 2) {
    const btn_r56 = ɵɵnextContext().$implicit;
    ɵɵnextContext(2);
    const _r1 = ɵɵreference(1);
    ɵɵclassProp("st__btn-disabled", btn_r56._disabled);
    ɵɵadvance();
    ɵɵproperty("ngTemplateOutlet", _r1)("ngTemplateOutletContext", ɵɵpureFunction1(4, _c10, btn_r56));
  }
}
function STTdComponent_Conditional_7_For_9_Conditional_2_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵelement(0, "nz-divider", 21);
  }
}
function STTdComponent_Conditional_7_For_9_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, STTdComponent_Conditional_7_For_9_Conditional_0_Template, 8, 2)(1, STTdComponent_Conditional_7_For_9_Conditional_1_Template, 2, 6)(2, STTdComponent_Conditional_7_For_9_Conditional_2_Template, 1, 0, "nz-divider", 21);
  }
  if (rf & 2) {
    const btn_r56 = ctx.$implicit;
    const $index_r57 = ctx.$index;
    const $count_r59 = ctx.$count;
    ɵɵconditional(0, btn_r56.children.length > 0 ? 0 : 1);
    ɵɵadvance(2);
    ɵɵconditional(2, !($index_r57 === $count_r59 - 1) ? 2 : -1);
  }
}
function STTdComponent_Conditional_7_Template(rf, ctx) {
  if (rf & 1) {
    ɵɵtemplate(0, STTdComponent_Conditional_7_Case_0_Template, 1, 2)(1, STTdComponent_Conditional_7_Case_1_Template, 1, 2)(2, STTdComponent_Conditional_7_Case_2_Template, 1, 2)(3, STTdComponent_Conditional_7_Case_3_Template, 2, 3)(4, STTdComponent_Conditional_7_Case_4_Template, 1, 3)(5, STTdComponent_Conditional_7_Case_5_Template, 1, 2)(6, STTdComponent_Conditional_7_Case_6_Template, 1, 2)(7, STTdComponent_Conditional_7_Case_7_Template, 2, 1);
    ɵɵrepeaterCreate(8, STTdComponent_Conditional_7_For_9_Template, 3, 2, null, null, ɵɵrepeaterTrackByIndex);
  }
  if (rf & 2) {
    const ctx_r7 = ɵɵnextContext();
    let STTdComponent_Conditional_7_contFlowTmp;
    ɵɵconditional(0, (STTdComponent_Conditional_7_contFlowTmp = ctx_r7.c.type) === "checkbox" ? 0 : STTdComponent_Conditional_7_contFlowTmp === "radio" ? 1 : STTdComponent_Conditional_7_contFlowTmp === "link" ? 2 : STTdComponent_Conditional_7_contFlowTmp === "tag" ? 3 : STTdComponent_Conditional_7_contFlowTmp === "badge" ? 4 : STTdComponent_Conditional_7_contFlowTmp === "cell" ? 5 : STTdComponent_Conditional_7_contFlowTmp === "widget" ? 6 : 7);
    ɵɵadvance(8);
    ɵɵrepeater(ctx_r7.i._values[ctx_r7.cIdx].buttons);
  }
}
var _STRowSource = class _STRowSource {
  constructor() {
    this.titles = {};
    this.rows = {};
  }
  add(type, path, ref) {
    this[type === "title" ? "titles" : "rows"][path] = ref;
  }
  getTitle(path) {
    return this.titles[path];
  }
  getRow(path) {
    return this.rows[path];
  }
};
_STRowSource.ɵfac = function STRowSource_Factory(t) {
  return new (t || _STRowSource)();
};
_STRowSource.ɵprov = ɵɵdefineInjectable({
  token: _STRowSource,
  factory: _STRowSource.ɵfac
});
var STRowSource = _STRowSource;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(STRowSource, [{
    type: Injectable
  }], null, null);
})();
var _STRowDirective = class _STRowDirective {
  constructor() {
    this.source = inject(STRowSource, {
      host: true
    });
    this.ref = inject(TemplateRef);
  }
  ngOnInit() {
    this.source.add(this.type, this.id, this.ref);
  }
};
_STRowDirective.ɵfac = function STRowDirective_Factory(t) {
  return new (t || _STRowDirective)();
};
_STRowDirective.ɵdir = ɵɵdefineDirective({
  type: _STRowDirective,
  selectors: [["", "st-row", ""]],
  inputs: {
    id: [InputFlags.None, "st-row", "id"],
    type: "type"
  }
});
var STRowDirective = _STRowDirective;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(STRowDirective, [{
    type: Directive,
    args: [{
      selector: "[st-row]"
    }]
  }], null, {
    id: [{
      type: Input,
      args: ["st-row"]
    }],
    type: [{
      type: Input
    }]
  });
})();
var _STWidgetRegistry = class _STWidgetRegistry {
  constructor() {
    this._widgets = {};
  }
  get widgets() {
    return this._widgets;
  }
  register(type, widget) {
    this._widgets[type] = widget;
  }
  has(type) {
    return this._widgets.hasOwnProperty(type);
  }
  get(type) {
    return this._widgets[type];
  }
};
_STWidgetRegistry.ɵfac = function STWidgetRegistry_Factory(t) {
  return new (t || _STWidgetRegistry)();
};
_STWidgetRegistry.ɵprov = ɵɵdefineInjectable({
  token: _STWidgetRegistry,
  factory: _STWidgetRegistry.ɵfac,
  providedIn: "root"
});
var STWidgetRegistry = _STWidgetRegistry;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(STWidgetRegistry, [{
    type: Injectable,
    args: [{
      providedIn: "root"
    }]
  }], null, null);
})();
var _STColumnSource = class _STColumnSource {
  constructor(dom, rowSource, acl, i18nSrv, stWidgetRegistry) {
    this.dom = dom;
    this.rowSource = rowSource;
    this.acl = acl;
    this.i18nSrv = i18nSrv;
    this.stWidgetRegistry = stWidgetRegistry;
  }
  setCog(val) {
    this.cog = val;
  }
  fixPop(i, def) {
    if (i.pop == null || i.pop === false) {
      i.pop = false;
      return;
    }
    let pop = __spreadValues({}, def);
    if (typeof i.pop === "string") {
      pop.title = i.pop;
    } else if (typeof i.pop === "object") {
      pop = __spreadValues(__spreadValues({}, pop), i.pop);
    }
    if (typeof pop.condition !== "function") {
      pop.condition = () => false;
    }
    i.pop = pop;
  }
  btnCoerce(list) {
    if (!list)
      return [];
    const ret = [];
    const {
      modal,
      drawer,
      pop,
      btnIcon
    } = this.cog;
    for (const item of list) {
      if (this.acl && item.acl && !this.acl.can(item.acl)) {
        continue;
      }
      if (item.type === "modal" || item.type === "static") {
        if (item.modal == null || item.modal.component == null) {
          if (typeof ngDevMode === "undefined" || ngDevMode) {
            console.warn(`[st] Should specify modal parameter when type is modal or static`);
          }
          item.type = "none";
        } else {
          item.modal = __spreadValues(__spreadValues(__spreadValues({}, {
            paramsName: "record",
            size: "lg"
          }), modal), item.modal);
        }
      }
      if (item.type === "drawer") {
        if (item.drawer == null || item.drawer.component == null) {
          if (typeof ngDevMode === "undefined" || ngDevMode) {
            console.warn(`[st] Should specify drawer parameter when type is drawer`);
          }
          item.type = "none";
        } else {
          item.drawer = __spreadValues(__spreadValues(__spreadValues({}, {
            paramsName: "record",
            size: "lg"
          }), drawer), item.drawer);
        }
      }
      if (item.type === "del" && typeof item.pop === "undefined") {
        item.pop = true;
      }
      this.fixPop(item, pop);
      if (typeof item.icon !== "function") {
        item.icon = __spreadValues(__spreadValues({}, btnIcon), typeof item.icon === "string" ? {
          type: item.icon
        } : item.icon);
      }
      item.children = item.children && item.children.length > 0 ? this.btnCoerce(item.children) : [];
      if (item.i18n && this.i18nSrv) {
        item.text = this.i18nSrv.fanyi(item.i18n);
      }
      ret.push(item);
    }
    this.btnCoerceIf(ret);
    return ret;
  }
  btnCoerceIf(list) {
    for (const item of list) {
      item.iifBehavior = item.iifBehavior || this.cog.iifBehavior;
      if (item.children && item.children.length > 0) {
        this.btnCoerceIf(item.children);
      } else {
        item.children = [];
      }
    }
  }
  fixedCoerce(list) {
    const countReduce = (a, b) => a + +b.width.toString().replace("px", "");
    list.filter((w) => w.fixed && w.fixed === "left" && w.width).forEach((item, idx) => item._left = `${list.slice(0, idx).reduce(countReduce, 0)}px`);
    list.filter((w) => w.fixed && w.fixed === "right" && w.width).reverse().forEach((item, idx) => item._right = `${idx > 0 ? list.slice(-idx).reduce(countReduce, 0) : 0}px`);
  }
  sortCoerce(item) {
    const res = this.fixSortCoerce(item);
    res.reName = __spreadValues(__spreadValues({}, this.cog.sortReName), res.reName);
    return res;
  }
  fixSortCoerce(item) {
    if (typeof item.sort === "undefined") {
      return {
        enabled: false
      };
    }
    let res = {};
    if (typeof item.sort === "string") {
      res.key = item.sort;
    } else if (typeof item.sort !== "boolean") {
      res = item.sort;
    } else if (typeof item.sort === "boolean") {
      res.compare = (a, b) => a[item.indexKey] - b[item.indexKey];
    }
    if (!res.key) {
      res.key = item.indexKey;
    }
    res.enabled = true;
    return res;
  }
  filterCoerce(item) {
    if (item.filter == null) {
      return null;
    }
    let res = item.filter;
    res.type = res.type || "default";
    res.showOPArea = res.showOPArea !== false;
    let icon = "filter";
    let iconTheme = "fill";
    let fixMenus = true;
    let value = void 0;
    switch (res.type) {
      case "keyword":
        icon = "search";
        iconTheme = "outline";
        break;
      case "number":
        icon = "search";
        iconTheme = "outline";
        res.number = __spreadValues({
          step: 1,
          min: -Infinity,
          max: Infinity
        }, res.number);
        break;
      case "date":
        icon = "calendar";
        iconTheme = "outline";
        res.date = __spreadValues({
          range: false,
          mode: "date",
          showToday: true,
          showNow: false
        }, res.date);
        break;
      case "custom":
        break;
      default:
        fixMenus = false;
        break;
    }
    if (fixMenus && (res.menus == null || res.menus.length === 0)) {
      res.menus = [{
        value
      }];
    }
    if (res.menus?.length === 0) {
      return null;
    }
    if (typeof res.multiple === "undefined") {
      res.multiple = true;
    }
    res.confirmText = res.confirmText || this.cog.filterConfirmText;
    res.clearText = res.clearText || this.cog.filterClearText;
    res.key = res.key || item.indexKey;
    res.icon = res.icon || icon;
    const baseIcon = {
      type: icon,
      theme: iconTheme
    };
    if (typeof res.icon === "string") {
      res.icon = __spreadProps(__spreadValues({}, baseIcon), {
        type: res.icon
      });
    } else {
      res.icon = __spreadValues(__spreadValues({}, baseIcon), res.icon);
    }
    this.updateDefault(res);
    if (this.acl) {
      res.menus = res.menus?.filter((w) => this.acl.can(w.acl));
    }
    return res.menus?.length === 0 ? null : res;
  }
  restoreRender(item) {
    if (item.renderTitle) {
      item.__renderTitle = typeof item.renderTitle === "string" ? this.rowSource.getTitle(item.renderTitle) : item.renderTitle;
    }
    if (item.render) {
      item.__render = typeof item.render === "string" ? this.rowSource.getRow(item.render) : item.render;
    }
  }
  widgetCoerce(item) {
    if (item.type !== "widget")
      return;
    if (item.widget == null || !this.stWidgetRegistry.has(item.widget.type)) {
      delete item.type;
      if (typeof ngDevMode === "undefined" || ngDevMode) {
        warn(`st: No widget for type "${item.widget?.type}"`);
      }
    }
  }
  genHeaders(rootColumns) {
    const rows = [];
    const widths = [];
    const fillRowCells = (columns, colIndex, rowIndex = 0) => {
      rows[rowIndex] = rows[rowIndex] || [];
      let currentColIndex = colIndex;
      const colSpans = columns.map((column) => {
        const cell = {
          column,
          colStart: currentColIndex,
          hasSubColumns: false
        };
        let colSpan = 1;
        const subColumns = column.children;
        if (Array.isArray(subColumns) && subColumns.length > 0) {
          colSpan = fillRowCells(subColumns, currentColIndex, rowIndex + 1).reduce((total, count) => total + count, 0);
          cell.hasSubColumns = true;
        } else {
          widths.push(cell.column.width || "");
        }
        if ("colSpan" in column) {
          colSpan = column.colSpan;
        }
        if ("rowSpan" in column) {
          cell.rowSpan = column.rowSpan;
        }
        cell.colSpan = colSpan;
        cell.colEnd = cell.colStart + colSpan - 1;
        rows[rowIndex].push(cell);
        currentColIndex += colSpan;
        return colSpan;
      });
      return colSpans;
    };
    fillRowCells(rootColumns, 0);
    const rowCount = rows.length;
    for (let rowIndex = 0; rowIndex < rowCount; rowIndex += 1) {
      rows[rowIndex].forEach((cell) => {
        if (!("rowSpan" in cell) && !cell.hasSubColumns) {
          cell.rowSpan = rowCount - rowIndex;
        }
      });
    }
    return {
      headers: rows,
      headerWidths: rowCount > 1 ? widths : null
    };
  }
  cleanCond(list) {
    const res = [];
    const copyList = deepCopy(list);
    for (const item of copyList) {
      if (typeof item.iif === "function" && !item.iif(item)) {
        continue;
      }
      if (this.acl && item.acl && !this.acl.can(item.acl)) {
        continue;
      }
      if (Array.isArray(item.children) && item.children.length > 0) {
        item.children = this.cleanCond(item.children);
      }
      res.push(item);
    }
    return res;
  }
  mergeClass(item) {
    const builtInClassNames = [];
    if (item._isTruncate) {
      builtInClassNames.push("text-truncate");
    }
    const rawClassName = item.className;
    if (!rawClassName) {
      const typeClass = {
        number: "text-right",
        currency: "text-right",
        date: "text-center"
      }[item.type];
      if (typeClass) {
        builtInClassNames.push(typeClass);
      }
      item._className = builtInClassNames;
      return;
    }
    const rawClassNameIsArray = Array.isArray(rawClassName);
    if (!rawClassNameIsArray && typeof rawClassName === "object") {
      const objClassNames = rawClassName;
      builtInClassNames.forEach((key) => objClassNames[key] = true);
      item._className = objClassNames;
      return;
    }
    const arrayClassNames = rawClassNameIsArray ? Array.from(rawClassName) : [rawClassName];
    arrayClassNames.splice(0, 0, ...builtInClassNames);
    item._className = [...new Set(arrayClassNames)].filter((w) => !!w);
  }
  process(list, options) {
    if (!list || list.length === 0) {
      return {
        columns: [],
        headers: [],
        headerWidths: null
      };
    }
    const {
      noIndex
    } = this.cog;
    let checkboxCount = 0;
    let radioCount = 0;
    let point = 0;
    const columns = [];
    const processItem = (item) => {
      if (item.index) {
        if (!Array.isArray(item.index)) {
          item.index = item.index.toString().split(".");
        }
        item.indexKey = item.index.join(".");
      }
      const tit = (typeof item.title === "string" ? {
        text: item.title
      } : item.title) || {};
      if (tit.i18n && this.i18nSrv) {
        tit.text = this.i18nSrv.fanyi(tit.i18n);
      }
      if (tit.text) {
        tit._text = this.dom.bypassSecurityTrustHtml(tit.text);
      }
      item.title = tit;
      if (item.type === "no") {
        item.noIndex = item.noIndex == null ? noIndex : item.noIndex;
      }
      if (item.selections == null) {
        item.selections = [];
      }
      if (item.type === "checkbox") {
        ++checkboxCount;
        if (!item.width) {
          item.width = `${item.selections.length > 0 ? 62 : 50}px`;
        }
      }
      if (this.acl) {
        item.selections = item.selections.filter((w) => this.acl.can(w.acl));
      }
      if (item.type === "radio") {
        ++radioCount;
        item.selections = [];
        if (!item.width) {
          item.width = "50px";
        }
      }
      if (item.cell != null) {
        item.type = "cell";
      }
      if (item.type === "yn") {
        item.yn = __spreadValues(__spreadValues({
          truth: true
        }, this.cog.yn), item.yn);
      }
      if (item.type === "date") {
        item.dateFormat = item.dateFormat || this.cog.date?.format;
      }
      if (item.type === "link" && typeof item.click !== "function" || item.type === "badge" && item.badge == null || item.type === "tag" && item.tag == null || item.type === "enum" && item.enum == null) {
        item.type = "";
      }
      item._isTruncate = !!item.width && options.widthMode.strictBehavior === "truncate" && item.type !== "img";
      this.mergeClass(item);
      if (typeof item.width === "number") {
        item._width = item.width;
        item.width = `${item.width}px`;
      }
      item._left = false;
      item._right = false;
      item.safeType = item.safeType ?? options.safeType;
      item._sort = this.sortCoerce(item);
      item.filter = this.filterCoerce(item);
      item.buttons = this.btnCoerce(item.buttons);
      this.widgetCoerce(item);
      this.restoreRender(item);
      item.resizable = __spreadValues(__spreadValues({
        disabled: true,
        bounds: "window",
        minWidth: 60,
        maxWidth: 360,
        preview: true
      }, options.resizable), typeof item.resizable === "boolean" ? {
        disabled: !item.resizable
      } : item.resizable);
      item.__point = point++;
      return item;
    };
    const processList = (data) => {
      for (const item of data) {
        columns.push(processItem(item));
        if (Array.isArray(item.children)) {
          processList(item.children);
        }
      }
    };
    const copyList = this.cleanCond(list);
    processList(copyList);
    if (checkboxCount > 1) {
      throw new Error(`[st]: just only one column checkbox`);
    }
    if (radioCount > 1) {
      throw new Error(`[st]: just only one column radio`);
    }
    this.fixedCoerce(columns);
    return __spreadValues({
      columns: columns.filter((w) => !Array.isArray(w.children) || w.children.length === 0)
    }, this.genHeaders(copyList));
  }
  restoreAllRender(columns) {
    columns.forEach((i) => this.restoreRender(i));
  }
  updateDefault(filter2) {
    if (filter2.menus == null)
      return this;
    if (filter2.type === "default") {
      filter2.default = filter2.menus.findIndex((w) => w.checked) !== -1;
    } else {
      filter2.default = !!filter2.menus[0].value;
    }
    return this;
  }
  cleanFilter(col) {
    const f = col.filter;
    f.default = false;
    if (f.type === "default") {
      f.menus.forEach((i) => i.checked = false);
    } else {
      f.menus[0].value = void 0;
    }
    return this;
  }
};
_STColumnSource.ɵfac = function STColumnSource_Factory(t) {
  return new (t || _STColumnSource)(ɵɵinject(DomSanitizer), ɵɵinject(STRowSource, 1), ɵɵinject(ACLService, 8), ɵɵinject(ALAIN_I18N_TOKEN, 8), ɵɵinject(STWidgetRegistry));
};
_STColumnSource.ɵprov = ɵɵdefineInjectable({
  token: _STColumnSource,
  factory: _STColumnSource.ɵfac
});
var STColumnSource = _STColumnSource;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(STColumnSource, [{
    type: Injectable
  }], () => [{
    type: DomSanitizer
  }, {
    type: STRowSource,
    decorators: [{
      type: Host
    }]
  }, {
    type: ACLService,
    decorators: [{
      type: Optional
    }]
  }, {
    type: void 0,
    decorators: [{
      type: Optional
    }, {
      type: Inject,
      args: [ALAIN_I18N_TOKEN]
    }]
  }, {
    type: STWidgetRegistry
  }], null);
})();
var _STDataSource = class _STDataSource {
  constructor(http, datePipe, ynPipe, numberPipe, currencySrv, dom) {
    this.http = http;
    this.datePipe = datePipe;
    this.ynPipe = ynPipe;
    this.numberPipe = numberPipe;
    this.currencySrv = currencySrv;
    this.dom = dom;
    this.sortTick = 0;
  }
  setCog(val) {
    this.cog = val;
  }
  process(options) {
    let data$;
    let isRemote = false;
    const {
      data,
      res,
      total,
      page,
      pi,
      ps,
      paginator,
      columns
    } = options;
    let retTotal;
    let retPs;
    let retList;
    let retPi;
    let rawData;
    let showPage = page.show;
    if (typeof data === "string") {
      isRemote = true;
      data$ = this.getByRemote(data, options).pipe(map((result) => {
        rawData = result;
        let ret;
        if (Array.isArray(result)) {
          ret = result;
          retTotal = ret.length;
          retPs = retTotal;
          showPage = false;
        } else {
          const reName = res.reName;
          if (typeof reName === "function") {
            const fnRes = reName(result, {
              pi,
              ps,
              total
            });
            ret = fnRes.list;
            retTotal = fnRes.total;
          } else {
            ret = deepGet(result, reName.list, []);
            if (ret == null || !Array.isArray(ret)) {
              ret = [];
            }
            const resultTotal = reName.total && deepGet(result, reName.total, null);
            retTotal = resultTotal == null ? total || 0 : +resultTotal;
          }
        }
        return deepCopy(ret);
      }));
    } else if (data == null || Array.isArray(data)) {
      data$ = of(data ?? []);
    } else {
      data$ = data;
    }
    if (!isRemote) {
      data$ = data$.pipe(
        // sort
        map((result) => {
          rawData = result;
          let copyResult = deepCopy(result);
          const sorterFn = this.getSorterFn(columns);
          if (sorterFn) {
            copyResult = copyResult.sort(sorterFn);
          }
          return copyResult;
        }),
        // filter
        map((result) => {
          columns.filter((w) => w.filter).forEach((c) => {
            const filter2 = c.filter;
            const values = this.getFilteredData(filter2);
            if (values.length === 0)
              return;
            const onFilter = filter2.fn;
            if (typeof onFilter !== "function") {
              if (typeof ngDevMode === "undefined" || ngDevMode) {
                console.warn(`[st] Muse provide the fn function in filter`);
              }
              return;
            }
            result = result.filter((record) => values.some((v) => onFilter(v, record)));
          });
          return result;
        }),
        // paging
        map((result) => {
          if (paginator && page.front) {
            const maxPageIndex = Math.ceil(result.length / ps);
            retPi = Math.max(1, pi > maxPageIndex ? maxPageIndex : pi);
            retTotal = result.length;
            if (page.show === true) {
              return result.slice((retPi - 1) * ps, retPi * ps);
            }
          }
          return result;
        })
      );
    }
    if (typeof res.process === "function") {
      data$ = data$.pipe(map((result) => res.process(result, rawData)));
    }
    data$ = data$.pipe(map((result) => this.optimizeData({
      result,
      columns,
      rowClassName: options.rowClassName
    })));
    return data$.pipe(map((result) => {
      retList = result;
      const realTotal = retTotal || total;
      const realPs = retPs || ps;
      return {
        pi: retPi,
        ps: retPs,
        total: retTotal,
        list: retList,
        statistical: this.genStatistical(columns, retList, rawData),
        pageShow: typeof showPage === "undefined" ? realTotal > realPs : showPage
      };
    }));
  }
  get(item, col, idx) {
    try {
      const safeHtml = col.safeType === "safeHtml";
      if (col.format) {
        const formatRes = col.format(item, col, idx) || "";
        return {
          text: formatRes,
          _text: safeHtml ? this.dom.bypassSecurityTrustHtml(formatRes) : formatRes,
          org: formatRes,
          safeType: col.safeType
        };
      }
      const value = deepGet(item, col.index, col.default);
      let text = value;
      let color;
      let tooltip;
      switch (col.type) {
        case "no":
          text = this.getNoIndex(item, col, idx);
          break;
        case "img":
          text = value ? `<img src="${value}" class="img">` : "";
          break;
        case "number":
          text = this.numberPipe.transform(value, col.numberDigits);
          break;
        case "currency":
          text = this.currencySrv.format(value, col.currency?.format);
          break;
        case "date":
          text = value === col.default ? col.default : this.datePipe.transform(value, col.dateFormat);
          break;
        case "yn":
          text = this.ynPipe.transform(value === col.yn.truth, col.yn.yes, col.yn.no, col.yn.mode, false);
          break;
        case "enum":
          text = col.enum[value];
          break;
        case "tag":
        case "badge":
          const data = col.type === "tag" ? col.tag : col.badge;
          if (data && data[text]) {
            const dataItem = data[text];
            text = dataItem.text;
            color = dataItem.color;
            tooltip = dataItem.tooltip;
          } else {
            text = "";
          }
          break;
      }
      if (text == null)
        text = "";
      return {
        text,
        _text: safeHtml ? this.dom.bypassSecurityTrustHtml(text) : text,
        org: value,
        color,
        tooltip,
        safeType: col.safeType,
        buttons: []
      };
    } catch (ex) {
      const text = `INVALID DATA`;
      console.error(`Failed to get data`, item, col, ex);
      return {
        text,
        _text: text,
        org: text,
        buttons: [],
        safeType: "text"
      };
    }
  }
  getByRemote(url, options) {
    const {
      req,
      page,
      paginator,
      pi,
      ps,
      singleSort,
      multiSort,
      columns
    } = options;
    const method = (req.method || "GET").toUpperCase();
    let params = {};
    const reName = req.reName;
    if (paginator) {
      if (req.type === "page") {
        params = {
          [reName.pi]: page.zeroIndexed ? pi - 1 : pi,
          [reName.ps]: ps
        };
      } else {
        params = {
          [reName.skip]: (pi - 1) * ps,
          [reName.limit]: ps
        };
      }
    }
    params = __spreadValues(__spreadValues(__spreadValues(__spreadValues({}, params), req.params), this.getReqSortMap(singleSort, multiSort, columns)), this.getReqFilterMap(columns));
    if (options.req.ignoreParamNull == true) {
      Object.keys(params).forEach((key) => {
        if (params[key] == null)
          delete params[key];
      });
    }
    let reqOptions = {
      params,
      body: req.body,
      headers: req.headers
    };
    if (method === "POST" && req.allInBody === true) {
      reqOptions = {
        body: __spreadValues(__spreadValues({}, req.body), params),
        headers: req.headers
      };
    }
    if (typeof req.process === "function") {
      reqOptions = req.process(reqOptions);
    }
    if (!(reqOptions.params instanceof HttpParams)) {
      reqOptions.params = new HttpParams({
        fromObject: reqOptions.params
      });
    }
    if (typeof options.customRequest === "function") {
      return options.customRequest({
        method,
        url,
        options: reqOptions
      });
    }
    return this.http.request(method, url, reqOptions);
  }
  getCell(c, item, idx) {
    const onCellResult = typeof c.onCell === "function" ? c.onCell(item, idx) : null;
    const mergedColSpan = onCellResult?.colSpan ?? 1;
    const mergedRowSpan = onCellResult?.rowSpan ?? 1;
    return {
      colSpan: mergedColSpan <= 0 ? null : mergedColSpan,
      rowSpan: mergedRowSpan <= 0 ? null : mergedRowSpan
    };
  }
  optimizeData(options) {
    const {
      result,
      columns,
      rowClassName
    } = options;
    for (let i = 0, len = result.length; i < len; i++) {
      result[i]._values = columns.map((c) => {
        const props = this.getCell(c, result[i], i);
        if (Array.isArray(c.buttons) && c.buttons.length > 0) {
          return {
            buttons: this.genButtons(c.buttons, result[i], c),
            _text: "",
            props
          };
        }
        let cell;
        if (typeof c.cell === "function") {
          cell = c.cell(result[i], c);
        }
        return __spreadProps(__spreadValues({}, this.get(result[i], c, i)), {
          props,
          cell
        });
      });
      result[i]._rowClassName = [rowClassName ? rowClassName(result[i], i) : null, result[i].className].filter((w) => !!w).join(" ");
    }
    return result;
  }
  getNoIndex(item, col, idx) {
    return typeof col.noIndex === "function" ? col.noIndex(item, col, idx) : col.noIndex + idx;
  }
  genButtons(_btns, item, col) {
    const fn = (btns) => {
      return deepCopy(btns).filter((btn) => {
        const result = typeof btn.iif === "function" ? btn.iif(item, btn, col) : true;
        const isRenderDisabled = btn.iifBehavior === "disabled";
        btn._result = result;
        btn._disabled = !result && isRenderDisabled;
        if (btn.children?.length) {
          btn.children = fn(btn.children);
        }
        return result || isRenderDisabled;
      });
    };
    const res = fn(_btns);
    const fnText = (btns) => {
      for (const btn of btns) {
        btn._text = typeof btn.text === "function" ? btn.text(item, btn) : btn.text || "";
        btn._className = typeof btn.className === "function" ? btn.className(item, btn) : btn.className;
        btn._icon = typeof btn.icon === "function" ? btn.icon(item, btn) : btn.icon;
        if (btn.children?.length) {
          btn.children = fnText(btn.children);
        }
      }
      return btns;
    };
    return this.fixMaxMultiple(fnText(res), col);
  }
  fixMaxMultiple(btns, col) {
    const curCog = col.maxMultipleButton;
    const btnSize = btns.length;
    if (curCog == null || btnSize <= 0)
      return btns;
    const cog = __spreadValues(__spreadValues({}, this.cog.maxMultipleButton), typeof curCog === "number" ? {
      count: curCog
    } : curCog);
    if (cog.count >= btnSize)
      return btns;
    const newBtns = btns.slice(0, cog.count);
    newBtns.push({
      _text: cog.text,
      children: btns.slice(cog.count)
    });
    return newBtns;
  }
  // #region sort
  getValidSort(columns) {
    return columns.filter((item) => item._sort && item._sort.enabled && item._sort.default).map((item) => item._sort);
  }
  getSorterFn(columns) {
    const sortList = this.getValidSort(columns);
    if (sortList.length === 0) {
      return;
    }
    const sortItem = sortList[0];
    if (sortItem.compare === null) {
      return;
    }
    if (typeof sortItem.compare !== "function") {
      if (typeof ngDevMode === "undefined" || ngDevMode) {
        console.warn(`[st] Muse provide the compare function in sort`);
      }
      return;
    }
    return (a, b) => {
      const result = sortItem.compare(a, b);
      if (result !== 0) {
        return sortItem.default === "descend" ? -result : result;
      }
      return 0;
    };
  }
  get nextSortTick() {
    return ++this.sortTick;
  }
  getReqSortMap(singleSort, multiSort, columns) {
    let ret = {};
    const sortList = this.getValidSort(columns);
    if (multiSort) {
      const ms = __spreadValues({
        key: "sort",
        separator: "-",
        nameSeparator: ".",
        keepEmptyKey: true,
        arrayParam: false
      }, multiSort);
      const sortMap = sortList.sort((a, b) => a.tick - b.tick).map((item) => item.key + ms.nameSeparator + ((item.reName || {})[item.default] || item.default));
      ret = {
        [ms.key]: ms.arrayParam ? sortMap : sortMap.join(ms.separator)
      };
      return sortMap.length === 0 && ms.keepEmptyKey === false ? {} : ret;
    }
    if (sortList.length === 0)
      return ret;
    const mapData = sortList[0];
    let sortFiled = mapData.key;
    let sortValue = (sortList[0].reName || {})[mapData.default] || mapData.default;
    if (singleSort) {
      sortValue = sortFiled + (singleSort.nameSeparator || ".") + sortValue;
      sortFiled = singleSort.key || "sort";
    }
    ret[sortFiled] = sortValue;
    return ret;
  }
  // #endregion
  // #region filter
  getFilteredData(filter2) {
    return filter2.type === "default" ? filter2.menus.filter((f) => f.checked === true) : filter2.menus.slice(0, 1);
  }
  getReqFilterMap(columns) {
    let ret = {};
    columns.filter((w) => w.filter && w.filter.default === true).forEach((col) => {
      const filter2 = col.filter;
      const values = this.getFilteredData(filter2);
      let obj = {};
      if (filter2.reName) {
        obj = filter2.reName(filter2.menus, col);
      } else {
        obj[filter2.key] = values.map((i) => i.value).join(",");
      }
      ret = __spreadValues(__spreadValues({}, ret), obj);
    });
    return ret;
  }
  // #endregion
  // #region statistical
  genStatistical(columns, list, rawData) {
    const res = {};
    columns.forEach((col, index) => {
      res[col.key || col.indexKey || index] = col.statistical == null ? {} : this.getStatistical(col, index, list, rawData);
    });
    return res;
  }
  getStatistical(col, index, list, rawData) {
    const val = col.statistical;
    const item = __spreadValues({
      digits: 2,
      currency: void 0
    }, typeof val === "string" ? {
      type: val
    } : val);
    let res = {
      value: 0
    };
    let currency = false;
    if (typeof item.type === "function") {
      res = item.type(this.getValues(index, list), col, list, rawData);
      currency = true;
    } else {
      switch (item.type) {
        case "count":
          res.value = list.length;
          break;
        case "distinctCount":
          res.value = this.getValues(index, list).filter((value, idx, self) => self.indexOf(value) === idx).length;
          break;
        case "sum":
          res.value = this.toFixed(this.getSum(index, list), item.digits);
          currency = true;
          break;
        case "average":
          res.value = this.toFixed(this.getSum(index, list) / list.length, item.digits);
          currency = true;
          break;
        case "max":
          res.value = Math.max(...this.getValues(index, list));
          currency = true;
          break;
        case "min":
          res.value = Math.min(...this.getValues(index, list));
          currency = true;
          break;
      }
    }
    if (item.currency === true || item.currency == null && currency === true) {
      res.text = this.currencySrv.format(res.value, col.currency?.format);
    } else {
      res.text = String(res.value);
    }
    return res;
  }
  toFixed(val, digits) {
    if (isNaN(val) || !isFinite(val)) {
      return 0;
    }
    return parseFloat(val.toFixed(digits));
  }
  getValues(index, list) {
    return list.map((i) => i._values[index].org).map((i) => i === "" || i == null ? 0 : i);
  }
  getSum(index, list) {
    return this.getValues(index, list).reduce((p, i) => p += parseFloat(String(i)), 0);
  }
};
_STDataSource.ɵfac = function STDataSource_Factory(t) {
  return new (t || _STDataSource)(ɵɵinject(_HttpClient), ɵɵinject(DatePipe, 1), ɵɵinject(YNPipe, 1), ɵɵinject(DecimalPipe, 1), ɵɵinject(CurrencyService), ɵɵinject(DomSanitizer));
};
_STDataSource.ɵprov = ɵɵdefineInjectable({
  token: _STDataSource,
  factory: _STDataSource.ɵfac
});
var STDataSource = _STDataSource;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(STDataSource, [{
    type: Injectable
  }], () => [{
    type: _HttpClient
  }, {
    type: DatePipe,
    decorators: [{
      type: Host
    }]
  }, {
    type: YNPipe,
    decorators: [{
      type: Host
    }]
  }, {
    type: DecimalPipe,
    decorators: [{
      type: Host
    }]
  }, {
    type: CurrencyService
  }, {
    type: DomSanitizer
  }], null);
})();
var _STExport = class _STExport {
  constructor() {
    this.xlsxSrv = inject(XlsxService, {
      optional: true
    });
  }
  _stGet(item, col, index, colIndex) {
    const ret = {
      t: "s",
      v: ""
    };
    if (col.format) {
      ret.v = col.format(item, col, index);
    } else {
      const val = item._values ? item._values[colIndex].text : deepGet(item, col.index, "");
      ret.v = val;
      if (val != null) {
        switch (col.type) {
          case "currency":
            ret.t = "n";
            break;
          case "date":
            if (`${val}`.length > 0) {
              ret.t = "d";
              ret.z = col.dateFormat;
            }
            break;
          case "yn":
            const yn = col.yn;
            ret.v = val === yn.truth ? yn.yes : yn.no;
            break;
        }
      }
    }
    ret.v = ret.v ?? "";
    return ret;
  }
  genSheet(opt) {
    const sheets = {};
    const sheet = sheets[opt.sheetname || "Sheet1"] = {};
    const dataLen = opt.data.length;
    const columns = opt.columens;
    let validColCount = 0;
    let wpx = false;
    const invalidFn = (col) => col.exported === false || !col.index || !(!col.buttons || col.buttons.length === 0);
    for (const [idx, col] of columns.entries()) {
      if (invalidFn(col))
        continue;
      if (!wpx && col._width != null)
        wpx = true;
      ++validColCount;
      const columnName = this.xlsxSrv.numberToSchema(validColCount);
      sheet[`${columnName}1`] = {
        t: "s",
        v: typeof col.title === "object" ? col.title.text : col.title
      };
      for (let dataIdx = 0; dataIdx < dataLen; dataIdx++) {
        sheet[`${columnName}${dataIdx + 2}`] = this._stGet(opt.data[dataIdx], col, dataIdx, idx);
      }
    }
    if (wpx) {
      sheet["!cols"] = columns.filter((col) => !invalidFn(col)).map((col) => ({
        wpx: col._width
      }));
    }
    if (validColCount > 0 && dataLen > 0) {
      sheet["!ref"] = `A1:${this.xlsxSrv.numberToSchema(validColCount)}${dataLen + 1}`;
    }
    return sheets;
  }
  export(opt) {
    return __async(this, null, function* () {
      if (this.xlsxSrv == null) {
        if (typeof ngDevMode === "undefined" || ngDevMode) {
          console.warn(`XlsxService service not found`);
        }
        return Promise.reject();
      }
      const sheets = this.genSheet(opt);
      return this.xlsxSrv.export({
        sheets,
        filename: opt.filename,
        callback: opt.callback
      });
    });
  }
};
_STExport.ɵfac = function STExport_Factory(t) {
  return new (t || _STExport)();
};
_STExport.ɵprov = ɵɵdefineInjectable({
  token: _STExport,
  factory: _STExport.ɵfac
});
var STExport = _STExport;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(STExport, [{
    type: Injectable
  }], null, null);
})();
var _STWidgetHostDirective = class _STWidgetHostDirective {
  constructor() {
    this.stWidgetRegistry = inject(STWidgetRegistry);
    this.viewContainerRef = inject(ViewContainerRef);
  }
  ngOnInit() {
    const widget = this.column.widget;
    const componentType = this.stWidgetRegistry.get(widget.type);
    this.viewContainerRef.clear();
    const componentRef = this.viewContainerRef.createComponent(componentType);
    const {
      record,
      column
    } = this;
    const data = widget.params ? widget.params({
      record,
      column
    }) : {
      record
    };
    Object.keys(data).forEach((key) => {
      componentRef.instance[key] = data[key];
    });
  }
};
_STWidgetHostDirective.ɵfac = function STWidgetHostDirective_Factory(t) {
  return new (t || _STWidgetHostDirective)();
};
_STWidgetHostDirective.ɵdir = ɵɵdefineDirective({
  type: _STWidgetHostDirective,
  selectors: [["", "st-widget-host", ""]],
  inputs: {
    record: "record",
    column: "column"
  }
});
var STWidgetHostDirective = _STWidgetHostDirective;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(STWidgetHostDirective, [{
    type: Directive,
    args: [{
      selector: "[st-widget-host]"
    }]
  }], null, {
    record: [{
      type: Input
    }],
    column: [{
      type: Input
    }]
  });
})();
var ST_DEFAULT_CONFIG = {
  pi: 1,
  ps: 10,
  size: "default",
  responsive: true,
  responsiveHideHeaderFooter: false,
  req: {
    type: "page",
    method: "GET",
    allInBody: false,
    lazyLoad: false,
    ignoreParamNull: false,
    reName: {
      pi: "pi",
      ps: "ps",
      skip: "skip",
      limit: "limit"
    }
  },
  res: {
    reName: {
      list: ["list"],
      total: ["total"]
    }
  },
  page: {
    front: true,
    zeroIndexed: false,
    position: "bottom",
    placement: "right",
    show: true,
    showSize: false,
    pageSizes: [10, 20, 30, 40, 50],
    showQuickJumper: false,
    total: true,
    toTop: true,
    toTopOffset: 100,
    itemRender: null,
    simple: false
  },
  modal: {
    paramsName: "record",
    size: "lg",
    exact: true
  },
  drawer: {
    paramsName: "record",
    size: "md",
    footer: true,
    footerHeight: 55
  },
  pop: {
    title: "确认删除吗？",
    trigger: "click",
    placement: "top"
  },
  btnIcon: {
    theme: "outline",
    spin: false
  },
  noIndex: 1,
  expandRowByClick: false,
  expandAccordion: false,
  widthMode: {
    type: "default",
    strictBehavior: "truncate"
  },
  virtualItemSize: 54,
  virtualMaxBufferPx: 200,
  virtualMinBufferPx: 100,
  iifBehavior: "hide",
  loadingDelay: 0,
  safeType: "safeHtml",
  date: {
    format: `yyyy-MM-dd HH:mm`
  },
  yn: {
    truth: true,
    yes: "是",
    mode: "icon"
  },
  maxMultipleButton: {
    text: "更多",
    count: 2
  }
};
var _STFilterComponent = class _STFilterComponent {
  constructor() {
    this.cdr = inject(ChangeDetectorRef);
    this.visible = false;
    this.locale = {};
    this.n = new EventEmitter();
    this.handle = new EventEmitter();
  }
  get icon() {
    return this.f.icon;
  }
  stopPropagation($event) {
    $event.stopPropagation();
  }
  checkboxChange() {
    this.n.emit(this.f.menus?.filter((w) => w.checked));
  }
  radioChange(item) {
    this.f.menus.forEach((i) => i.checked = false);
    item.checked = !item.checked;
    this.n.emit(item);
  }
  close(result) {
    if (result != null)
      this.handle.emit(result);
    this.visible = false;
    this.cdr.detectChanges();
  }
  confirm() {
    this.handle.emit(true);
    return this;
  }
  reset() {
    this.handle.emit(false);
    return this;
  }
};
_STFilterComponent.ɵfac = function STFilterComponent_Factory(t) {
  return new (t || _STFilterComponent)();
};
_STFilterComponent.ɵcmp = ɵɵdefineComponent({
  type: _STFilterComponent,
  selectors: [["st-filter"]],
  hostVars: 6,
  hostBindings: function STFilterComponent_HostBindings(rf, ctx) {
    if (rf & 2) {
      ɵɵclassProp("ant-table-filter-trigger-container", true)("st__filter", true)("ant-table-filter-trigger-container-open", ctx.visible);
    }
  },
  inputs: {
    col: "col",
    locale: "locale",
    f: "f"
  },
  outputs: {
    n: "n",
    handle: "handle"
  },
  decls: 11,
  vars: 9,
  consts: [["nz-dropdown", "", "nzTrigger", "click", "nzOverlayClassName", "st__filter-wrap", 1, "ant-table-filter-trigger", 3, "nzDropdownMenu", "nzClickHide", "nzVisible", "nzVisibleChange", "click"], ["nz-icon", "", 3, "nzType", "nzTheme"], ["filterMenu", "nzDropdownMenu"], [1, "ant-table-filter-dropdown"], ["class", "ant-table-filter-dropdown-btns"], [1, "st__filter-keyword"], ["type", "text", "nz-input", "", 3, "ngModel", "ngModelChange", "keyup.enter"], [1, "p-sm", "st__filter-number"], [1, "width-100", 3, "ngModel", "nzMin", "nzMax", "nzStep", "nzPrecision", "nzPlaceHolder", "ngModelChange"], [1, "p-sm", "st__filter-date"], ["nzInline", "", 3, "nzMode", "ngModel", "nzShowNow", "nzShowToday", "nzDisabledDate", "nzDisabledTime"], ["nzInline", "", 3, "nzMode", "ngModel", "nzShowNow", "nzShowToday", "nzDisabledDate", "nzDisabledTime", "ngModelChange"], [1, "st__filter-custom"], [3, "ngTemplateOutlet", "ngTemplateOutletContext"], ["nz-menu", ""], ["nz-menu-item", ""], ["nz-checkbox", "", 3, "ngModel"], ["nz-checkbox", "", 3, "ngModel", "ngModelChange"], ["nz-radio", "", 3, "ngModel", "ngModelChange"], [1, "ant-table-filter-dropdown-btns"], [1, "ant-table-filter-dropdown-link", "confirm", 3, "click"], [1, "ant-table-filter-dropdown-link", "clear", 3, "click"]],
  template: function STFilterComponent_Template(rf, ctx) {
    if (rf & 1) {
      ɵɵelementStart(0, "span", 0);
      ɵɵtwoWayListener("nzVisibleChange", function STFilterComponent_Template_span_nzVisibleChange_0_listener($event) {
        ɵɵtwoWayBindingSet(ctx.visible, $event) || (ctx.visible = $event);
        return $event;
      });
      ɵɵlistener("click", function STFilterComponent_Template_span_click_0_listener($event) {
        return ctx.stopPropagation($event);
      });
      ɵɵelement(1, "i", 1);
      ɵɵelementEnd();
      ɵɵelementStart(2, "nz-dropdown-menu", null, 2)(4, "div", 3);
      ɵɵtemplate(5, STFilterComponent_Case_5_Template, 2, 2)(6, STFilterComponent_Case_6_Template, 2, 6)(7, STFilterComponent_Case_7_Template, 3, 1)(8, STFilterComponent_Case_8_Template, 2, 6)(9, STFilterComponent_Case_9_Template, 3, 0)(10, STFilterComponent_Conditional_10_Template, 7, 2, "div", 4);
      ɵɵelementEnd()();
    }
    if (rf & 2) {
      const _r0 = ɵɵreference(3);
      let STFilterComponent_contFlowTmp;
      ɵɵclassProp("active", ctx.visible || ctx.f.default);
      ɵɵproperty("nzDropdownMenu", _r0)("nzClickHide", false);
      ɵɵtwoWayProperty("nzVisible", ctx.visible);
      ɵɵadvance();
      ɵɵproperty("nzType", ctx.icon.type)("nzTheme", ctx.icon.theme);
      ɵɵadvance(4);
      ɵɵconditional(5, (STFilterComponent_contFlowTmp = ctx.f.type) === "keyword" ? 5 : STFilterComponent_contFlowTmp === "number" ? 6 : STFilterComponent_contFlowTmp === "date" ? 7 : STFilterComponent_contFlowTmp === "custom" ? 8 : 9);
      ɵɵadvance(5);
      ɵɵconditional(10, ctx.f.showOPArea ? 10 : -1);
    }
  },
  dependencies: [NgTemplateOutlet, DefaultValueAccessor, NgControlStatus, NgModel, NzIconDirective, NzCheckboxComponent, NzMenuDirective, NzMenuItemComponent, NzDropDownDirective, NzDropdownMenuComponent, NzRadioComponent, NzInputDirective, NzInputNumberComponent, NzDatePickerComponent, NzRangePickerComponent],
  encapsulation: 2,
  changeDetection: 0
});
var STFilterComponent = _STFilterComponent;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(STFilterComponent, [{
    type: Component,
    args: [{
      selector: "st-filter",
      template: `
    <span
      class="ant-table-filter-trigger"
      [class.active]="visible || f.default"
      nz-dropdown
      [nzDropdownMenu]="filterMenu"
      nzTrigger="click"
      [nzClickHide]="false"
      [(nzVisible)]="visible"
      nzOverlayClassName="st__filter-wrap"
      (click)="stopPropagation($event)"
    >
      <i nz-icon [nzType]="icon.type" [nzTheme]="icon.theme!"></i>
    </span>
    <nz-dropdown-menu #filterMenu="nzDropdownMenu">
      <div class="ant-table-filter-dropdown">
        @switch (f.type) {
          @case ('keyword') {
            <div class="st__filter-keyword">
              <input
                type="text"
                nz-input
                [attr.placeholder]="f.placeholder"
                [(ngModel)]="f.menus![0]!.value"
                (ngModelChange)="n.emit($event)"
                (keyup.enter)="confirm()"
              />
            </div>
          }
          @case ('number') {
            <div class="p-sm st__filter-number">
              <nz-input-number
                [(ngModel)]="f.menus![0]!.value"
                (ngModelChange)="n.emit($event)"
                [nzMin]="f.number!.min!"
                [nzMax]="f.number!.max!"
                [nzStep]="f.number!.step!"
                [nzPrecision]="f.number!.precision"
                [nzPlaceHolder]="f.placeholder!"
                class="width-100"
              />
            </div>
          }
          @case ('date') {
            <div class="p-sm st__filter-date">
              @if (f.date!.range) {
                <nz-range-picker
                  nzInline
                  [nzMode]="f.date!.mode"
                  [(ngModel)]="f.menus![0]!.value"
                  (ngModelChange)="n.emit($event)"
                  [nzShowNow]="f.date!.showNow"
                  [nzShowToday]="f.date!.showToday"
                  [nzDisabledDate]="f.date!.disabledDate"
                  [nzDisabledTime]="f.date!.disabledTime"
                />
              } @else {
                <nz-date-picker
                  nzInline
                  [nzMode]="f.date!.mode"
                  [(ngModel)]="f.menus![0]!.value"
                  (ngModelChange)="n.emit($event)"
                  [nzShowNow]="f.date!.showNow"
                  [nzShowToday]="f.date!.showToday"
                  [nzDisabledDate]="f.date!.disabledDate"
                  [nzDisabledTime]="f.date!.disabledTime"
                />
              }
            </div>
          }
          @case ('custom') {
            <div class="st__filter-custom">
              <ng-template
                [ngTemplateOutlet]="f.custom!"
                [ngTemplateOutletContext]="{ $implicit: f, col: col, handle: this }"
              />
            </div>
          }
          @default {
            <ul nz-menu>
              @for (filter of f.menus; track $index) {
                <li nz-menu-item>
                  @if (f.multiple) {
                    <label nz-checkbox [(ngModel)]="filter.checked" (ngModelChange)="checkboxChange()">
                      {{ filter.text }}
                    </label>
                  } @else {
                    <label nz-radio [ngModel]="filter.checked" (ngModelChange)="radioChange(filter)">
                      {{ filter.text }}
                    </label>
                  }
                </li>
              }
            </ul>
          }
        }
        @if (f.showOPArea) {
          <div class="ant-table-filter-dropdown-btns">
            <a class="ant-table-filter-dropdown-link confirm" (click)="confirm()">
              <span>{{ f.confirmText || locale.filterConfirm }}</span>
            </a>
            <a class="ant-table-filter-dropdown-link clear" (click)="reset()">
              <span>{{ f.clearText || locale.filterReset }}</span>
            </a>
          </div>
        }
      </div>
    </nz-dropdown-menu>
  `,
      host: {
        "[class.ant-table-filter-trigger-container]": `true`,
        "[class.st__filter]": `true`,
        "[class.ant-table-filter-trigger-container-open]": `visible`
      },
      preserveWhitespaces: false,
      changeDetection: ChangeDetectionStrategy.OnPush,
      encapsulation: ViewEncapsulation$1.None
    }]
  }], null, {
    col: [{
      type: Input
    }],
    locale: [{
      type: Input
    }],
    f: [{
      type: Input
    }],
    n: [{
      type: Output
    }],
    handle: [{
      type: Output
    }]
  });
})();
var _STComponent = class _STComponent {
  get req() {
    return this._req;
  }
  set req(value) {
    this._req = deepMergeKey({}, true, this.cog.req, value);
  }
  /** 返回体配置 */
  get res() {
    return this._res;
  }
  set res(value) {
    const item = this._res = deepMergeKey({}, true, this.cog.res, value);
    const reName = item.reName;
    if (typeof reName !== "function") {
      if (!Array.isArray(reName.list))
        reName.list = reName.list.split(".");
      if (!Array.isArray(reName.total))
        reName.total = reName.total.split(".");
    }
    this._res = item;
  }
  get page() {
    return this._page;
  }
  set page(value) {
    this._page = __spreadValues(__spreadValues({}, this.cog.page), value);
    this.updateTotalTpl();
  }
  get multiSort() {
    return this._multiSort;
  }
  set multiSort(value) {
    if (typeof value === "boolean" && !booleanAttribute(value) || typeof value === "object" && Object.keys(value).length === 0) {
      this._multiSort = void 0;
      return;
    }
    this._multiSort = __spreadValues({}, typeof value === "object" ? value : {});
  }
  set widthMode(value) {
    this._widthMode = __spreadValues(__spreadValues({}, this.cog.widthMode), value);
  }
  get widthMode() {
    return this._widthMode;
  }
  set widthConfig(val) {
    this._widthConfig = val;
    this.customWidthConfig = val && val.length > 0;
  }
  set resizable(val) {
    this._resizable = typeof val === "object" ? val : {
      disabled: !booleanAttribute(val)
    };
  }
  /**
   * Get the number of the current page
   */
  get count() {
    return this._data.length;
  }
  /**
   * Get the data of the current page
   */
  get list() {
    return this._data;
  }
  get noColumns() {
    return this.columns == null;
  }
  constructor(configSrv) {
    this.i18nSrv = inject(ALAIN_I18N_TOKEN, {
      optional: true
    });
    this.el = inject(ElementRef).nativeElement;
    this.cdr = inject(ChangeDetectorRef);
    this.doc = inject(DOCUMENT);
    this.exportSrv = inject(STExport);
    this.columnSource = inject(STColumnSource);
    this.dataSource = inject(STDataSource);
    this.delonI18n = inject(DelonLocaleService);
    this.cms = inject(NzContextMenuService);
    this.destroy$ = inject(DestroyRef);
    this.totalTpl = ``;
    this.inied = false;
    this.customWidthConfig = false;
    this._widthConfig = [];
    this.locale = {};
    this._loading = false;
    this._data = [];
    this._statistical = {};
    this._isPagination = true;
    this._allChecked = false;
    this._allCheckedDisabled = false;
    this._indeterminate = false;
    this._headers = [];
    this._columns = [];
    this.contextmenuList = [];
    this.ps = 10;
    this.pi = 1;
    this.total = 0;
    this.loading = null;
    this.loadingDelay = 0;
    this.loadingIndicator = null;
    this.bordered = false;
    this.scroll = {
      x: null,
      y: null
    };
    this.showHeader = true;
    this.expandRowByClick = false;
    this.expandAccordion = false;
    this.expand = null;
    this.responsive = true;
    this.error = new EventEmitter();
    this.change = new EventEmitter();
    this.virtualScroll = false;
    this.virtualItemSize = 54;
    this.virtualMaxBufferPx = 200;
    this.virtualMinBufferPx = 100;
    this.virtualForTrackBy = (index) => index;
    this.trackBy = (_, item) => item;
    this.delonI18n.change.pipe(takeUntilDestroyed()).subscribe(() => {
      this.locale = this.delonI18n.getData("st");
      if (this._columns.length > 0) {
        this.updateTotalTpl();
        this.cd();
      }
    });
    this.i18nSrv?.change.pipe(takeUntilDestroyed(), filter(() => this._columns.length > 0)).subscribe(() => this.refreshColumns());
    this.setCog(configSrv.merge("st", ST_DEFAULT_CONFIG));
  }
  setCog(cog) {
    const copyMultiSort = __spreadValues({}, cog.multiSort);
    delete cog.multiSort;
    this.cog = cog;
    Object.assign(this, cog);
    if (copyMultiSort.global !== false) {
      this.multiSort = copyMultiSort;
    }
    this.columnSource.setCog(cog);
    this.dataSource.setCog(cog);
  }
  cd() {
    this.cdr.detectChanges();
    return this;
  }
  refreshData() {
    this._data = [...this._data];
    return this.cd();
  }
  renderTotal(total, range) {
    return this.totalTpl ? this.totalTpl.replace("{{total}}", total).replace("{{range[0]}}", range[0]).replace("{{range[1]}}", range[1]) : "";
  }
  changeEmit(type, data) {
    const res = {
      type,
      pi: this.pi,
      ps: this.ps,
      total: this.total
    };
    if (data != null) {
      res[type] = data;
    }
    this.change.emit(res);
  }
  // #region data
  /**
   * 获取过滤后所有数据
   * - 本地数据：包含排序、过滤后不分页数据
   * - 远程数据：不传递 `pi`、`ps` 两个参数
   */
  get filteredData() {
    return this.loadData({
      paginator: false
    }).pipe(map((res) => res.list));
  }
  updateTotalTpl() {
    const {
      total
    } = this.page;
    if (typeof total === "string" && total.length) {
      this.totalTpl = total;
    } else if (booleanAttribute(total)) {
      this.totalTpl = this.locale.total;
    } else {
      this.totalTpl = "";
    }
  }
  setLoading(val) {
    if (this.loading == null) {
      this._loading = val;
      this.cdr.detectChanges();
    }
  }
  loadData(options) {
    const {
      pi,
      ps,
      data,
      req,
      res,
      page,
      total,
      singleSort,
      multiSort,
      rowClassName
    } = this;
    return this.dataSource.process(__spreadValues({
      pi,
      ps,
      total,
      data,
      req,
      res,
      page,
      columns: this._columns,
      singleSort,
      multiSort,
      rowClassName,
      paginator: true,
      customRequest: this.customRequest || this.cog.customRequest
    }, options)).pipe(takeUntilDestroyed(this.destroy$));
  }
  loadPageData() {
    this.setLoading(true);
    return this.loadData().pipe(finalize(() => this.setLoading(false)), catchError((error) => {
      this.error.emit({
        type: "req",
        error
      });
      return throwError(() => error);
    }), map((result) => {
      const undefinedString = "undefined";
      if (typeof result.pi !== undefinedString) {
        this.pi = result.pi;
      }
      if (typeof result.ps !== undefinedString) {
        this.ps = result.ps;
      }
      if (typeof result.total !== undefinedString) {
        this.total = result.total;
      }
      if (typeof result.pageShow !== undefinedString) {
        this._isPagination = result.pageShow;
      }
      this._data = result.list ?? [];
      this._statistical = result.statistical;
      if (this.cdkVirtualScrollViewport != null) {
        Promise.resolve().then(() => this.cdkVirtualScrollViewport?.checkViewportSize());
      }
      this._refCheck();
      this.changeEmit("loaded", result.list);
      return this;
    }));
  }
  /** 清空所有数据 */
  clear(cleanStatus = true) {
    if (cleanStatus) {
      this.clearStatus();
    }
    this._data = [];
    return this.cd();
  }
  /** 清空所有状态 */
  clearStatus() {
    return this.clearCheck().clearRadio().clearFilter().clearSort();
  }
  /**
   * 根据页码重新加载数据
   *
   * @param pi 指定当前页码，默认：`1`
   * @param extraParams 重新指定 `extraParams` 值
   * @param options 选项
   */
  load(pi = 1, extraParams, options) {
    if (pi !== -1)
      this.pi = pi;
    if (typeof extraParams !== "undefined") {
      this.req.params = options && options.merge ? __spreadValues(__spreadValues({}, this.req.params), extraParams) : extraParams;
    }
    this._change("pi", options);
    return this;
  }
  /**
   * 重新刷新当前页
   *
   * @param extraParams 重新指定 `extraParams` 值
   */
  reload(extraParams, options) {
    return this.load(-1, extraParams, options);
  }
  /**
   * 重置且重新设置 `pi` 为 `1`，包含以下值：
   * - `check` 数据
   * - `radio` 数据
   * - `sort` 数据
   * - `fileter` 数据
   *
   * @param extraParams 重新指定 `extraParams` 值
   */
  reset(extraParams, options) {
    this.clearStatus().load(1, extraParams, options);
    return this;
  }
  _toTop(enforce) {
    if (!(enforce == null ? this.page.toTop : enforce))
      return;
    const el = this.el;
    el.scrollIntoView();
    this.doc.documentElement.scrollTop -= this.page.toTopOffset;
    if (this.scroll) {
      if (this.cdkVirtualScrollViewport) {
        this.cdkVirtualScrollViewport.scrollTo({
          top: 0,
          left: 0
        });
      } else {
        el.querySelector(".ant-table-body, .ant-table-content")?.scrollTo(0, 0);
      }
    }
  }
  _change(type, options) {
    if (type === "pi" || type === "ps" && this.pi <= Math.ceil(this.total / this.ps)) {
      this.loadPageData().subscribe(() => this._toTop(options?.toTop));
    }
    this.changeEmit(type);
  }
  closeOtherExpand(item) {
    if (this.expandAccordion === false)
      return;
    this._data.filter((i) => i !== item).forEach((i) => i.expand = false);
  }
  _rowClick(e, item, index, dbl) {
    const el = e.target;
    if (el.nodeName === "INPUT")
      return;
    const {
      expand,
      expandRowByClick
    } = this;
    if (!!expand && item.showExpand !== false && expandRowByClick) {
      item.expand = !item.expand;
      this.closeOtherExpand(item);
      this.changeEmit("expand", item);
      return;
    }
    const data = {
      e,
      item,
      index
    };
    if (dbl) {
      this.changeEmit("dblClick", data);
    } else {
      this._clickRowClassName(el, item, index);
      this.changeEmit("click", data);
    }
  }
  _clickRowClassName(el, item, index) {
    const cr = this.clickRowClassName;
    if (cr == null)
      return;
    const config = __spreadValues({
      exclusive: false
    }, typeof cr === "string" ? {
      fn: () => cr
    } : cr);
    const className = config.fn(item, index);
    const trEl = el.closest("tr");
    if (config.exclusive) {
      trEl.parentElement.querySelectorAll("tr").forEach((a) => a.classList.remove(className));
    }
    if (trEl.classList.contains(className)) {
      trEl.classList.remove(className);
    } else {
      trEl.classList.add(className);
    }
  }
  _expandChange(item, expand) {
    item.expand = expand;
    this.closeOtherExpand(item);
    this.changeEmit("expand", item);
  }
  _stopPropagation(ev) {
    ev.stopPropagation();
  }
  _refColAndData() {
    this._columns.forEach((c) => {
      this._data.forEach((i, idx) => {
        const values = i._values;
        if (c.type === "no") {
          const text = `${this.dataSource.getNoIndex(i, c, idx)}`;
          values[c.__point] = {
            text,
            _text: text,
            org: idx,
            safeType: "text"
          };
        }
        values[c.__point].props = this.dataSource.getCell(c, i, idx);
      });
    });
    return this.refreshData();
  }
  /**
   * Add a rows in the table, like this:
   *
   * ```
   * this.st.addRow(stDataItem)
   * ```
   *
   * **TIPS:** Don't change the `total` value, it is recommended to use the `reload` method if needed
   */
  addRow(data, options) {
    if (!Array.isArray(data))
      data = [data];
    this._data.splice(options?.index ?? 0, 0, ...data);
    return this.optimizeData()._refColAndData();
  }
  /**
   * Remove a row in the table, like this:
   *
   * ```
   * this.st.removeRow(0)
   * this.st.removeRow(stDataItem)
   * ```
   *
   * **TIPS:** Don't change the `total` value, it is recommended to use the `reload` method if needed
   */
  removeRow(data) {
    if (typeof data === "number") {
      this._data.splice(data, 1);
    } else {
      if (!Array.isArray(data)) {
        data = [data];
      }
      const curData = this._data;
      for (var i = curData.length; i--; ) {
        if (data.indexOf(curData[i]) !== -1) {
          curData.splice(i, 1);
        }
      }
    }
    return this._refCheck()._refColAndData();
  }
  /**
   * Sets the row value for the `index` in the table, like this:
   *
   * - `optinos.refreshSchema` Whether to refresh of st schemas
   * - `optinos.emitReload` Whether to trigger a reload http request when data is url
   *
   * ```
   * this.st.setRow(0, { price: 100 })
   * this.st.setRow(0, { price: 100, name: 'asdf' })
   * this.st.setRow(item, { price: 100 })
   * ```
   */
  setRow(index, item, options) {
    options = __spreadValues({
      refreshSchema: false,
      emitReload: false
    }, options);
    if (typeof index !== "number") {
      index = this._data.indexOf(index);
    }
    this._data[index] = deepMergeKey(this._data[index], false, item);
    this.optimizeData();
    if (options.refreshSchema) {
      this.resetColumns({
        emitReload: options.emitReload
      });
      return this;
    }
    return this.refreshData();
  }
  // #endregion
  // #region sort
  sort(col, idx, value) {
    if (this.multiSort) {
      col._sort.default = value;
      col._sort.tick = this.dataSource.nextSortTick;
    } else {
      this._columns.forEach((item, index) => item._sort.default = index === idx ? value : null);
    }
    this.cdr.detectChanges();
    this.loadPageData().subscribe(() => {
      const res = {
        value,
        map: this.dataSource.getReqSortMap(this.singleSort, this.multiSort, this._columns),
        column: col
      };
      this.changeEmit("sort", res);
    });
  }
  clearSort() {
    this._columns.forEach((item) => item._sort.default = null);
    return this;
  }
  // #endregion
  // #region filter
  _handleFilter(col, confirm) {
    if (!confirm) {
      this.columnSource.cleanFilter(col);
    }
    this.pi = 1;
    this.columnSource.updateDefault(col.filter);
    this.loadPageData().subscribe(() => this.changeEmit("filter", col));
  }
  handleFilterNotify(value) {
    this.changeEmit("filterChange", value);
  }
  clearFilter() {
    this._columns.filter((w) => w.filter && w.filter.default === true).forEach((col) => this.columnSource.cleanFilter(col));
    return this;
  }
  // #endregion
  // #region checkbox
  /** 清除所有 `checkbox` */
  clearCheck() {
    return this.checkAll(false);
  }
  _refCheck() {
    const validData = this._data.filter((w) => !w.disabled);
    const checkedList = validData.filter((w) => w.checked === true);
    this._allChecked = checkedList.length > 0 && checkedList.length === validData.length;
    const allUnChecked = validData.every((value) => !value.checked);
    this._indeterminate = !this._allChecked && !allUnChecked;
    this._allCheckedDisabled = this._data.length === this._data.filter((w) => w.disabled).length;
    return this.cd();
  }
  checkAll(checked) {
    checked = typeof checked === "undefined" ? this._allChecked : checked;
    this._data.filter((w) => !w.disabled).forEach((i) => i.checked = checked);
    return this._refCheck()._checkNotify().refreshData();
  }
  _rowSelection(row) {
    row.select(this._data);
    return this._refCheck()._checkNotify();
  }
  _checkNotify() {
    const res = this._data.filter((w) => !w.disabled && w.checked === true);
    this.changeEmit("checkbox", res);
    return this;
  }
  // #endregion
  // #region radio
  /** 清除所有 `radio` */
  clearRadio() {
    this._data.filter((w) => w.checked).forEach((item) => item.checked = false);
    this.changeEmit("radio", null);
    return this.refreshData();
  }
  // #endregion
  _handleTd(ev) {
    switch (ev.type) {
      case "checkbox":
        this._refCheck()._checkNotify();
        break;
      case "radio":
        this.changeEmit("radio", ev.item);
        this.refreshData();
        break;
    }
  }
  // #region export
  /**
   * 导出当前页，确保已经注册 `XlsxModule`
   *
   * @param newData 重新指定数据；若为 `true` 表示使用 `filteredData` 数据
   * @param opt 额外参数
   */
  export(newData, opt) {
    const data = Array.isArray(newData) ? this.dataSource.optimizeData({
      columns: this._columns,
      result: newData
    }) : this._data;
    (newData === true ? this.filteredData : of(data)).subscribe((res) => this.exportSrv.export(__spreadProps(__spreadValues({
      columens: this._columns
    }, opt), {
      data: res
    })));
  }
  // #endregion
  // #region resizable
  colResize({
    width
  }, column) {
    column.width = `${width}px`;
    this.changeEmit("resize", column);
  }
  // #endregion
  // #region contextmenu
  onContextmenu(event) {
    if (!this.contextmenu) {
      return;
    }
    event.preventDefault();
    event.stopPropagation();
    const colEl = event.target.closest("[data-col-index]");
    if (!colEl) {
      return;
    }
    const colIndex = Number(colEl.dataset.colIndex);
    const rowIndex = Number(colEl.closest("tr").dataset.index);
    const isTitle = isNaN(rowIndex);
    const obs$ = this.contextmenu({
      event,
      type: isTitle ? "head" : "body",
      rowIndex: isTitle ? null : rowIndex,
      colIndex,
      data: isTitle ? null : this.list[rowIndex],
      column: this._columns[colIndex]
    });
    (isObservable(obs$) ? obs$ : of(obs$)).pipe(takeUntilDestroyed(this.destroy$), filter((res) => res.length > 0)).subscribe((res) => {
      this.contextmenuList = res.map((i) => {
        if (!Array.isArray(i.children)) {
          i.children = [];
        }
        return i;
      });
      this.cdr.detectChanges();
      this.cms.create(event, this.contextmenuTpl);
    });
  }
  // #endregion
  get cdkVirtualScrollViewport() {
    return this.orgTable?.cdkVirtualScrollViewport;
  }
  _resetColumns(options) {
    options = __spreadValues({
      emitReload: true,
      preClearData: false
    }, options);
    if (typeof options.columns !== "undefined") {
      this.columns = options.columns;
    }
    if (typeof options.pi !== "undefined") {
      this.pi = options.pi;
    }
    if (typeof options.ps !== "undefined") {
      this.ps = options.ps;
    }
    if (options.emitReload) {
      options.preClearData = true;
    }
    if (options.preClearData) {
      this._data = [];
    }
    this.refreshColumns();
    if (options.emitReload) {
      return this.loadPageData();
    } else {
      this.cd();
      return of(this);
    }
  }
  resetColumns(options) {
    return lastValueFrom(this._resetColumns(options));
  }
  refreshColumns() {
    const res = this.columnSource.process(this.columns, {
      widthMode: this.widthMode,
      resizable: this._resizable,
      safeType: this.cog.safeType
    });
    this._columns = res.columns;
    this._headers = res.headers;
    if (this.customWidthConfig === false && res.headerWidths != null) {
      this._widthConfig = res.headerWidths;
    }
    return this;
  }
  optimizeData() {
    this._data = this.dataSource.optimizeData({
      columns: this._columns,
      result: this._data,
      rowClassName: this.rowClassName
    });
    return this;
  }
  /**
   * Return pure data, `st` internally maintains a set of data for caching, this part of data may affect the backend
   *
   * 返回纯净数据，`st` 内部会维护一组用于缓存的数据，这部分数据可能会影响后端
   */
  pureItem(itemOrIndex) {
    if (typeof itemOrIndex === "number") {
      itemOrIndex = this._data[itemOrIndex];
    }
    if (!itemOrIndex) {
      return null;
    }
    const copyItem = deepCopy(itemOrIndex);
    ["_values", "_rowClassName"].forEach((key) => delete copyItem[key]);
    return copyItem;
  }
  ngAfterViewInit() {
    this.refreshColumns();
    if (!this.req.lazyLoad)
      this.loadPageData().subscribe();
    this.inied = true;
  }
  ngOnChanges(changes) {
    if (changes.loading) {
      this._loading = changes.loading.currentValue;
    }
    if (!this.inied)
      return;
    if (changes.columns) {
      this.refreshColumns().optimizeData();
    }
    if (changes.data) {
      this.loadPageData().subscribe();
    }
  }
};
_STComponent.ɵfac = function STComponent_Factory(t) {
  return new (t || _STComponent)(ɵɵdirectiveInject(AlainConfigService));
};
_STComponent.ɵcmp = ɵɵdefineComponent({
  type: _STComponent,
  selectors: [["st"]],
  viewQuery: function STComponent_Query(rf, ctx) {
    if (rf & 1) {
      ɵɵviewQuery(_c1, 5);
      ɵɵviewQuery(_c2, 5);
    }
    if (rf & 2) {
      let _t;
      ɵɵqueryRefresh(_t = ɵɵloadQuery()) && (ctx.orgTable = _t.first);
      ɵɵqueryRefresh(_t = ɵɵloadQuery()) && (ctx.contextmenuTpl = _t.first);
    }
  },
  hostVars: 14,
  hostBindings: function STComponent_HostBindings(rf, ctx) {
    if (rf & 2) {
      ɵɵclassProp("st", true)("st__p-left", ctx.page.placement === "left")("st__p-center", ctx.page.placement === "center")("st__width-strict", ctx.widthMode.type === "strict")("st__row-class", ctx.rowClassName)("ant-table-rep", ctx.responsive)("ant-table-rep__hide-header-footer", ctx.responsiveHideHeaderFooter);
    }
  },
  inputs: {
    req: "req",
    res: "res",
    page: "page",
    data: "data",
    columns: "columns",
    contextmenu: "contextmenu",
    ps: [InputFlags.HasDecoratorInputTransform, "ps", "ps", (v) => numberAttribute(v, 10)],
    pi: [InputFlags.HasDecoratorInputTransform, "pi", "pi", (v) => numberAttribute(v, 1)],
    total: [InputFlags.HasDecoratorInputTransform, "total", "total", (v) => numberAttribute(v, 0)],
    loading: "loading",
    loadingDelay: [InputFlags.HasDecoratorInputTransform, "loadingDelay", "loadingDelay", numberAttribute],
    loadingIndicator: "loadingIndicator",
    bordered: [InputFlags.HasDecoratorInputTransform, "bordered", "bordered", booleanAttribute],
    size: "size",
    scroll: "scroll",
    singleSort: "singleSort",
    multiSort: "multiSort",
    rowClassName: "rowClassName",
    clickRowClassName: "clickRowClassName",
    widthMode: "widthMode",
    widthConfig: "widthConfig",
    resizable: "resizable",
    header: "header",
    showHeader: [InputFlags.HasDecoratorInputTransform, "showHeader", "showHeader", booleanAttribute],
    footer: "footer",
    bodyHeader: "bodyHeader",
    body: "body",
    expandRowByClick: [InputFlags.HasDecoratorInputTransform, "expandRowByClick", "expandRowByClick", booleanAttribute],
    expandAccordion: [InputFlags.HasDecoratorInputTransform, "expandAccordion", "expandAccordion", booleanAttribute],
    expand: "expand",
    noResult: "noResult",
    responsive: [InputFlags.HasDecoratorInputTransform, "responsive", "responsive", booleanAttribute],
    responsiveHideHeaderFooter: [InputFlags.HasDecoratorInputTransform, "responsiveHideHeaderFooter", "responsiveHideHeaderFooter", booleanAttribute],
    virtualScroll: [InputFlags.HasDecoratorInputTransform, "virtualScroll", "virtualScroll", booleanAttribute],
    virtualItemSize: [InputFlags.HasDecoratorInputTransform, "virtualItemSize", "virtualItemSize", numberAttribute],
    virtualMaxBufferPx: [InputFlags.HasDecoratorInputTransform, "virtualMaxBufferPx", "virtualMaxBufferPx", numberAttribute],
    virtualMinBufferPx: [InputFlags.HasDecoratorInputTransform, "virtualMinBufferPx", "virtualMinBufferPx", numberAttribute],
    customRequest: "customRequest",
    virtualForTrackBy: "virtualForTrackBy",
    trackBy: "trackBy"
  },
  outputs: {
    error: "error",
    change: "change"
  },
  exportAs: ["st"],
  features: [ɵɵProvidersFeature([STDataSource, STRowSource, STColumnSource, STExport, DatePipe, YNPipe, DecimalPipe]), ɵɵInputTransformsFeature, ɵɵNgOnChangesFeature],
  decls: 21,
  vars: 34,
  consts: [["titleTpl", ""], ["chkAllTpl", ""], [3, "nzData", "nzPageIndex", "nzPageSize", "nzTotal", "nzShowPagination", "nzFrontPagination", "nzBordered", "nzSize", "nzLoading", "nzLoadingDelay", "nzLoadingIndicator", "nzTitle", "nzFooter", "nzScroll", "nzVirtualItemSize", "nzVirtualMaxBufferPx", "nzVirtualMinBufferPx", "nzVirtualForTrackBy", "nzNoResult", "nzPageSizeOptions", "nzShowQuickJumper", "nzShowSizeChanger", "nzPaginationPosition", "nzPaginationType", "nzItemRender", "nzSimple", "nzShowTotal", "nzWidthConfig", "nzPageIndexChange", "nzPageSizeChange", "contextmenu"], ["table", ""], [1, "st__body"], [3, "ngTemplateOutlet", "ngTemplateOutletContext"], ["bodyTpl", ""], ["nz-virtual-scroll", ""], ["totalTpl", ""], ["contextmenuTpl", "nzDropdownMenu"], ["nz-menu", "", 1, "st__contextmenu"], [3, "innerHTML"], ["class", "st__head-optional", 3, "innerHTML"], ["class", "st__head-tip", "nz-tooltip", "", "nz-icon", "", "nzType", "question-circle", 3, "nzTooltipTitle"], [1, "st__head-optional", 3, "innerHTML"], ["nz-tooltip", "", "nz-icon", "", "nzType", "question-circle", 1, "st__head-tip", 3, "nzTooltipTitle"], ["nz-checkbox", "", 1, "st__checkall", 3, "nzDisabled", "ngModel", "nzIndeterminate", "ngModelChange"], ["nzWidth", "50px", 3, "rowSpan"], ["nz-resizable", "", 3, "colSpan", "rowSpan", "nzWidth", "nzLeft", "nzRight", "ngClass", "nzShowSort", "nzSortOrder", "nzCustomFilter", "st__has-filter", "nzDisabled", "nzMaxWidth", "nzMinWidth", "nzBounds", "nzPreview", "nzSortOrderChange", "nzResizeEnd", 4, "let"], ["nz-resizable", "", 3, "colSpan", "rowSpan", "nzWidth", "nzLeft", "nzRight", "ngClass", "nzShowSort", "nzSortOrder", "nzCustomFilter", "nzDisabled", "nzMaxWidth", "nzMinWidth", "nzBounds", "nzPreview", "nzSortOrderChange", "nzResizeEnd"], ["nzDirection", "right"], ["nz-th-extra", "", 3, "col", "f", "locale"], [1, "ant-table-selection"], ["class", "ant-table-selection-extra"], ["selectionMenu", "nzDropdownMenu"], ["nz-menu", "", 1, "ant-table-selection-menu"], [1, "ant-table-selection-extra"], ["nz-dropdown", "", "nzPlacement", "bottomLeft", 1, "ant-table-selection-down", "st__checkall-selection", 3, "nzDropdownMenu"], ["nz-icon", "", "nzType", "down"], ["nz-menu-item", "", 3, "innerHTML", "click"], ["nz-menu-item", "", 3, "innerHTML"], ["nz-th-extra", "", 3, "col", "f", "locale", "n", "handle"], ["nz-resizable", "", 3, "colSpan", "rowSpan", "nzWidth", "nzLeft", "nzRight", "ngClass", "nzShowSort", "nzSortOrder", "nzCustomFilter", "st__has-filter", "nzDisabled", "nzMaxWidth", "nzMinWidth", "nzBounds", "nzPreview"], [3, "ngClass", "click", "dblclick"], ["nzWidth", "50px", 3, "nzShowExpand", "nzExpand"], [3, "nzExpand"], ["nzWidth", "50px", 3, "nzShowExpand", "nzExpand", "nzExpandChange", "click"], [3, "nzLeft", "nzRight", "ngClass"], ["class", "ant-table-rep__title"], [3, "data", "i", "index", "c", "cIdx", "n"], [1, "ant-table-rep__title"], ["nz-submenu", "", 3, "nzTitle"]],
  template: function STComponent_Template(rf, ctx) {
    if (rf & 1) {
      ɵɵtemplate(0, STComponent_ng_template_0_Template, 3, 3, "ng-template", null, 0, ɵɵtemplateRefExtractor)(2, STComponent_ng_template_2_Template, 1, 5, "ng-template", null, 1, ɵɵtemplateRefExtractor);
      ɵɵelementStart(4, "nz-table", 2, 3);
      ɵɵtwoWayListener("nzPageIndexChange", function STComponent_Template_nz_table_nzPageIndexChange_4_listener($event) {
        ɵɵtwoWayBindingSet(ctx.pi, $event) || (ctx.pi = $event);
        return $event;
      });
      ɵɵlistener("nzPageIndexChange", function STComponent_Template_nz_table_nzPageIndexChange_4_listener() {
        return ctx._change("pi");
      });
      ɵɵtwoWayListener("nzPageSizeChange", function STComponent_Template_nz_table_nzPageSizeChange_4_listener($event) {
        ɵɵtwoWayBindingSet(ctx.ps, $event) || (ctx.ps = $event);
        return $event;
      });
      ɵɵlistener("nzPageSizeChange", function STComponent_Template_nz_table_nzPageSizeChange_4_listener() {
        return ctx._change("ps");
      })("contextmenu", function STComponent_Template_nz_table_contextmenu_4_listener($event) {
        return ctx.onContextmenu($event);
      });
      ɵɵtemplate(6, STComponent_Conditional_6_Template, 3, 0, "thead");
      ɵɵelementStart(7, "tbody", 4);
      ɵɵtemplate(8, STComponent_Conditional_8_Template, 1, 4, null, 5)(9, STComponent_ng_template_9_Template, 6, 9, "ng-template", null, 6, ɵɵtemplateRefExtractor)(11, STComponent_Conditional_11_Template, 1, 0, null, 7)(12, STComponent_Conditional_12_Template, 2, 0)(13, STComponent_Conditional_13_Template, 1, 4, null, 5);
      ɵɵelementEnd();
      ɵɵtemplate(14, STComponent_ng_template_14_Template, 1, 1, "ng-template", null, 8, ɵɵtemplateRefExtractor);
      ɵɵelementEnd();
      ɵɵelementStart(16, "nz-dropdown-menu", null, 9)(18, "ul", 10);
      ɵɵrepeaterCreate(19, STComponent_For_20_Template, 2, 1, null, null, ɵɵrepeaterTrackByIndex);
      ɵɵelementEnd()();
    }
    if (rf & 2) {
      const _r13 = ɵɵreference(15);
      ɵɵadvance(4);
      ɵɵclassProp("st__no-column", ctx.noColumns);
      ɵɵproperty("nzData", ctx._data);
      ɵɵtwoWayProperty("nzPageIndex", ctx.pi)("nzPageSize", ctx.ps);
      ɵɵproperty("nzTotal", ctx.total)("nzShowPagination", ctx._isPagination)("nzFrontPagination", false)("nzBordered", ctx.bordered)("nzSize", ctx.size)("nzLoading", ctx.noColumns || ctx._loading)("nzLoadingDelay", ctx.loadingDelay)("nzLoadingIndicator", ctx.loadingIndicator)("nzTitle", ctx.header)("nzFooter", ctx.footer)("nzScroll", ctx.scroll)("nzVirtualItemSize", ctx.virtualItemSize)("nzVirtualMaxBufferPx", ctx.virtualMaxBufferPx)("nzVirtualMinBufferPx", ctx.virtualMinBufferPx)("nzVirtualForTrackBy", ctx.virtualForTrackBy)("nzNoResult", ctx.noResult)("nzPageSizeOptions", ctx.page.pageSizes)("nzShowQuickJumper", ctx.page.showQuickJumper)("nzShowSizeChanger", ctx.page.showSize)("nzPaginationPosition", ctx.page.position)("nzPaginationType", ctx.page.type)("nzItemRender", ctx.page.itemRender)("nzSimple", ctx.page.simple)("nzShowTotal", _r13)("nzWidthConfig", ctx._widthConfig);
      ɵɵadvance(2);
      ɵɵconditional(6, ctx.showHeader ? 6 : -1);
      ɵɵadvance(2);
      ɵɵconditional(8, !ctx._loading ? 8 : -1);
      ɵɵadvance(3);
      ɵɵconditional(11, ctx.virtualScroll ? 11 : 12);
      ɵɵadvance(2);
      ɵɵconditional(13, !ctx._loading ? 13 : -1);
      ɵɵadvance(6);
      ɵɵrepeater(ctx.contextmenuList);
    }
  },
  dependencies: () => [NgClass, NgTemplateOutlet, NgControlStatus, NgModel, LetDirective, NzTableComponent, NzThAddOnComponent, NzTableCellDirective, NzThMeasureDirective, NzTdAddOnComponent, NzTheadComponent, NzTbodyComponent, NzTrDirective, NzTableVirtualScrollDirective, NzCellFixedDirective, NzTrExpandDirective, NzTableFixedRowComponent, NzIconDirective, NzCheckboxComponent, NzMenuDirective, NzMenuItemComponent, NzSubMenuComponent, NzDropDownDirective, NzDropdownMenuComponent, NzTooltipDirective, NzResizableDirective, NzResizeHandleComponent, STFilterComponent, STTdComponent],
  encapsulation: 2,
  changeDetection: 0
});
var STComponent = _STComponent;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(STComponent, [{
    type: Component,
    args: [{
      selector: "st",
      exportAs: "st",
      providers: [STDataSource, STRowSource, STColumnSource, STExport, DatePipe, YNPipe, DecimalPipe],
      host: {
        "[class.st]": `true`,
        "[class.st__p-left]": `page.placement === 'left'`,
        "[class.st__p-center]": `page.placement === 'center'`,
        "[class.st__width-strict]": `widthMode.type === 'strict'`,
        "[class.st__row-class]": `rowClassName`,
        "[class.ant-table-rep]": `responsive`,
        "[class.ant-table-rep__hide-header-footer]": `responsiveHideHeaderFooter`
      },
      preserveWhitespaces: false,
      changeDetection: ChangeDetectionStrategy.OnPush,
      encapsulation: ViewEncapsulation$1.None,
      template: `<ng-template #titleTpl let-i>
  <span [innerHTML]="i._text"></span>
  @if (i.optional) {
    <small class="st__head-optional" [innerHTML]="i.optional"></small>
  }
  @if (i.optionalHelp) {
    <i class="st__head-tip" nz-tooltip [nzTooltipTitle]="i.optionalHelp" nz-icon nzType="question-circle"></i>
  }
</ng-template>
<ng-template #chkAllTpl let-custom>
  <label
    nz-checkbox
    class="st__checkall"
    [nzDisabled]="_allCheckedDisabled"
    [(ngModel)]="_allChecked"
    [nzIndeterminate]="_indeterminate"
    (ngModelChange)="checkAll()"
    [class.ant-table-selection-select-all-custom]="custom"
  ></label>
</ng-template>
<nz-table
  #table
  [nzData]="_data"
  [(nzPageIndex)]="pi"
  (nzPageIndexChange)="_change('pi')"
  [(nzPageSize)]="ps"
  (nzPageSizeChange)="_change('ps')"
  [nzTotal]="total"
  [nzShowPagination]="_isPagination"
  [nzFrontPagination]="false"
  [nzBordered]="bordered"
  [nzSize]="size"
  [nzLoading]="noColumns || _loading"
  [nzLoadingDelay]="loadingDelay"
  [nzLoadingIndicator]="loadingIndicator"
  [nzTitle]="header!"
  [nzFooter]="footer!"
  [nzScroll]="scroll"
  [nzVirtualItemSize]="virtualItemSize"
  [nzVirtualMaxBufferPx]="virtualMaxBufferPx"
  [nzVirtualMinBufferPx]="virtualMinBufferPx"
  [nzVirtualForTrackBy]="virtualForTrackBy"
  [nzNoResult]="noResult!"
  [nzPageSizeOptions]="page.pageSizes!"
  [nzShowQuickJumper]="page.showQuickJumper"
  [nzShowSizeChanger]="page.showSize"
  [nzPaginationPosition]="page.position!"
  [nzPaginationType]="page.type!"
  [nzItemRender]="page.itemRender!"
  [nzSimple]="page.simple"
  [nzShowTotal]="totalTpl"
  [nzWidthConfig]="_widthConfig"
  (contextmenu)="onContextmenu($event)"
  [class.st__no-column]="noColumns"
>
  @if (showHeader) {
    <thead>
      @for (row of _headers; track row) {
        <tr>
          @if ($first && expand) {
            <th nzWidth="50px" [rowSpan]="_headers.length"></th>
          }
          @for (h of row; track index; let index = $index; let last = $last) {
            <th
              *let="h.column as _c"
              [colSpan]="h.colSpan"
              [rowSpan]="h.rowSpan"
              [nzWidth]="$any(_c).width"
              [nzLeft]="_c._left!"
              [nzRight]="_c._right!"
              [ngClass]="_c._className"
              [attr.data-col]="_c.indexKey"
              [attr.data-col-index]="index"
              [nzShowSort]="_c._sort.enabled"
              [nzSortOrder]="$any(_c)._sort.default"
              (nzSortOrderChange)="sort(_c, index, $event)"
              [nzCustomFilter]="!!_c.filter"
              [class.st__has-filter]="_c.filter"
              nz-resizable
              [nzDisabled]="last || $any(_c).resizable.disabled"
              [nzMaxWidth]="$any(_c).resizable.maxWidth"
              [nzMinWidth]="$any(_c).resizable.minWidth"
              [nzBounds]="$any(_c).resizable.bounds"
              [nzPreview]="$any(_c).resizable.preview"
              (nzResizeEnd)="colResize($event, _c)"
            >
              @if ($any(!last && !$any(_c).resizable.disabled)) {
                <nz-resize-handle nzDirection="right">
                  <i></i>
                </nz-resize-handle>
              }
              @if (_c.__renderTitle) {
                <ng-template
                  [ngTemplateOutlet]="_c.__renderTitle!"
                  [ngTemplateOutletContext]="{ $implicit: h.column, index: index }"
                />
              } @else {
                @switch (_c.type) {
                  @case ('checkbox') {
                    @if (_c.selections!.length === 0) {
                      <ng-template [ngTemplateOutlet]="chkAllTpl" [ngTemplateOutletContext]="{ $implicit: false }" />
                    } @else {
                      <div class="ant-table-selection">
                        <ng-template [ngTemplateOutlet]="chkAllTpl" [ngTemplateOutletContext]="{ $implicit: true }" />
                        @if (_c.selections!.length) {
                          <div class="ant-table-selection-extra">
                            <div
                              nz-dropdown
                              nzPlacement="bottomLeft"
                              [nzDropdownMenu]="selectionMenu"
                              class="ant-table-selection-down st__checkall-selection"
                            >
                              <i nz-icon nzType="down"></i>
                            </div>
                          </div>
                        }
                        <nz-dropdown-menu #selectionMenu="nzDropdownMenu">
                          <ul nz-menu class="ant-table-selection-menu">
                            @for (rw of _c.selections; track $index) {
                              <li nz-menu-item (click)="_rowSelection(rw)" [innerHTML]="rw.text"></li>
                            }
                          </ul>
                        </nz-dropdown-menu>
                      </div>
                    }
                  }
                  @default {
                    <ng-template [ngTemplateOutlet]="titleTpl" [ngTemplateOutletContext]="{ $implicit: _c.title }" />
                  }
                }
              }
              @if (_c.filter) {
                <st-filter
                  nz-th-extra
                  [col]="h.column"
                  [f]="_c.filter"
                  [locale]="locale"
                  (n)="handleFilterNotify($event)"
                  (handle)="_handleFilter(_c, $event)"
                />
              }
            </th>
          }
        </tr>
      }
    </thead>
  }
  <tbody class="st__body">
    @if (!_loading) {
      <ng-template [ngTemplateOutlet]="bodyHeader!" [ngTemplateOutletContext]="{ $implicit: _statistical }" />
    }
    <ng-template #bodyTpl let-i let-index="index">
      <tr
        [attr.data-index]="index"
        (click)="_rowClick($event, i, index, false)"
        (dblclick)="_rowClick($event, i, index, true)"
        [ngClass]="i._rowClassName"
      >
        @if (expand) {
          <td
            [nzShowExpand]="expand && i.showExpand !== false"
            [nzExpand]="i.expand"
            (nzExpandChange)="_expandChange(i, $event)"
            (click)="_stopPropagation($event)"
            nzWidth="50px"
          ></td>
        }
        @for (c of _columns; track cIdx; let cIdx = $index) {
          @if (i._values[cIdx].props?.colSpan > 0 && i._values[cIdx].props?.rowSpan > 0) {
            <td
              [nzLeft]="!!c._left"
              [nzRight]="!!c._right"
              [attr.data-col-index]="cIdx"
              [ngClass]="c._className"
              [attr.colspan]="i._values[cIdx].props?.colSpan === 1 ? null : i._values[cIdx].props?.colSpan"
              [attr.rowspan]="i._values[cIdx].props?.rowSpan === 1 ? null : i._values[cIdx].props?.rowSpan"
            >
              @if (responsive) {
                <span class="ant-table-rep__title">
                  <ng-template [ngTemplateOutlet]="titleTpl" [ngTemplateOutletContext]="{ $implicit: c.title }" />
                </span>
              }
              <st-td [data]="_data" [i]="i" [index]="index" [c]="c" [cIdx]="cIdx" (n)="_handleTd($event)" />
            </td>
          }
        }
      </tr>
      <tr [nzExpand]="i.expand">
        <ng-template [ngTemplateOutlet]="expand" [ngTemplateOutletContext]="{ $implicit: i, index: index }" />
      </tr>
    </ng-template>
    @if (virtualScroll) {
      <ng-template nz-virtual-scroll let-i let-index="index">
        <ng-template [ngTemplateOutlet]="bodyTpl" [ngTemplateOutletContext]="{ $implicit: i, index: index }" />
      </ng-template>
    } @else {
      @for (i of _data; track trackBy($index, i)) {
        <ng-template [ngTemplateOutlet]="bodyTpl" [ngTemplateOutletContext]="{ $implicit: i, index: $index }" />
      }
    }
    @if (!_loading) {
      <ng-template [ngTemplateOutlet]="body!" [ngTemplateOutletContext]="{ $implicit: _statistical }" />
    }
  </tbody>
  <ng-template #totalTpl let-range="range" let-total>{{ renderTotal(total, range) }}</ng-template>
</nz-table>
<nz-dropdown-menu #contextmenuTpl="nzDropdownMenu">
  <ul nz-menu class="st__contextmenu">
    @for (i of contextmenuList; track $index) {
      @if (i.children!.length === 0) {
        <li nz-menu-item (click)="i.fn!(i)" [innerHTML]="i.text"></li>
      } @else {
        <li nz-submenu [nzTitle]="i.text">
          <ul>
            @for (ci of i.children; track $index) {
              <li nz-menu-item (click)="ci.fn!(ci)" [innerHTML]="ci.text"></li>
            }
          </ul>
        </li>
      }
    }
  </ul>
</nz-dropdown-menu>
`
    }]
  }], () => [{
    type: AlainConfigService
  }], {
    orgTable: [{
      type: ViewChild,
      args: ["table"]
    }],
    contextmenuTpl: [{
      type: ViewChild,
      args: ["contextmenuTpl"]
    }],
    req: [{
      type: Input
    }],
    res: [{
      type: Input
    }],
    page: [{
      type: Input
    }],
    data: [{
      type: Input
    }],
    columns: [{
      type: Input
    }],
    contextmenu: [{
      type: Input
    }],
    ps: [{
      type: Input,
      args: [{
        transform: (v) => numberAttribute(v, 10)
      }]
    }],
    pi: [{
      type: Input,
      args: [{
        transform: (v) => numberAttribute(v, 1)
      }]
    }],
    total: [{
      type: Input,
      args: [{
        transform: (v) => numberAttribute(v, 0)
      }]
    }],
    loading: [{
      type: Input
    }],
    loadingDelay: [{
      type: Input,
      args: [{
        transform: numberAttribute
      }]
    }],
    loadingIndicator: [{
      type: Input
    }],
    bordered: [{
      type: Input,
      args: [{
        transform: booleanAttribute
      }]
    }],
    size: [{
      type: Input
    }],
    scroll: [{
      type: Input
    }],
    singleSort: [{
      type: Input
    }],
    multiSort: [{
      type: Input
    }],
    rowClassName: [{
      type: Input
    }],
    clickRowClassName: [{
      type: Input
    }],
    widthMode: [{
      type: Input
    }],
    widthConfig: [{
      type: Input
    }],
    resizable: [{
      type: Input
    }],
    header: [{
      type: Input
    }],
    showHeader: [{
      type: Input,
      args: [{
        transform: booleanAttribute
      }]
    }],
    footer: [{
      type: Input
    }],
    bodyHeader: [{
      type: Input
    }],
    body: [{
      type: Input
    }],
    expandRowByClick: [{
      type: Input,
      args: [{
        transform: booleanAttribute
      }]
    }],
    expandAccordion: [{
      type: Input,
      args: [{
        transform: booleanAttribute
      }]
    }],
    expand: [{
      type: Input
    }],
    noResult: [{
      type: Input
    }],
    responsive: [{
      type: Input,
      args: [{
        transform: booleanAttribute
      }]
    }],
    responsiveHideHeaderFooter: [{
      type: Input,
      args: [{
        transform: booleanAttribute
      }]
    }],
    error: [{
      type: Output
    }],
    change: [{
      type: Output
    }],
    virtualScroll: [{
      type: Input,
      args: [{
        transform: booleanAttribute
      }]
    }],
    virtualItemSize: [{
      type: Input,
      args: [{
        transform: numberAttribute
      }]
    }],
    virtualMaxBufferPx: [{
      type: Input,
      args: [{
        transform: numberAttribute
      }]
    }],
    virtualMinBufferPx: [{
      type: Input,
      args: [{
        transform: numberAttribute
      }]
    }],
    customRequest: [{
      type: Input
    }],
    virtualForTrackBy: [{
      type: Input
    }],
    trackBy: [{
      type: Input
    }]
  });
})();
var _STTdComponent = class _STTdComponent {
  constructor() {
    this.stComp = inject(STComponent, {
      host: true
    });
    this.router = inject(Router);
    this.modalHelper = inject(ModalHelper);
    this.drawerHelper = inject(DrawerHelper);
    this.n = new EventEmitter();
  }
  get routerState() {
    const {
      pi,
      ps,
      total
    } = this.stComp;
    return {
      pi,
      ps,
      total
    };
  }
  report(type) {
    this.n.emit({
      type,
      item: this.i,
      col: this.c
    });
  }
  _checkbox(value) {
    this.i.checked = value;
    this.report("checkbox");
  }
  _radio() {
    this.data.filter((w) => !w.disabled).forEach((i) => i.checked = false);
    this.i.checked = true;
    this.report("radio");
  }
  _link(e) {
    this._stopPropagation(e);
    const res = this.c.click(this.i, this.stComp);
    if (typeof res === "string") {
      this.router.navigateByUrl(res, {
        state: this.routerState
      });
    }
    return false;
  }
  _stopPropagation(ev) {
    ev.preventDefault();
    ev.stopPropagation();
  }
  _btn(btn, ev) {
    ev?.stopPropagation();
    const cog = this.stComp.cog;
    let record = this.i;
    if (btn.type === "modal" || btn.type === "static") {
      if (cog.modal.pureRecoard === true) {
        record = this.stComp.pureItem(record);
      }
      const modal = btn.modal;
      const obj = {
        [modal.paramsName]: record
      };
      this.modalHelper[btn.type === "modal" ? "create" : "createStatic"](modal.component, __spreadValues(__spreadValues({}, obj), modal.params && modal.params(record)), deepMergeKey({}, true, cog.modal, modal)).pipe(filter((w) => typeof w !== "undefined")).subscribe((res) => this.btnCallback(record, btn, res));
      return;
    } else if (btn.type === "drawer") {
      if (cog.drawer.pureRecoard === true) {
        record = this.stComp.pureItem(record);
      }
      const drawer = btn.drawer;
      const obj = {
        [drawer.paramsName]: record
      };
      this.drawerHelper.create(drawer.title, drawer.component, __spreadValues(__spreadValues({}, obj), drawer.params && drawer.params(record)), deepMergeKey({}, true, cog.drawer, drawer)).pipe(filter((w) => typeof w !== "undefined")).subscribe((res) => this.btnCallback(record, btn, res));
      return;
    } else if (btn.type === "link") {
      const clickRes = this.btnCallback(record, btn);
      if (typeof clickRes === "string") {
        this.router.navigateByUrl(clickRes, {
          state: this.routerState
        });
      }
      return;
    }
    this.btnCallback(record, btn);
  }
  btnCallback(record, btn, modal) {
    if (!btn.click)
      return;
    if (typeof btn.click === "string") {
      switch (btn.click) {
        case "load":
          this.stComp.load();
          break;
        case "reload":
          this.stComp.reload();
          break;
      }
    } else {
      return btn.click(record, modal, this.stComp);
    }
  }
};
_STTdComponent.ɵfac = function STTdComponent_Factory(t) {
  return new (t || _STTdComponent)();
};
_STTdComponent.ɵcmp = ɵɵdefineComponent({
  type: _STTdComponent,
  selectors: [["st-td"]],
  inputs: {
    c: "c",
    cIdx: "cIdx",
    data: "data",
    i: "i",
    index: "index"
  },
  outputs: {
    n: "n"
  },
  decls: 8,
  vars: 1,
  consts: [["btnTpl", ""], ["btnItemTpl", ""], ["btnTextTpl", ""], [3, "ngTemplateOutlet", "ngTemplateOutletContext"], ["nz-tooltip", "", 3, "nzTooltipTitle", "d-block", "width-100"], ["nz-tooltip", "", 3, "nzTooltipTitle"], ["nz-popconfirm", "", "class", "st__btn-text", 3, "nzPopconfirmTitle", "nzIcon", "nzCondition", "nzCancelText", "nzOkText", "nzOkType", "ngClass"], ["nz-popconfirm", "", 1, "st__btn-text", 3, "nzPopconfirmTitle", "nzIcon", "nzCondition", "nzCancelText", "nzOkText", "nzOkType", "ngClass", "nzOnConfirm", "click"], [1, "st__btn-text", 3, "ngClass", "click"], [3, "innerHTML", "ngClass"], ["nz-icon", "", 3, "nzIconfont"], ["nz-icon", "", 3, "nzType", "nzTheme", "nzSpin", "nzTwotoneColor"], ["nz-checkbox", "", 3, "nzDisabled", "ngModel", "ngModelChange"], ["nz-radio", "", 3, "nzDisabled", "ngModel", "ngModelChange"], [3, "innerHTML", "click"], [3, "nzColor", "nz-tooltip"], [3, "innerHTML"], [3, "nzStatus", "nzText", "nz-tooltip"], [3, "value", "options"], ["st-widget-host", "", 3, "record", "column"], [3, "innerText"], ["nzType", "vertical"], ["nz-dropdown", "", "nzOverlayClassName", "st__btn-sub", 3, "nzDropdownMenu"], ["nz-icon", "", "nzType", "down"], ["btnMenu", "nzDropdownMenu"], ["nz-menu", ""], ["nz-menu-divider", ""], ["nz-menu-item", ""]],
  template: function STTdComponent_Template(rf, ctx) {
    if (rf & 1) {
      ɵɵtemplate(0, STTdComponent_ng_template_0_Template, 2, 1, "ng-template", null, 0, ɵɵtemplateRefExtractor)(2, STTdComponent_ng_template_2_Template, 2, 1, "ng-template", null, 1, ɵɵtemplateRefExtractor)(4, STTdComponent_ng_template_4_Template, 2, 5, "ng-template", null, 2, ɵɵtemplateRefExtractor)(6, STTdComponent_Conditional_6_Template, 1, 6, null, 3)(7, STTdComponent_Conditional_7_Template, 10, 1);
    }
    if (rf & 2) {
      ɵɵadvance(6);
      ɵɵconditional(6, ctx.c.__render ? 6 : 7);
    }
  },
  dependencies: [NgClass, NgTemplateOutlet, NgControlStatus, NgModel, CellComponent, NzPopconfirmDirective, NzIconDirective, NzBadgeComponent, NzCheckboxComponent, NzDividerComponent, NzMenuDirective, NzMenuItemComponent, NzMenuDividerDirective, NzDropDownDirective, NzDropDownADirective, NzDropdownMenuComponent, NzRadioComponent, NzTagComponent, NzTooltipDirective, STWidgetHostDirective],
  encapsulation: 2,
  changeDetection: 0
});
var STTdComponent = _STTdComponent;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(STTdComponent, [{
    type: Component,
    args: [{
      selector: "st-td",
      preserveWhitespaces: false,
      changeDetection: ChangeDetectionStrategy.OnPush,
      encapsulation: ViewEncapsulation$1.None,
      template: `<ng-template #btnTpl let-i let-child="child">
  @if (i.tooltip) {
    <span nz-tooltip [nzTooltipTitle]="i.tooltip" [class.d-block]="child" [class.width-100]="child">
      <ng-template [ngTemplateOutlet]="btnItemTpl" [ngTemplateOutletContext]="{ $implicit: i }" />
    </span>
  } @else {
    <ng-template [ngTemplateOutlet]="btnItemTpl" [ngTemplateOutletContext]="{ $implicit: i }" />
  }
</ng-template>
<ng-template #btnItemTpl let-i>
  @if (i.pop) {
    <a
      nz-popconfirm
      [nzPopconfirmTitle]="i.pop.title"
      [nzIcon]="i.pop.icon"
      [nzCondition]="i.pop.condition(i)"
      [nzCancelText]="i.pop.cancelText"
      [nzOkText]="i.pop.okText"
      [nzOkType]="i.pop.okType"
      (nzOnConfirm)="_btn(i)"
      class="st__btn-text"
      [ngClass]="i._className"
      (click)="_stopPropagation($event)"
    >
      <ng-template [ngTemplateOutlet]="btnTextTpl" [ngTemplateOutletContext]="{ $implicit: i }" />
    </a>
  } @else {
    <a (click)="_btn(i, $event)" class="st__btn-text" [ngClass]="i._className">
      <ng-template [ngTemplateOutlet]="btnTextTpl" [ngTemplateOutletContext]="{ $implicit: i }" />
    </a>
  }
</ng-template>
<ng-template #btnTextTpl let-i>
  @if (i._icon) {
    @if (i._icon.iconfont) {
      <i nz-icon [nzIconfont]="i._icon.iconfont"></i>
    } @else {
      <i
        nz-icon
        [nzType]="i._icon.type"
        [nzTheme]="i._icon.theme"
        [nzSpin]="i._icon.spin"
        [nzTwotoneColor]="i._icon.twoToneColor"
      ></i>
    }
  }
  <span [innerHTML]="i._text" [ngClass]="{ 'pl-xs': i._icon }"></span>
</ng-template>
@if (c.__render) {
  <ng-template [ngTemplateOutlet]="c.__render!" [ngTemplateOutletContext]="{ $implicit: i, index: index, column: c }" />
} @else {
  @switch (c.type) {
    @case ('checkbox') {
      <label nz-checkbox [nzDisabled]="i.disabled" [ngModel]="i.checked" (ngModelChange)="_checkbox($event)"></label>
    }
    @case ('radio') {
      <label nz-radio [nzDisabled]="i.disabled" [ngModel]="i.checked" (ngModelChange)="_radio()"></label>
    }
    @case ('link') {
      <a (click)="_link($event)" [innerHTML]="i._values[cIdx]._text" [attr.title]="i._values[cIdx].text"></a>
    }
    @case ('tag') {
      <nz-tag [nzColor]="i._values[cIdx].color" [nz-tooltip]="i._values[cIdx].tooltip">
        <span [innerHTML]="i._values[cIdx]._text"></span>
      </nz-tag>
    }
    @case ('badge') {
      <nz-badge
        [nzStatus]="i._values[cIdx].color"
        [nzText]="i._values[cIdx].text"
        [nz-tooltip]="i._values[cIdx].tooltip"
      />
    }
    @case ('cell') {
      <cell [value]="i._values[cIdx].text" [options]="i._values[cIdx].cell ?? c.cell" />
    }
    @case ('widget') {
      <ng-template st-widget-host [record]="i" [column]="c" />
    }
    @default {
      @if (c.safeType === 'text') {
        <span [innerText]="i._values[cIdx]._text" [attr.title]="c._isTruncate ? i._values[cIdx].text : null"></span>
      } @else {
        <span [innerHTML]="i._values[cIdx]._text" [attr.title]="c._isTruncate ? i._values[cIdx].text : null"></span>
      }
    }
  }
  @for (btn of i._values[cIdx].buttons; track $index) {
    @if (btn.children!.length > 0) {
      <a nz-dropdown [nzDropdownMenu]="btnMenu" nzOverlayClassName="st__btn-sub">
        <span [innerHTML]="btn._text"></span>
        <i nz-icon nzType="down"></i>
      </a>
      <nz-dropdown-menu #btnMenu="nzDropdownMenu">
        <ul nz-menu>
          @for (subBtn of btn.children; track $index) {
            @if (subBtn.type === 'divider') {
              <li nz-menu-divider></li>
            } @else {
              <li nz-menu-item [class.st__btn-disabled]="subBtn._disabled">
                <ng-template
                  [ngTemplateOutlet]="btnTpl"
                  [ngTemplateOutletContext]="{ $implicit: subBtn, child: true }"
                />
              </li>
            }
          }
        </ul>
      </nz-dropdown-menu>
    } @else {
      <span [class.st__btn-disabled]="btn._disabled">
        <ng-template [ngTemplateOutlet]="btnTpl" [ngTemplateOutletContext]="{ $implicit: btn, child: false }" />
      </span>
    }
    @if (!$last) {
      <nz-divider nzType="vertical" />
    }
  }
}
`
    }]
  }], null, {
    c: [{
      type: Input
    }],
    cIdx: [{
      type: Input
    }],
    data: [{
      type: Input
    }],
    i: [{
      type: Input
    }],
    index: [{
      type: Input
    }],
    n: [{
      type: Output
    }]
  });
})();
var COMPONENTS2 = [STComponent, STRowDirective, STWidgetHostDirective];
var _STModule = class _STModule {
};
_STModule.ɵfac = function STModule_Factory(t) {
  return new (t || _STModule)();
};
_STModule.ɵmod = ɵɵdefineNgModule({
  type: _STModule,
  declarations: [STComponent, STRowDirective, STWidgetHostDirective, STFilterComponent, STTdComponent],
  imports: [CommonModule, FormsModule, DelonACLModule, LetModule, CellModule, NzPopconfirmModule, NzTableModule, NzIconModule, NzBadgeModule, NzCheckboxModule, NzDividerModule, NzDropDownModule, NzMenuModule, NzRadioModule, NzTagModule, NzInputModule, NzToolTipModule, NzResizableModule, NzInputNumberModule, NzDatePickerModule],
  exports: [STComponent, STRowDirective, STWidgetHostDirective]
});
_STModule.ɵinj = ɵɵdefineInjector({
  imports: [CommonModule, FormsModule, DelonACLModule, LetModule, CellModule, NzPopconfirmModule, NzTableModule, NzIconModule, NzBadgeModule, NzCheckboxModule, NzDividerModule, NzDropDownModule, NzMenuModule, NzRadioModule, NzTagModule, NzInputModule, NzToolTipModule, NzResizableModule, NzInputNumberModule, NzDatePickerModule]
});
var STModule = _STModule;
(() => {
  (typeof ngDevMode === "undefined" || ngDevMode) && setClassMetadata(STModule, [{
    type: NgModule,
    args: [{
      imports: [CommonModule, FormsModule, DelonACLModule, LetModule, CellModule, NzPopconfirmModule, NzTableModule, NzIconModule, NzBadgeModule, NzCheckboxModule, NzDividerModule, NzDropDownModule, NzMenuModule, NzRadioModule, NzTagModule, NzInputModule, NzToolTipModule, NzResizableModule, NzInputNumberModule, NzDatePickerModule],
      declarations: [...COMPONENTS2, STFilterComponent, STTdComponent],
      exports: COMPONENTS2
    }]
  }], null, null);
})();
function provideSTWidgets(...widgets) {
  return makeEnvironmentProviders([{
    provide: ENVIRONMENT_INITIALIZER,
    multi: true,
    useValue: () => {
      const srv = inject(STWidgetRegistry);
      widgets.forEach((widget) => srv.register(widget.KEY, widget.type));
    }
  }]);
}
export {
  STColumnSource,
  STComponent,
  STDataSource,
  STExport,
  STModule,
  STRowDirective,
  STWidgetHostDirective,
  STWidgetRegistry,
  ST_DEFAULT_CONFIG,
  provideSTWidgets
};
//# sourceMappingURL=@delon_abc_st.js.map
